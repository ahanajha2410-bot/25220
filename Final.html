<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Community Health Monitoring | Team Curio</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>
    <style>
        :root {
            --primary: #1a73e8;
            --primary-dark: #0d47a1;
            --primary-light: #e8f0fe;
            --safe: #34a853;
            --warning: #f9ab00;
            --danger: #ea4335;
            --critical: #c5221f;
            --dark: #202124;
            --dark-gray: #5f6368;
            --light-gray: #f8f9fa;
            --medium-gray: #dadce0;
            --white: #ffffff;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.12);
            --radius: 12px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%);
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Welcome Page Styles */
        .welcome-container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            text-align: center;
        }

        .welcome-header {
            margin-bottom: 3rem;
        }

        .welcome-logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 2rem;
        }

        .welcome-logo-icon {
            background: var(--primary);
            width: 70px;
            height: 70px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .welcome-logo-icon i {
            font-size: 2.5rem;
        }

        .welcome-logo-text h1 {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary);
        }

        .welcome-logo-text span {
            font-size: 1.1rem;
            color: var(--dark-gray);
        }

        .welcome-message {
            max-width: 800px;
            margin: 0 auto 3rem;
        }

        .welcome-message h2 {
            font-size: 2.2rem;
            margin-bottom: 1rem;
            color: var(--dark);
        }

        .welcome-message p {
            font-size: 1.2rem;
            color: var(--dark-gray);
            margin-bottom: 1rem;
        }

        .user-selection {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
            max-width: 900px;
            width: 100%;
            margin-top: 2rem;
        }

        .user-card {
            background: var(--white);
            border-radius: var(--radius);
            padding: 2.5rem;
            box-shadow: var(--shadow);
            transition: var(--transition);
            cursor: pointer;
            border: 3px solid transparent;
        }

        .user-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary);
        }

        .user-icon {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: var(--primary-light);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
            color: var(--primary);
        }

        .user-icon i {
            font-size: 2.5rem;
        }

        .user-card h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: var(--dark);
        }

        .user-card p {
            color: var(--dark-gray);
            margin-bottom: 1.5rem;
        }

        .user-features {
            text-align: left;
            margin: 1.5rem 0;
        }

        .user-features li {
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .user-features i {
            color: var(--safe);
        }

        .btn-select {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-select:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        /* Login Page Styles */
        .login-container {
            display: none;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .login-card {
            background: var(--white);
            border-radius: var(--radius);
            box-shadow: var(--shadow-lg);
            width: 100%;
            max-width: 450px;
            padding: 2.5rem;
            text-align: center;
        }

        .login-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-bottom: 1.5rem;
        }

        .login-header-icon {
            background: var(--primary);
            width: 50px;
            height: 50px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .login-header-icon i {
            font-size: 1.8rem;
        }

        .login-header-text h1 {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
        }

        .login-header-text span {
            font-size: 0.9rem;
            color: var(--dark-gray);
        }

        .login-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            color: var(--dark);
        }

        .user-type-badge {
            display: inline-block;
            background: var(--primary-light);
            color: var(--primary);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .login-form {
            text-align: left;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--dark);
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--medium-gray);
            border-radius: 8px;
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(26, 115, 232, 0.2);
        }

        .login-btn {
            width: 100%;
            padding: 12px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            margin-top: 1rem;
        }

        .login-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .login-footer {
            margin-top: 1.5rem;
            font-size: 0.9rem;
            color: var(--dark-gray);
        }

        .login-footer a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
        }

        .login-links {
            display: flex;
            justify-content: space-between;
            margin-top: 1rem;
        }

        .error-message {
            color: var(--danger);
            font-size: 0.9rem;
            margin-top: 0.5rem;
            display: none;
        }

        /* Dashboard Styles */
        .dashboard {
            display: none;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles */
        header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: var(--white);
            padding: 1rem 0;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-icon {
            background: rgba(255, 255, 255, 0.2);
            width: 45px;
            height: 45px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
        }

        .logo-icon i {
            font-size: 1.5rem;
        }

        .logo-text h1 {
            font-size: 1.8rem;
            font-weight: 700;
            letter-spacing: -0.5px;
            background: linear-gradient(45deg, #fff, #e0f7ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .logo-text span {
            font-size: 0.9rem;
            opacity: 0.9;
            font-weight: 400;
        }

        .region-tag {
            display: inline-block;
            background: rgba(255, 255, 255, 0.2);
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.7rem;
            margin-top: 2px;
            cursor: pointer;
            transition: var(--transition);
        }

        .region-tag:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 8px;
        }

        nav a {
            color: var(--white);
            text-decoration: none;
            font-weight: 500;
            padding: 10px 18px;
            border-radius: 8px;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        nav a:hover, nav a.active {
            background: rgba(255, 255, 255, 0.15);
        }

        .user-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .notification-bell {
            position: relative;
            cursor: pointer;
        }

        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--danger);
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 0.7rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(255, 255, 255, 0.15);
            padding: 6px 12px;
            border-radius: 20px;
            cursor: pointer;
            position: relative;
        }

        .user-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .user-name {
            font-size: 0.9rem;
        }

        .user-menu {
            position: absolute;
            top: 100%;
            right: 0;
            background: var(--white);
            border-radius: var(--radius);
            box-shadow: var(--shadow-lg);
            width: 220px;
            z-index: 1002;
            transform: translateY(10px);
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }

        .user-menu.show {
            transform: translateY(0);
            opacity: 1;
            visibility: visible;
        }

        .user-menu ul {
            list-style: none;
            padding: 0.5rem 0;
        }

        .user-menu li {
            padding: 0.7rem 1rem;
            transition: var(--transition);
        }

        .user-menu li:hover {
            background: var(--primary-light);
        }

        .user-menu a {
            color: var(--dark);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Language Selection Modal */
        .language-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1004;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .language-modal.show {
            opacity: 1;
            visibility: visible;
        }

        .language-content {
            background: var(--white);
            border-radius: var(--radius);
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .language-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .language-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--dark);
        }

        .language-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--dark-gray);
        }

        .language-list {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .language-option {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid var(--medium-gray);
        }

        .language-option:hover {
            background: var(--primary-light);
            border-color: var(--primary);
        }

        .language-option.active {
            background: var(--primary-light);
            border-color: var(--primary);
            color: var(--primary);
        }

        .language-flag {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            top: 100px;
            right: 20px;
            background: var(--safe);
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: var(--shadow-lg);
            z-index: 1001;
            display: flex;
            align-items: center;
            gap: 10px;
            transform: translateX(150%);
            transition: transform 0.4s ease;
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast i {
            font-size: 1.2rem;
        }

        /* Main Content Area */
        .app-container {
            display: flex;
            min-height: calc(100vh - 80px);
        }

        /* Sidebar */
        .sidebar {
            width: 260px;
            background: var(--white);
            box-shadow: var(--shadow);
            padding: 2rem 1rem;
            transition: var(--transition);
        }

        .sidebar-section {
            margin-bottom: 2rem;
        }

        .sidebar-title {
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--dark-gray);
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .sidebar-menu {
            list-style: none;
        }

        .sidebar-menu li {
            margin-bottom: 8px;
        }

        .sidebar-menu a {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 15px;
            border-radius: 8px;
            color: var(--dark);
            text-decoration: none;
            transition: var(--transition);
        }

        .sidebar-menu a:hover, .sidebar-menu a.active {
            background: var(--primary-light);
            color: var(--primary);
        }

        .sidebar-menu i {
            width: 20px;
            text-align: center;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            padding: 2rem;
            overflow-y: auto;
        }

        .content-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .content-header h2 {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--dark);
        }

        .header-actions {
            display: flex;
            gap: 15px;
        }

        /* Dashboard Grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 24px;
            margin-bottom: 2rem;
        }

        .dashboard-card {
            background: var(--white);
            border-radius: var(--radius);
            padding: 1.5rem;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .card-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--dark);
        }

        .card-icon {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .card-icon.safe { background: rgba(52, 168, 83, 0.1); color: var(--safe); }
        .card-icon.warning { background: rgba(249, 171, 0, 0.1); color: var(--warning); }
        .card-icon.danger { background: rgba(234, 67, 53, 0.1); color: var(--danger); }
        .card-icon.primary { background: rgba(26, 115, 232, 0.1); color: var(--primary); }

        .card-value {
            font-size: 2.2rem;
            font-weight: 700;
            margin: 10px 0;
        }

        .card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1rem;
            font-size: 0.9rem;
            color: var(--dark-gray);
        }

        .trend {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .trend.up { color: var(--safe); }
        .trend.down { color: var(--danger); }

        /* Charts Section */
        .charts-section {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 24px;
            margin-bottom: 2rem;
        }

        .chart-container {
            background: var(--white);
            border-radius: var(--radius);
            padding: 1.5rem;
            box-shadow: var(--shadow);
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .chart-title {
            font-size: 1.2rem;
            font-weight: 600;
        }

        .chart-actions {
            display: flex;
            gap: 10px;
        }

        .chart-wrapper {
            position: relative;
            height: 300px;
        }

        /* Alert System */
        .alert-system {
            background: var(--white);
            border-radius: var(--radius);
            padding: 1.5rem;
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
        }

        .alert-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .alert-title {
            font-size: 1.2rem;
            font-weight: 600;
        }

        .alert-filters {
            display: flex;
            gap: 10px;
        }

        .alert-steps {
            display: flex;
            margin-bottom: 2rem;
            position: relative;
        }

        .alert-steps::before {
            content: '';
            position: absolute;
            top: 24px;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--medium-gray);
            z-index: 1;
        }

        .step {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 2;
        }

        .step-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--medium-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
            font-size: 1.2rem;
            transition: var(--transition);
        }

        .step.active .step-icon {
            background: var(--primary);
            color: white;
            box-shadow: 0 4px 10px rgba(26, 115, 232, 0.3);
        }

        .step.completed .step-icon {
            background: var(--safe);
            color: white;
        }

        .step-text {
            font-size: 0.9rem;
            font-weight: 500;
            text-align: center;
        }

        .alert-details {
            background: var(--light-gray);
            border-radius: var(--radius);
            padding: 1.5rem;
        }

        .alert-info {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 1.5rem;
        }

        .info-item h4 {
            font-size: 0.9rem;
            color: var(--dark-gray);
            margin-bottom: 5px;
        }

        .info-item p {
            font-weight: 600;
        }

        .alert-actions {
            display: flex;
            gap: 15px;
        }

        /* Notification Options */
        .notification-options {
            display: none;
            background: var(--white);
            border-radius: var(--radius);
            padding: 1.5rem;
            margin-top: 1rem;
            box-shadow: var(--shadow);
        }

        .notification-options.show {
            display: block;
        }

        .notification-options h4 {
            margin-bottom: 1rem;
            color: var(--dark);
        }

        .notification-methods {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }

        .notification-method {
            background: var(--light-gray);
            border-radius: var(--radius);
            padding: 1rem;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .notification-method:hover {
            background: var(--primary-light);
            transform: translateY(-2px);
        }

        .notification-method i {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            color: var(--primary);
        }

        /* Content Sections */
        .content-section {
            background: var(--white);
            border-radius: var(--radius);
            padding: 2rem;
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
            display: none;
        }

        .content-section.active {
            display: block;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--dark);
        }

        .section-content {
            line-height: 1.8;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 1.5rem;
        }

        .feature-card {
            background: var(--light-gray);
            border-radius: var(--radius);
            padding: 1.5rem;
        }

        .feature-card h4 {
            margin-bottom: 0.5rem;
            color: var(--primary);
        }

        /* Disease Report Form */
        .report-form {
            background: var(--white);
            border-radius: var(--radius);
            padding: 2rem;
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 1.5rem;
        }

        .form-full {
            grid-column: 1 / -1;
        }

        textarea.form-control {
            min-height: 120px;
            resize: vertical;
        }

        /* Buttons */
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .btn-outline {
            background: transparent;
            border: 1px solid var(--primary);
            color: var(--primary);
        }

        .btn-outline:hover {
            background: var(--primary-light);
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-danger:hover {
            background: #c5221f;
        }

        /* Footer */
        footer {
            background: var(--dark);
            color: var(--white);
            padding: 2rem 0;
            margin-top: 3rem;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 30px;
        }

        .footer-section h3 {
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 8px;
        }

        .footer-links a {
            color: #BDC3C7;
            text-decoration: none;
            transition: var(--transition);
        }

        .footer-links a:hover {
            color: white;
        }

        .copyright {
            text-align: center;
            margin-top: 2rem;
            padding-top: 1rem;
            border-top: 1px solid #34495E;
            color: #BDC3C7;
            font-size: 0.9rem;
        }

        /* Animations */
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(234, 67, 53, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(234, 67, 53, 0); }
            100% { box-shadow: 0 0 0 0 rgba(234, 67, 53, 0); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        /* Loading Spinner */
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: var(--primary);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .hidden {
            display: none;
        }

        /* Notification Panel */
        .notification-panel {
            position: fixed;
            top: 80px;
            right: 20px;
            width: 350px;
            background: var(--white);
            border-radius: var(--radius);
            box-shadow: var(--shadow-lg);
            z-index: 1002;
            transform: translateX(400px);
            transition: transform 0.3s ease;
            max-height: 500px;
            overflow-y: auto;
        }

        .notification-panel.show {
            transform: translateX(0);
        }

        .notification-header {
            padding: 1rem;
            border-bottom: 1px solid var(--medium-gray);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .notification-header h3 {
            margin: 0;
        }

        .notification-list {
            list-style: none;
        }

        .notification-item {
            padding: 1rem;
            border-bottom: 1px solid var(--light-gray);
            display: flex;
            gap: 10px;
            cursor: pointer;
            transition: var(--transition);
        }

        .notification-item:hover {
            background: var(--light-gray);
        }

        .notification-item.unread {
            background: var(--primary-light);
        }

        .notification-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .notification-icon.info {
            background: rgba(26, 115, 232, 0.1);
            color: var(--primary);
        }

        .notification-icon.warning {
            background: rgba(249, 171, 0, 0.1);
            color: var(--warning);
        }

        .notification-icon.danger {
            background: rgba(234, 67, 53, 0.1);
            color: var(--danger);
        }

        .notification-content {
            flex: 1;
        }

        .notification-title {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .notification-time {
            font-size: 0.8rem;
            color: var(--dark-gray);
        }

        /* Map Overlay */
        .map-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1003;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .map-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .map-container {
            background: var(--white);
            border-radius: var(--radius);
            padding: 2rem;
            max-width: 600px;
            width: 90%;
            text-align: center;
        }

        .map-icon {
            font-size: 4rem;
            color: var(--primary);
            margin-bottom: 1rem;
        }

        /* Access Denied Modal */
        .access-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1003;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .access-modal.show {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: var(--white);
            border-radius: var(--radius);
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            text-align: center;
        }

        .modal-icon {
            font-size: 4rem;
            color: var(--danger);
            margin-bottom: 1rem;
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .dashboard-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .charts-section {
                grid-template-columns: 1fr;
            }
            
            .notification-methods {
                grid-template-columns: 1fr;
            }
            
            .feature-grid {
                grid-template-columns: 1fr;
            }
            
            .language-list {
                grid-template-columns: 1fr;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .app-container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                padding: 1rem;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .footer-content {
                grid-template-columns: repeat(2, 1fr);
            }
            
            nav ul {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .notification-panel {
                width: 90%;
                right: 5%;
            }
            
            .alert-actions {
                flex-direction: column;
            }
            
            .user-selection {
                grid-template-columns: 1fr;
            }
            
            .welcome-logo {
                flex-direction: column;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <!-- Welcome Page -->
    <div id="welcome-page" class="welcome-container">
        <div class="welcome-header">
            <div class="welcome-logo">
                <div class="welcome-logo-icon">
                    <i class="fas fa-heartbeat"></i>
                </div>
                <div class="welcome-logo-text">
                    <h1>Team Curio</h1>
                    <span>Smart Community Health Monitoring</span>
                </div>
            </div>
        </div>
        
        <div class="welcome-message">
            <h2>Welcome to Smart Community Health Monitoring and Early Warning System</h2>
            <p>For Rural Northeast India</p>
            <p>Represented by <strong>Team Curio</strong></p>
        </div>

        <div class="user-selection">
            <div class="user-card" data-user-type="villager">
                <div class="user-icon">
                    <i class="fas fa-users"></i>
                </div>
                <h3>Community Villagers</h3>
                <p>Access health alerts, water quality information, and community resources</p>
                <div class="user-features">
                    <ul>
                    
                    </ul>
                </div>
                <button class="btn-select" onclick="selectUserType('villager')">
                    <i class="fas fa-sign-in-alt"></i> Enter as Villager
                </button>
            </div>
            
            <div class="user-card" data-user-type="healthworker">
                <div class="user-icon">
                    <i class="fas fa-user-md"></i>
                </div>
                <h3>ASHA Workers & Health Officials</h3>
                <p>Advanced dashboard for monitoring, reporting, and managing health alerts</p>
                <div class="user-features">
                    <ul>
                        
                    </ul>
                </div>
                <button class="btn-select" onclick="selectUserType('healthworker')">
                    <i class="fas fa-sign-in-alt"></i> Enter as Health Worker
                </button>
            </div>
        </div>
    </div>

    <!-- Login Page -->
    <div id="login-page" class="login-container">
        <div class="login-card">
            <div class="login-header">
                <div class="login-header-icon">
                    <i class="fas fa-heartbeat"></i>
                </div>
                <div class="login-header-text">
                    <h1>Team Curio</h1>
                    <span>Health Monitoring System</span>
                </div>
            </div>
            
            <div class="user-type-badge" id="user-type-badge">Community Villager</div>
            
            <h2 class="login-title">Sign In to Your Account</h2>
            
            <form class="login-form" id="login-form">
                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input type="email" id="email" class="form-control" placeholder="Enter your email" required>
                </div>
                
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" class="form-control" placeholder="Enter your password" required>
                    <div class="error-message" id="password-error">Incorrect email or password. Please try again.</div>
                </div>
                
                <button type="submit" class="login-btn">Sign In</button>
            </form>
            
            <div class="login-links">
                <a href="#" id="forgot-password">Forgot Password?</a>
                <a href="#" id="create-account">Create New Account</a>
            </div>
            
            <div class="login-footer">
                <p>Need help? <a href="#">Contact Support</a></p>
            </div>
        </div>
    </div>

    <!-- Language Selection Modal -->
    <div class="language-modal" id="language-modal">
        <div class="language-content">
            <div class="language-header">
                <h3 class="language-title">Select Language</h3>
                <button class="language-close" id="language-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="language-list" id="language-list">
                <!-- Languages will be populated here -->
            </div>
        </div>
    </div>

    <!-- Dashboard -->
    <div id="dashboard" class="dashboard">
        <!-- Toast Notification -->
        <div id="toast" class="toast">
            <i class="fas fa-check-circle"></i>
            <span id="toast-message">Notification sent successfully!</span>
        </div>

        <!-- Loading Spinner -->
        <div id="loading" class="spinner hidden"></div>

        <!-- Notification Panel -->
        <div class="notification-panel" id="notification-panel">
            <div class="notification-header">
                <h3>Notifications</h3>
                <button class="btn btn-outline" id="close-notifications" style="padding: 5px 10px; font-size: 0.8rem;">
                    <i class="fas fa-times"></i> Close
                </button>
            </div>
            <ul class="notification-list" id="notification-list">
                <!-- Notifications will be populated here -->
            </ul>
        </div>

        <!-- Map Overlay -->
        <div class="map-overlay" id="map-overlay">
            <div class="map-container">
                    <div class="map-header" style="display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px;">
                        <div style="display:flex;align-items:center;gap:12px;">
                            <div class="map-icon">
                                <i class="fas fa-map-marked-alt"></i>
                            </div>
                            <div>
                                <h3 style="margin:0;">Sensor Location</h3>
                                <p style="margin:0;font-size:0.9rem;color:var(--dark-gray);">Showing latest sensor location on Google Maps</p>
                            </div>
                        </div>
                        <button class="btn btn-primary" id="close-map" style="margin-top: 0;">
                            <i class="fas fa-times"></i> Close
                        </button>
                    </div>

                    <!-- Google Map will render here -->
                    <div id="google-map" style="width:100%;height:420px;border-radius:8px;overflow:hidden;"></div>

                    <!-- Fallback info -->
                    <div id="map-info" style="margin-top:12px;font-size:0.95rem;color:var(--dark-gray);">
                        <strong>Location:</strong> <span id="map-location-text">Bishnupur District, Northeast India</span>
                    </div>
                    <!-- Map error message (hidden by default) -->
                    <div id="map-error" style="display:none;margin-top:12px;font-size:0.95rem;color:var(--danger);background:#fff3f2;padding:10px;border-radius:8px;">Google Maps failed to load. Please check your API key and network.</div>
                    <div style="margin-top:12px;display:flex;gap:8px;justify-content:flex-end;">
                        <button id="open-external-map" class="btn btn-outline" style="padding:0.45rem 0.9rem;font-size:0.9rem;"><i class="fas fa-external-link-alt"></i> Open in Google Maps</button>
                    </div>
                </div>
        </div>

        <!-- Access Denied Modal -->
        <div class="access-modal" id="access-modal">
            <div class="modal-content">
                <div class="modal-icon">
                    <i class="fas fa-lock"></i>
                </div>
                <h3>Access Restricted</h3>
                <p>You don't have permission to access data from other regions. Your access is limited to <strong>Northeast India</strong> only.</p>
                <p>Please contact your administrator if you need access to other regions.</p>
                <button class="btn btn-primary" id="close-modal" style="margin-top: 20px;">
                    <i class="fas fa-times"></i> Close
                </button>
            </div>
        </div>

        <!-- Header -->
        <header>
            <div class="container">
                <div class="header-content">
                    <div class="logo">
                        <div class="logo-icon">
                            <i class="fas fa-heartbeat"></i>
                        </div>
                        <div class="logo-text">
                            <h1>Team Curio</h1>
                            <span>Community Health Monitoring</span>
                            <div class="region-tag" id="region-tag">Region: Northeast India</div>
                        </div>
                    </div>
                    <nav>
                        <ul>
                            <li><a href="#" class="nav-link active" data-section="dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                            <li><a href="#" class="nav-link" data-section="monitoring"><i class="fas fa-map-marked-alt"></i> Monitoring</a></li>
                            <li><a href="#" class="nav-link" data-section="alerts"><i class="fas fa-bell"></i> Alerts</a></li>
                            <li><a href="#" class="nav-link" data-section="analytics"><i class="fas fa-chart-bar"></i> Analytics</a></li>
                            <li><a href="#" class="nav-link" data-section="reports" id="reports-nav" style="display: none;"><i class="fas fa-microchip"></i> Sensor Report</a></li>
                            <li><a href="#" class="nav-link" data-section="disease-report" id="disease-report-nav" style="display: none;"><i class="fas fa-file-medical"></i> Report Disease</a></li>
                        </ul>
                    </nav>
                    <div class="user-actions">
                        <div class="notification-bell" id="notification-bell">
                            <i class="fas fa-bell"></i>
                            <span class="notification-badge" id="notification-badge">3</span>
                        </div>
                        <div class="user-profile" id="user-profile">
                            <div class="user-icon">
                                <i class="fas fa-user"></i>
                            </div>
                            <div class="user-name" id="user-display-name">User</div>
                            <div class="user-menu" id="user-menu">
                                <ul>
                                    <li><a href="#"><i class="fas fa-user-cog"></i> Profile Settings</a></li>
                                    <li><a href="#"><i class="fas fa-cog"></i> Account Settings</a></li>
                                    <li><a href="#" id="language-btn"><i class="fas fa-globe"></i> Language</a></li>
                                    <li><a href="#"><i class="fas fa-question-circle"></i> Help & Support</a></li>
                                    <li><a href="#" id="logout-btn"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <div class="app-container">
            <!-- Sidebar -->
            <aside class="sidebar">
                <div class="sidebar-section">
                    <h3 class="sidebar-title">Monitoring</h3>
                    <ul class="sidebar-menu">
                        <li><a href="#" class="sidebar-link active" data-subsection="dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                        <li><a href="#" class="sidebar-link" data-subsection="location-overview"><i class="fas fa-map-marker-alt"></i> Location Overview</a></li>
                        <li><a href="#" class="sidebar-link" data-subsection="water-quality"><i class="fas fa-vial"></i> Water Quality</a></li>
                        <li><a href="#" class="sidebar-link" data-subsection="health-status"><i class="fas fa-heartbeat"></i> Health Status</a></li>
                    </ul>
                </div>
                
                <div class="sidebar-section">
                    <h3 class="sidebar-title">Analytics</h3>
                    <ul class="sidebar-menu">
                        <li><a href="#" class="sidebar-link" data-subsection="trends"><i class="fas fa-chart-line"></i> Trends</a></li>
                        <li><a href="#" class="sidebar-link" data-subsection="distribution"><i class="fas fa-chart-pie"></i> Distribution</a></li>
                        <li><a href="#" class="sidebar-link" data-subsection="correlations"><i class="fas fa-project-diagram"></i> Correlations</a></li>
                    </ul>
                </div>
                
                <div class="sidebar-section" id="health-worker-section" style="display: none;">
                    <h3 class="sidebar-title">Health Worker</h3>
                    <ul class="sidebar-menu">
                        <li><a href="#" class="sidebar-link" data-subsection="disease-report"><i class="fas fa-file-medical"></i> Disease Reports</a></li>
                        <li><a href="#" class="sidebar-link" data-subsection="outbreak-management"><i class="fas fa-virus"></i> Outbreak Management</a></li>
                        <li><a href="#" class="sidebar-link" data-subsection="response-teams"><i class="fas fa-ambulance"></i> Response Teams</a></li>
                        <li><a href="#" class="sidebar-link" data-subsection="water-reports"><i class="fas fa-microchip"></i> Sensor Report</a></li>
                    </ul>
                </div>
            </aside>

            <!-- Main Content -->
            <main class="main-content">
                <!-- ASHA Worker Dashboard (Hidden by default) -->
                <div id="asha-worker-dashboard" style="display:none;">
                    <div style="padding:2rem;">
                        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;">
                            <h2 style="font-size:1.8rem;font-weight:700;color:var(--dark);">ASHA Worker Dashboard</h2>
                            <button class="btn btn-primary" id="asha-refresh-btn"><i class="fas fa-sync-alt"></i> Refresh</button>
                        </div>

                        <!-- Summary Cards Row -->
                        <div style="display:grid;grid-template-columns:repeat(5,1fr);gap:16px;margin-bottom:2rem;">
                            <div style="background:linear-gradient(135deg,#1a73e8,#0d47a1);color:white;border-radius:12px;padding:18px;box-shadow:var(--shadow);">
                                <div style="font-size:0.9rem;opacity:0.9;margin-bottom:8px;">Today's Visits</div>
                                <div style="font-size:2rem;font-weight:700;margin-bottom:8px;">48</div>
                                <div style="font-size:0.85rem;opacity:0.8;"><i class="fas fa-arrow-up"></i> 12% vs yesterday</div>
                            </div>
                            <div style="background:linear-gradient(135deg,#34a853,#1e8449);color:white;border-radius:12px;padding:18px;box-shadow:var(--shadow);">
                                <div style="font-size:0.9rem;opacity:0.9;margin-bottom:8px;">Pregnant Mothers</div>
                                <div style="font-size:2rem;font-weight:700;margin-bottom:8px;">12</div>
                                <div style="font-size:0.85rem;opacity:0.8;"><i class="fas fa-baby"></i> Under Care</div>
                            </div>
                            <div style="background:linear-gradient(135deg,#f9ab00,#e8971f);color:white;border-radius:12px;padding:18px;box-shadow:var(--shadow);">
                                <div style="font-size:0.9rem;opacity:0.9;margin-bottom:8px;">Pending Tasks</div>
                                <div style="font-size:2rem;font-weight:700;margin-bottom:8px;">9</div>
                                <div style="font-size:0.85rem;opacity:0.8;"><i class="fas fa-tasks"></i> Urgent: 3</div>
                            </div>
                            <div style="background:linear-gradient(135deg,#ea4335,#d33b27);color:white;border-radius:12px;padding:18px;box-shadow:var(--shadow);">
                                <div style="font-size:0.9rem;opacity:0.9;margin-bottom:8px;">Health Alerts</div>
                                <div style="font-size:2rem;font-weight:700;margin-bottom:8px;">5</div>
                                <div style="font-size:0.85rem;opacity:0.8;"><i class="fas fa-bell"></i> Critical: 2</div>
                            </div>
                            <div style="background:linear-gradient(135deg,#9c27b0,#7b1fa2);color:white;border-radius:12px;padding:18px;box-shadow:var(--shadow);">
                                <div style="font-size:0.9rem;opacity:0.9;margin-bottom:8px;">Immunizations</div>
                                <div style="font-size:2rem;font-weight:700;margin-bottom:8px;">36</div>
                                <div style="font-size:0.85rem;opacity:0.8;"><i class="fas fa-syringe"></i> Pending</div>
                            </div>
                        </div>

                        <!-- Main ASHA Content Grid -->
                        <div style="display:grid;grid-template-columns:1.2fr 1fr;gap:24px;margin-bottom:2rem;">
                            <!-- Left Column: Villagers + Diseases -->
                            <div>
                                <!-- Affected Villagers Table -->
                                <div style="background:var(--white);border-radius:12px;padding:18px;box-shadow:var(--shadow);margin-bottom:24px;">
                                    <h3 style="margin-bottom:12px;font-weight:700;font-size:1.2rem;">Affected Villagers</h3>
                                    <div style="overflow:auto;max-height:400px;">
                                        <table style="width:100%;border-collapse:collapse;font-size:0.95rem;">
                                            <thead>
                                                <tr style="text-align:left;border-bottom:2px solid var(--primary);background:var(--light-gray);">
                                                    <th style="padding:10px;font-weight:600;">Name</th>
                                                    <th style="padding:10px;font-weight:600;">Age</th>
                                                    <th style="padding:10px;font-weight:600;">Household</th>
                                                    <th style="padding:10px;font-weight:600;">Status</th>
                                                    <th style="padding:10px;font-weight:600;">Contact</th>
                                                    <th style="padding:10px;font-weight:600;">Action</th>
                                                </tr>
                                            </thead>
                                            <tbody id="asha-villagers-table">
                                                <!-- Populated by JS -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <!-- Diseases Chart -->
                                <div style="background:var(--white);border-radius:12px;padding:18px;box-shadow:var(--shadow);">
                                    <h3 style="margin-bottom:12px;font-weight:700;font-size:1.2rem;">Disease Distribution</h3>
                                    <div style="height:280px;">
                                        <canvas id="asha-disease-chart"></canvas>
                                    </div>
                                </div>
                            </div>

                            <!-- Right Column: Water Quality + Chat -->
                            <div style="display:flex;flex-direction:column;gap:24px;">
                                <!-- Water Quality Charts -->
                                <div style="background:var(--white);border-radius:12px;padding:18px;box-shadow:var(--shadow);">
                                    <h3 style="margin-bottom:12px;font-weight:700;font-size:1.2rem;">Water Bodies  Quality Parameters</h3>
                                    <div style="margin-bottom:12px;">
                                        <select id="asha-water-source" style="padding:8px;border-radius:8px;border:1px solid var(--medium-gray);width:100%;">
                                            <option value="well-1">Community Well  Mandawa</option>
                                            <option value="pond-1">Borewell  Bijaipur</option>
                                            <option value="tube-1">Spring Source  Ranakpur</option>
                                            <option value="well-2">Tank Storage  Bhamatsar</option>
                                            <option value="pump-1">Hand Pump  Amarpura</option>
                                            <option value="well-3">Tube Well  Bishanpur</option>
                                        </select>
                                    </div>
                                    <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:12px;">
                                        <div style="background:var(--light-gray);padding:10px;border-radius:8px;text-align:center;">
                                            <div style="font-size:0.8rem;color:var(--dark-gray);">E.coli (CFU/100ml)</div>
                                            <div id="asha-metric-ecoli" style="font-weight:700;font-size:1.4rem;color:var(--danger);">120</div>
                                        </div>
                                        <div style="background:var(--light-gray);padding:10px;border-radius:8px;text-align:center;">
                                            <div style="font-size:0.8rem;color:var(--dark-gray);">pH</div>
                                            <div id="asha-metric-ph" style="font-weight:700;font-size:1.4rem;color:var(--primary);">6.8</div>
                                        </div>
                                        <div style="background:var(--light-gray);padding:10px;border-radius:8px;text-align:center;">
                                            <div style="font-size:0.8rem;color:var(--dark-gray);">Turbidity (NTU)</div>
                                            <div id="asha-metric-turbidity" style="font-weight:700;font-size:1.4rem;color:var(--warning);">8.2</div>
                                        </div>
                                        <div style="background:var(--light-gray);padding:10px;border-radius:8px;text-align:center;">
                                            <div style="font-size:0.8rem;color:var(--dark-gray);">Bacteria (g/L)</div>
                                            <div id="asha-metric-bacteria" style="font-weight:700;font-size:1.4rem;color:var(--critical);">45</div>
                                        </div>
                                    </div>
                                    <div style="height:250px;">
                                        <canvas id="asha-water-quality-chart"></canvas>
                                    </div>
                                </div>

                                <!-- Chat Widget -->
                                <div id="asha-chat-panel" style="background:var(--white);border-radius:12px;box-shadow:var(--shadow);overflow:hidden;display:flex;flex-direction:column;height:280px;">
                                    <div style="padding:12px;border-bottom:1px solid var(--medium-gray);background:var(--primary);color:white;display:flex;align-items:center;gap:8px;justify-content:space-between;">
                                        <div style="display:flex;align-items:center;gap:8px;flex:1;">
                                            <div style="width:36px;height:36px;border-radius:50%;background:rgba(255,255,255,0.3);display:flex;align-items:center;justify-content:center;font-weight:700;font-size:1.1rem;"></div>
                                            <div>
                                                <div id="asha-chat-name" style="font-weight:700;">Select Villager</div>
                                                <div style="font-size:0.8rem;opacity:0.9;">Message & Contact</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div id="asha-chat-messages" style="flex:1;padding:12px;overflow-y:auto;background:linear-gradient(180deg,#fafafa,#fff);"></div>
                                    <div style="padding:10px;border-top:1px solid var(--medium-gray);display:flex;gap:8px;">
                                        <input id="asha-chat-input" type="text" placeholder="Type message..." style="flex:1;padding:10px;border-radius:8px;border:1px solid var(--medium-gray);font-size:0.95rem;">
                                        <button id="asha-chat-send" class="btn btn-primary" style="padding:8px 12px;font-size:0.9rem;">Send</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Bottom Row: Immunization Tracking, Recent Activities, Health Alerts -->
                    <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:24px;margin-top:2rem;">
                        <!-- Immunization Tracking -->
                        <div style="background:var(--white);border-radius:12px;padding:18px;box-shadow:var(--shadow);">
                            <h3 style="margin-bottom:12px;font-weight:700;font-size:1.1rem;">Immunization Tracking</h3>
                            <div style="margin-bottom:12px;">
                                <div style="display:flex;justify-content:space-between;margin-bottom:6px;">
                                    <span style="font-size:0.9rem;">BCG Coverage</span>
                                    <span style="font-weight:600;color:var(--safe);">92%</span>
                                </div>
                                <div style="background:var(--light-gray);border-radius:4px;height:8px;overflow:hidden;">
                                    <div style="background:var(--safe);height:100%;width:92%;transition:width 0.3s;"></div>
                                </div>
                            </div>
                            <div style="margin-bottom:12px;">
                                <div style="display:flex;justify-content:space-between;margin-bottom:6px;">
                                    <span style="font-size:0.9rem;">Polio Coverage</span>
                                    <span style="font-weight:600;color:var(--safe);">88%</span>
                                </div>
                                <div style="background:var(--light-gray);border-radius:4px;height:8px;overflow:hidden;">
                                    <div style="background:var(--safe);height:100%;width:88%;transition:width 0.3s;"></div>
                                </div>
                            </div>
                            <div style="margin-bottom:12px;">
                                <div style="display:flex;justify-content:space-between;margin-bottom:6px;">
                                    <span style="font-size:0.9rem;">DPT Coverage</span>
                                    <span style="font-weight:600;color:var(--warning);">75%</span>
                                </div>
                                <div style="background:var(--light-gray);border-radius:4px;height:8px;overflow:hidden;">
                                    <div style="background:var(--warning);height:100%;width:75%;transition:width 0.3s;"></div>
                                </div>
                            </div>
                            <div>
                                <div style="display:flex;justify-content:space-between;margin-bottom:6px;">
                                    <span style="font-size:0.9rem;">MMR Coverage</span>
                                    <span style="font-weight:600;color:var(--warning);">70%</span>
                                </div>
                                <div style="background:var(--light-gray);border-radius:4px;height:8px;overflow:hidden;">
                                    <div style="background:var(--warning);height:100%;width:70%;transition:width 0.3s;"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Recent Activities -->
                        <div style="background:var(--white);border-radius:12px;padding:18px;box-shadow:var(--shadow);">
                            <h3 style="margin-bottom:12px;font-weight:700;font-size:1.1rem;">Recent Activities</h3>
                            <div id="asha-activities" style="max-height:250px;overflow-y:auto;font-size:0.9rem;">
                                <div style="padding:8px;border-bottom:1px solid var(--light-gray);"><i class="fas fa-check" style="color:var(--safe);"></i> <strong>Visited</strong> Ramesh T. - 2 hours ago</div>
                                <div style="padding:8px;border-bottom:1px solid var(--light-gray);"><i class="fas fa-baby" style="color:var(--primary);"></i> <strong>Registered</strong> Pregnant mother - 4 hours ago</div>
                                <div style="padding:8px;border-bottom:1px solid var(--light-gray);"><i class="fas fa-syringe" style="color:var(--warning);"></i> <strong>Immunized</strong> Child - 5 hours ago</div>
                                <div style="padding:8px;border-bottom:1px solid var(--light-gray);"><i class="fas fa-phone" style="color:var(--primary);"></i> <strong>Called</strong> Sita K. - 6 hours ago</div>
                                <div style="padding:8px;"><i class="fas fa-file-alt" style="color:var(--warning);"></i> <strong>Filed Report</strong> - Disease Alert - 8 hours ago</div>
                            </div>
                        </div>

                        <!-- Health Alerts -->
                        <div style="background:var(--white);border-radius:12px;padding:18px;box-shadow:var(--shadow);">
                            <h3 style="margin-bottom:12px;font-weight:700;font-size:1.1rem;">Health Alerts</h3>
                            <div id="asha-alerts" style="max-height:250px;overflow-y:auto;font-size:0.9rem;">
                                <div style="padding:10px;margin-bottom:8px;background:#ffebee;border-left:4px solid var(--danger);border-radius:4px;"><strong style="color:var(--danger);">Critical:</strong> Waterborne disease outbreak suspected</div>
                                <div style="padding:10px;margin-bottom:8px;background:#fff3e0;border-left:4px solid var(--warning);border-radius:4px;"><strong style="color:var(--warning);">Warning:</strong> Low immunization coverage in H-15</div>
                                <div style="padding:10px;margin-bottom:8px;background:#fff3e0;border-left:4px solid var(--warning);border-radius:4px;"><strong style="color:var(--warning);">Alert:</strong> pH levels abnormal in pond water</div>
                                <div style="padding:10px;margin-bottom:8px;background:#e8f5e9;border-left:4px solid var(--safe);border-radius:4px;"><strong style="color:var(--safe);">Info:</strong> Vaccination camp scheduled for next week</div>
                                <div style="padding:10px;background:#e3f2fd;border-left:4px solid var(--primary);border-radius:4px;"><strong style="color:var(--primary);">Notice:</strong> Supply delivery arriving tomorrow</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ASHA Sidebar Content Sections (Hidden by default) -->
                <div id="asha-location-overview" style="display:none;">
                    <div style="padding:2rem;background:var(--white);border-radius:12px;box-shadow:var(--shadow);">
                        <h2 style="margin-bottom:1rem;font-size:1.5rem;font-weight:700;">Location Overview</h2>
                        <div style="display:grid;grid-template-columns:1fr 1fr;gap:20px;">
                            <div style="background:var(--light-gray);padding:20px;border-radius:8px;">
                                <h4 style="margin-bottom:10px;">Village Statistics</h4>
                                <p><strong>Total Households:</strong> 156</p>
                                <p><strong>Total Population:</strong> 892</p>
                                <p><strong>Families Covered:</strong> 142 (91%)</p>
                                <p><strong>Last Updated:</strong> Today, 2:30 PM</p>
                            </div>
                            <div style="background:var(--light-gray);padding:20px;border-radius:8px;">
                                <h4 style="margin-bottom:10px;">Risk Assessment</h4>
                                <p><strong>High Risk Areas:</strong> 3</p>
                                <p><strong>Medium Risk:</strong> 8</p>
                                <p><strong>Low Risk:</strong> 12</p>
                                <p><strong>Safe Status:</strong> 133</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="asha-water-quality" style="display:none;">
                    <div style="padding:2rem;background:var(--white);border-radius:12px;box-shadow:var(--shadow);">
                        <h2 style="margin-bottom:1rem;font-size:1.5rem;font-weight:700;">Water Quality Detailed Report</h2>
                        <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-bottom:20px;">
                            <div style="background:#c8e6c9;padding:15px;border-radius:8px;border-left:4px solid var(--safe);">
                                <div style="font-size:0.9rem;color:var(--safe);font-weight:600;">Community Well - Mandawa</div>
                                <div style="font-size:1.8rem;font-weight:700;margin:8px 0;color:var(--safe);">65 CFU</div>
                                <div style="font-size:0.85rem;color:var(--dark-gray);">E.coli Level - Safe</div>
                            </div>
                            <div style="background:#fff3cd;padding:15px;border-radius:8px;border-left:4px solid var(--warning);">
                                <div style="font-size:0.9rem;color:var(--warning);font-weight:600;">Borewell - Bijaipur</div>
                                <div style="font-size:1.8rem;font-weight:700;margin:8px 0;color:var(--warning);">120 CFU</div>
                                <div style="font-size:0.85rem;color:var(--dark-gray);">E.coli Level - Caution</div>
                            </div>
                            <div style="background:#c8e6c9;padding:15px;border-radius:8px;border-left:4px solid var(--safe);">
                                <div style="font-size:0.9rem;color:var(--safe);font-weight:600;">Spring Source - Ranakpur</div>
                                <div style="font-size:1.8rem;font-weight:700;margin:8px 0;color:var(--safe);">15 CFU</div>
                                <div style="font-size:0.85rem;color:var(--dark-gray);">E.coli Level - Safe</div>
                            </div>
                            <div style="background:#e3f2fd;padding:15px;border-radius:8px;border-left:4px solid var(--primary);">
                                <div style="font-size:0.9rem;color:var(--primary);font-weight:600;">Overall Status</div>
                                <div style="font-size:1.8rem;font-weight:700;margin:8px 0;color:var(--primary);">4/6 Safe</div>
                                <div style="font-size:0.85rem;color:var(--dark-gray);">Action Required</div>
                            </div>
                        </div>
                        <div style="background:var(--light-gray);padding:15px;border-radius:8px;">
                            <h4 style="margin-bottom:10px;">Recommendations:</h4>
                            <ul style="margin-left:20px;">
                                <li>Increase water testing frequency for Well and Pond</li>
                                <li>Initiate water treatment protocol for contaminated sources</li>
                                <li>Issue public health advisory about water usage</li>
                                <li>Schedule community awareness session on water safety</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div id="asha-health-status" style="display:none;">
                    <div style="padding:2rem;background:var(--white);border-radius:12px;box-shadow:var(--shadow);">
                        <h2 style="margin-bottom:1rem;font-size:1.5rem;font-weight:700;">Community Health Status</h2>
                        <div style="display:grid;grid-template-columns:1fr 1fr;gap:20px;">
                            <div>
                                <h4 style="margin-bottom:12px;font-weight:600;">Population Health Indicators</h4>
                                <div style="margin-bottom:10px;">
                                    <div style="display:flex;justify-content:space-between;margin-bottom:6px;">
                                        <span>Malnutrition Rate</span>
                                        <strong>12%</strong>
                                    </div>
                                    <div style="background:var(--light-gray);border-radius:4px;height:8px;">
                                        <div style="background:var(--warning);height:100%;width:12%;border-radius:4px;"></div>
                                    </div>
                                </div>
                                <div style="margin-bottom:10px;">
                                    <div style="display:flex;justify-content:space-between;margin-bottom:6px;">
                                        <span>Maternal Health Coverage</span>
                                        <strong>95%</strong>
                                    </div>
                                    <div style="background:var(--light-gray);border-radius:4px;height:8px;">
                                        <div style="background:var(--safe);height:100%;width:95%;border-radius:4px;"></div>
                                    </div>
                                </div>
                                <div style="margin-bottom:10px;">
                                    <div style="display:flex;justify-content:space-between;margin-bottom:6px;">
                                        <span>Child Vaccination Rate</span>
                                        <strong>88%</strong>
                                    </div>
                                    <div style="background:var(--light-gray);border-radius:4px;height:8px;">
                                        <div style="background:var(--safe);height:100%;width:88%;border-radius:4px;"></div>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <h4 style="margin-bottom:12px;font-weight:600;">Disease Incidence (Last 30 Days)</h4>
                                <div style="background:var(--light-gray);padding:12px;border-radius:8px;margin-bottom:8px;">
                                    <div style="display:flex;justify-content:space-between;"><span>Diarrhea</span> <strong>45</strong></div>
                                </div>
                                <div style="background:var(--light-gray);padding:12px;border-radius:8px;margin-bottom:8px;">
                                    <div style="display:flex;justify-content:space-between;"><span>Fever</span> <strong>32</strong></div>
                                </div>
                                <div style="background:var(--light-gray);padding:12px;border-radius:8px;margin-bottom:8px;">
                                    <div style="display:flex;justify-content:space-between;"><span>Respiratory Issues</span> <strong>18</strong></div>
                                </div>
                                <div style="background:var(--light-gray);padding:12px;border-radius:8px;">
                                    <div style="display:flex;justify-content:space-between;"><span>Skin Issues</span> <strong>12</strong></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="asha-trends" style="display:none;">
                    <div style="padding:2rem;background:var(--white);border-radius:12px;box-shadow:var(--shadow);">
                        <h2 style="margin-bottom:1rem;font-size:1.5rem;font-weight:700;">Health Trends Analysis</h2>
                        <div style="height:300px;margin-bottom:20px;">
                            <canvas id="asha-trends-chart"></canvas>
                        </div>
                        <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:16px;">
                            <div style="background:var(--light-gray);padding:15px;border-radius:8px;text-align:center;">
                                <div style="font-size:0.9rem;color:var(--dark-gray);">30-Day Trend</div>
                                <div style="font-size:2rem;font-weight:700;color:var(--warning);"> 15%</div>
                                <div style="font-size:0.85rem;">Slight increase in cases</div>
                            </div>
                            <div style="background:var(--light-gray);padding:15px;border-radius:8px;text-align:center;">
                                <div style="font-size:0.9rem;color:var(--dark-gray);">Weekly Average</div>
                                <div style="font-size:2rem;font-weight:700;color:var(--primary);">42</div>
                                <div style="font-size:0.85rem;">Cases per week</div>
                            </div>
                            <div style="background:var(--light-gray);padding:15px;border-radius:8px;text-align:center;">
                                <div style="font-size:0.9rem;color:var(--dark-gray);">Forecast</div>
                                <div style="font-size:2rem;font-weight:700;color:var(--safe);">Stable</div>
                                <div style="font-size:0.85rem;">Expected next week</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="asha-distribution" style="display:none;">
                    <div style="padding:2rem;background:var(--white);border-radius:12px;box-shadow:var(--shadow);">
                        <h2 style="margin-bottom:1rem;font-size:1.5rem;font-weight:700;">Disease Distribution Analysis</h2>
                        <div style="height:300px;">
                            <canvas id="asha-distribution-chart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Dashboard Section (Default) -->
                <div class="content-section active" id="dashboard-section">
                    <div class="content-header">
                        <h2>Community Health Monitoring Dashboard</h2>
                        <div class="header-actions">
                            <button class="btn btn-outline" id="export-btn"><i class="fas fa-download"></i> Export Report</button>
                            <button class="btn btn-primary" id="refresh-btn"><i class="fas fa-sync-alt"></i> Refresh Data</button>
                        </div>
                    </div>

                    <!-- Danger Level Alert Banner -->
                    <div id="danger-alerts-banner" style="display: none; background: linear-gradient(135deg, #ea4335, #c5221f); color: white; padding: 1.5rem; border-radius: 12px; margin-bottom: 1.5rem; box-shadow: 0 4px 12px rgba(234, 67, 53, 0.3);">
                        <div style="display: flex; align-items: flex-start; gap: 1rem;">
                            <div style="font-size: 1.8rem; flex-shrink: 0;">
                                <i class="fas fa-exclamation-circle"></i>
                            </div>
                            <div style="flex: 1;">
                                <h3 style="margin: 0 0 0.5rem 0; font-weight: 700; font-size: 1.1rem;"> ALERT: Dangerous Water Quality Detected!</h3>
                                <p style="margin: 0 0 0.75rem 0; opacity: 0.95;">One or more water sensors have detected dangerous contamination levels. Avoid using water from affected sources.</p>
                                <div id="danger-locations" style="background: rgba(255, 255, 255, 0.15); padding: 0.75rem; border-radius: 8px; margin-bottom: 0.75rem;"></div>
                                <button id="view-sensor-details-btn" style="background: white; color: #ea4335; border: none; padding: 0.5rem 1rem; border-radius: 6px; font-weight: 600; cursor: pointer; transition: all 0.3s;"><i class="fas fa-arrow-right"></i> View Sensor Details</button>
                            </div>
                            <button id="close-alert-btn" style="background: none; border: none; color: white; font-size: 1.5rem; cursor: pointer; flex-shrink: 0;"><i class="fas fa-times"></i></button>
                        </div>
                    </div>

                    <!-- Dashboard Stats -->
                    <div class="dashboard-grid">
                        <div class="dashboard-card">
                            <div class="card-header">
                                <div class="card-title">Community Health Index</div>
                                <div class="card-icon safe">
                                    <i class="fas fa-heartbeat"></i>
                                </div>
                            </div>
                            <div class="card-value safe" id="health-index">86.4</div>
                            <div class="card-footer">
                                <span>Overall Health Score</span>
                                <div class="trend up">
                                    <i class="fas fa-arrow-up"></i>
                                    <span>2.3%</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="dashboard-card">
                            <div class="card-header">
                                <div class="card-title">Active Health Alerts</div>
                                <div class="card-icon danger">
                                    <i class="fas fa-exclamation-triangle"></i>
                                </div>
                            </div>
                            <div class="card-value danger" id="active-alerts-count">8</div>
                            <div class="card-footer">
                                <span>Requiring Attention</span>
                                <div class="trend down">
                                    <i class="fas fa-arrow-down"></i>
                                    <span>5.1%</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="dashboard-card">
                            <div class="card-header">
                                <div class="card-title">Disease Cases</div>
                                <div class="card-icon warning">
                                    <i class="fas fa-procedures"></i>
                                </div>
                            </div>
                            <div class="card-value warning" id="disease-cases">124</div>
                            <div class="card-footer">
                                <span>Reported This Month</span>
                                <div class="trend up">
                                    <i class="fas fa-arrow-up"></i>
                                    <span>3.7%</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Charts Section -->
                    <div class="charts-section">
                        <div class="chart-container">
                            <div class="chart-header">
                                <div class="chart-title">Health Trends</div>
                                <div class="chart-actions">
                                    <select id="time-period">
                                        <option value="30">Last 30 Days</option>
                                        <option value="90">Last 90 Days</option>
                                        <option value="365">Last Year</option>
                                    </select>
                                </div>
                            </div>
                            <div class="chart-wrapper">
                                <canvas id="healthChart"></canvas>
                            </div>
                        </div>
                        
                        <div class="chart-container">
                            <div class="chart-header">
                                <div class="chart-title">Disease Distribution</div>
                                <div class="chart-actions">
                                    <button class="btn btn-outline" style="padding: 5px 10px; font-size: 0.8rem;">
                                        <i class="fas fa-filter"></i> Filter
                                    </button>
                                </div>
                            </div>
                            <div class="chart-wrapper">
                                <canvas id="diseaseChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Alert System -->
                    <div class="alert-system" id="alert-system">
                        <div class="alert-header">
                            <div class="alert-title">Health Alert System</div>
                            <div class="alert-filters">
                                <select id="alert-filter">
                                    <option value="all">All Alerts</option>
                                    <option value="critical">Critical Only</option>
                                    <option value="resolved">Resolved</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="alert-steps">
                            <div class="step completed">
                                <div class="step-icon">
                                    <i class="fas fa-search"></i>
                                </div>
                                <div class="step-text">Detection</div>
                            </div>
                            <div class="step completed">
                                <div class="step-icon">
                                    <i class="fas fa-analytics"></i>
                                </div>
                                <div class="step-text">Analysis</div>
                            </div>
                            <div class="step active">
                                <div class="step-icon">
                                    <i class="fas fa-bullhorn"></i>
                                </div>
                                <div class="step-text">Notification</div>
                            </div>
                            <div class="step">
                                <div class="step-icon">
                                    <i class="fas fa-check-double"></i>
                                </div>
                                <div class="step-text">Resolution</div>
                            </div>
                        </div>
                        
                        <div class="alert-details" id="current-alert">
                            <div class="alert-info">
                                <div class="info-item">
                                    <h4>Alert ID</h4>
                                    <p id="alert-id-display">HTH-ALERT-7281</p>
                                </div>
                                <div class="info-item">
                                    <h4>Severity</h4>
                                    <p style="color: var(--danger);">High</p>
                                </div>
                                <div class="info-item">
                                    <h4>Location</h4>
                                    <p>Bishnupur District</p>
                                </div>
                                <div class="info-item">
                                    <h4>Detected</h4>
                                    <p>2 hours ago</p>
                                </div>
                            </div>
                            
                            <div class="alert-description">
                                <h4>Description</h4>
                                <p>Increased cases of waterborne diseases reported in the area. Correlation analysis shows potential outbreak. 8 hospital admissions reported with similar symptoms including fever and dehydration.</p>
                            </div>
                            
                            <div class="alert-actions" style="margin-top: 1.5rem;">
                                <button class="btn btn-primary" id="notify-btn"><i class="fas fa-bullhorn"></i> Notify Authorities</button>
                                <button class="btn btn-outline" id="view-analytics-btn"><i class="fas fa-chart-line"></i> View Analytics</button>
                                <button class="btn btn-outline" id="show-map-btn"><i class="fas fa-map-marker-alt"></i> Show on Map</button>
                                <button class="btn btn-danger" id="dismiss-btn"><i class="fas fa-times"></i> Dismiss Alert</button>
                            </div>

                            <!-- Notification Options -->
                            <div class="notification-options" id="notification-options">
                                <h4>Select Notification Method:</h4>
                                <div class="notification-methods">
                                    <div class="notification-method" data-method="email">
                                        <i class="fas fa-envelope"></i>
                                        <h5>By Email</h5>
                                        <p>Send detailed alert to authorities via email</p>
                                    </div>
                                    <div class="notification-method" data-method="call">
                                        <i class="fas fa-phone"></i>
                                        <h5>By Call</h5>
                                        <p>Immediate phone notification to key personnel</p>
                                    </div>
                                    <div class="notification-method" data-method="emergency">
                                        <i class="fas fa-exclamation-triangle"></i>
                                        <h5>Emergency Alert</h5>
                                        <p>Activate emergency response protocol</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Disease Report Section (Health Workers Only) -->
                <div class="content-section" id="disease-report-section">
                    <div class="section-header">
                        <h2 class="section-title">Disease & Contamination Report</h2>
                    </div>
                    <div class="section-content">
                        <p>Report new disease cases, water contamination incidents, or other health concerns in your community.</p>
                        
                        <div class="report-form">
                            <form id="disease-report-form">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="report-type">Report Type</label>
                                        <select id="report-type" class="form-control" required>
                                            <option value="">Select Report Type</option>
                                            <option value="disease-outbreak">Disease Outbreak</option>
                                            <option value="water-contamination">Water Contamination</option>
                                            <option value="vector-borne">Vector-Borne Disease</option>
                                            <option value="other">Other Health Concern</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="location">Location</label>
                                        <input type="text" id="location" class="form-control" placeholder="Enter location" required>
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="disease-type">Disease Type (if applicable)</label>
                                        <select id="disease-type" class="form-control">
                                            <option value="">Select Disease</option>
                                            <option value="cholera">Cholera</option>
                                            <option value="typhoid">Typhoid</option>
                                            <option value="hepatitis">Hepatitis A</option>
                                            <option value="dysentery">Dysentery</option>
                                            <option value="malaria">Malaria</option>
                                            <option value="dengue">Dengue</option>
                                            <option value="other">Other</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="cases-reported">Cases Reported</label>
                                        <input type="number" id="cases-reported" class="form-control" placeholder="Number of cases" min="1">
                                    </div>
                                </div>
                                
                                <div class="form-group form-full">
                                    <label for="symptoms">Symptoms Observed</label>
                                    <input type="text" id="symptoms" class="form-control" placeholder="Fever, diarrhea, vomiting, etc.">
                                </div>
                                
                                <div class="form-group form-full">
                                    <label for="description">Detailed Description</label>
                                    <textarea id="description" class="form-control" placeholder="Provide detailed information about the situation..." required></textarea>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="urgency">Urgency Level</label>
                                        <select id="urgency" class="form-control" required>
                                            <option value="low">Low</option>
                                            <option value="medium">Medium</option>
                                            <option value="high">High</option>
                                            <option value="critical">Critical</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="contact">Your Contact</label>
                                        <input type="text" id="contact" class="form-control" placeholder="Phone number or email">
                                    </div>
                                </div>
                                
                                <div class="alert-actions" style="margin-top: 1.5rem;">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-paper-plane"></i> Submit Report
                                    </button>
                                    <button type="reset" class="btn btn-outline">
                                        <i class="fas fa-redo"></i> Reset Form
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Sensor Report Section (ASHA Workers & Villagers) -->
                <div class="content-section" id="reports-section">
                    <div class="section-header">
                        <h2 class="section-title"><i class="fas fa-microchip"></i> Sensor Report - Real-time Monitoring</h2>
                    </div>
                    <div class="section-content">
                        <p>Real-time monitoring of water quality sensors across Northeast India. Track pH levels, E.coli contamination, turbidity, and bacterial presence from all deployment locations.</p>
                        
                        <!-- Summary Stats Cards -->
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
                            <div style="background: linear-gradient(135deg, #34a853, #1e8449); color: white; border-radius: 12px; padding: 1.5rem; box-shadow: var(--shadow);">
                                <div style="font-size: 0.9rem; opacity: 0.9; margin-bottom: 0.5rem;">Active Sensors</div>
                                <div style="font-size: 2.5rem; font-weight: 700;">6</div>
                                <div style="font-size: 0.8rem; opacity: 0.85; margin-top: 0.5rem;"><i class="fas fa-check-circle"></i> All Online</div>
                            </div>
                            <div style="background: linear-gradient(135deg, #1a73e8, #0d47a1); color: white; border-radius: 12px; padding: 1.5rem; box-shadow: var(--shadow);">
                                <div style="font-size: 0.9rem; opacity: 0.9; margin-bottom: 0.5rem;">Water Sources</div>
                                <div style="font-size: 2.5rem; font-weight: 700;">6</div>
                                <div style="font-size: 0.8rem; opacity: 0.85; margin-top: 0.5rem;"><i class="fas fa-tint"></i> Monitored</div>
                            </div>
                            <div style="background: linear-gradient(135deg, #f9ab00, #e8971f); color: white; border-radius: 12px; padding: 1.5rem; box-shadow: var(--shadow);">
                                <div style="font-size: 0.9rem; opacity: 0.9; margin-bottom: 0.5rem;">Caution Alerts</div>
                                <div style="font-size: 2.5rem; font-weight: 700;">3</div>
                                <div style="font-size: 0.8rem; opacity: 0.85; margin-top: 0.5rem;"><i class="fas fa-exclamation-triangle"></i> Threshold Exceeded</div>
                            </div>
                            <div style="background: linear-gradient(135deg, #ea4335, #d33b27); color: white; border-radius: 12px; padding: 1.5rem; box-shadow: var(--shadow);">
                                <div style="font-size: 0.9rem; opacity: 0.9; margin-bottom: 0.5rem;">High Contamination</div>
                                <div style="font-size: 2.5rem; font-weight: 700;">1</div>
                                <div style="font-size: 0.8rem; opacity: 0.85; margin-top: 0.5rem;"><i class="fas fa-times-circle"></i> Needs Attention</div>
                            </div>
                        </div>

                        <!-- Reports Controls -->
                        <div style="display: flex; gap: 1rem; margin-bottom: 2rem; flex-wrap: wrap; align-items: flex-end;">
                            <div>
                                <label for="reports-sensor-filter" style="display: block; font-weight: 600; margin-bottom: 0.5rem;">Filter by Sensor Location:</label>
                                <select id="reports-sensor-filter" class="form-control" style="min-width: 200px;">
                                    <option value="all">All Sensors</option>
                                    <option value="well-1">Community Well - Mandawa</option>
                                    <option value="well-2">Borewell - Bijaipur</option>
                                    <option value="well-3">Spring Source - Ranakpur</option>
                                    <option value="well-4">Tank Storage - Bhamatsar</option>
                                    <option value="hand-pump-1">Hand Pump - Amarpura</option>
                                    <option value="well-5">Tube Well - Bishanpur</option>
                                </select>
                            </div>
                            <div>
                                <label for="reports-time-range" style="display: block; font-weight: 600; margin-bottom: 0.5rem;">Time Range:</label>
                                <select id="reports-time-range" class="form-control" style="min-width: 200px;">
                                    <option value="24h">Last 24 Hours</option>
                                    <option value="7d">Last 7 Days</option>
                                    <option value="30d">Last 30 Days</option>
                                </select>
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <button type="button" class="btn btn-primary" id="reports-export-btn" style="display: inline-flex;"><i class="fas fa-download"></i> Export Report</button>
                                <button type="button" class="btn btn-outline" id="reports-refresh-btn" style="display: inline-flex;"><i class="fas fa-sync-alt"></i> Refresh</button>
                            </div>
                        </div>

                        <!-- Sensor Deployment Map -->
                        <div style="background: white; border-radius: 12px; box-shadow: var(--shadow); overflow: hidden; margin-bottom: 2rem;">
                            <div style="padding: 1.5rem; border-bottom: 1px solid var(--medium-gray); display: flex; justify-content: space-between; align-items: center;">
                                <h3 style="margin: 0; font-weight: 700; font-size: 1.1rem; color: var(--dark);"><i class="fas fa-map-marker-alt" style="color: var(--primary);"></i> Sensor Deployment Map</h3>
                                <span style="background: #e8f5e9; color: #2e7d32; padding: 0.5rem 1rem; border-radius: 20px; font-weight: 600; font-size: 0.85rem;">6/6 Active</span>
                            </div>
                            <div style="overflow-x: auto;">
                                <table style="width: 100%; border-collapse: collapse; font-size: 0.95rem;">
                                    <thead style="background: var(--light-gray); border-bottom: 2px solid var(--primary);">
                                        <tr>
                                            <th style="padding: 1rem; text-align: left; font-weight: 600;">Sensor ID</th>
                                            <th style="padding: 1rem; text-align: left; font-weight: 600;">Location</th>
                                            <th style="padding: 1rem; text-align: left; font-weight: 600;">Water Source</th>
                                            <th style="padding: 1rem; text-align: center; font-weight: 600;">GPS Coordinates</th>
                                            <th style="padding: 1rem; text-align: center; font-weight: 600;">Status</th>
                                            <th style="padding: 1rem; text-align: center; font-weight: 600;">Last Reading</th>
                                            <th style="padding: 1rem; text-align: center; font-weight: 600;">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody id="sensor-deployment-table">
                                        <tr style="border-bottom: 1px solid var(--medium-gray);">
                                            <td style="padding: 1rem; font-weight:600;color:var(--primary);">SNS-001</td>
                                            <td style="padding: 1rem;">Community Well - Mandawa</td>
                                            <td style="padding: 1rem;">Well - Primary</td>
                                            <td style="padding: 1rem; text-align: center; font-family:monospace;font-size:0.85rem;">24.66 N, 93.77 E</td>
                                            <td style="padding: 1rem; text-align: center;"><span style="background: #c8e6c9; color: #1b5e20; padding: 0.25rem 0.75rem; border-radius: 20px; font-weight: 600;"> Safe</span></td>
                                            <td style="padding: 1rem; text-align: center; color: var(--dark-gray); font-size: 0.9rem;">2 min ago</td>
                                            <td style="padding: 1rem; text-align: center;">
                                                <button class="btn btn-outline view-sensor-btn" data-sensor-id="SNS-001" style="padding: 0.5rem 1rem; font-size: 0.85rem;"><i class="fas fa-eye"></i> View</button>
                                                <button class="btn btn-primary view-map-btn" data-sensor-id="SNS-001" style="margin-left:8px;padding:0.45rem 0.9rem;font-size:0.85rem;"><i class="fas fa-external-link-alt"></i> Map</button>
                                            </td>
                                        </tr>
                                        <tr style="border-bottom: 1px solid var(--medium-gray);">
                                            <td style="padding: 1rem; font-weight:600;color:var(--primary);">SNS-002</td>
                                            <td style="padding: 1rem;">Borewell - Bijaipur</td>
                                            <td style="padding: 1rem;">Pond - North</td>
                                            <td style="padding: 1rem; text-align: center; font-family:monospace;font-size:0.85rem;">24.81 N, 93.93 E</td>
                                            <td style="padding: 1rem; text-align: center;"><span style="background: #fff3cd; color: #ff6f00; padding: 0.25rem 0.75rem; border-radius: 20px; font-weight: 600;"> Caution</span></td>
                                            <td style="padding: 1rem; text-align: center; color: var(--dark-gray); font-size: 0.9rem;">5 min ago</td>
                                            <td style="padding: 1rem; text-align: center;">
                                                <button class="btn btn-outline view-sensor-btn" data-sensor-id="SNS-002" style="padding: 0.5rem 1rem; font-size: 0.85rem;"><i class="fas fa-eye"></i> View</button>
                                                <button class="btn btn-primary view-map-btn" data-sensor-id="SNS-002" style="margin-left:8px;padding:0.45rem 0.9rem;font-size:0.85rem;"><i class="fas fa-external-link-alt"></i> Map</button>
                                            </td>
                                        </tr>
                                        <tr style="border-bottom: 1px solid var(--medium-gray);">
                                            <td style="padding: 1rem; font-weight:600;color:var(--primary);">SNS-003</td>
                                            <td style="padding: 1rem;">Spring Source - Ranakpur</td>
                                            <td style="padding: 1rem;">Tube-well - South</td>
                                            <td style="padding: 1rem; text-align: center; font-family:monospace;font-size:0.85rem;">24.33 N, 93.68 E</td>
                                            <td style="padding: 1rem; text-align: center;"><span style="background: #c8e6c9; color: #1b5e20; padding: 0.25rem 0.75rem; border-radius: 20px; font-weight: 600;"> Safe</span></td>
                                            <td style="padding: 1rem; text-align: center; color: var(--dark-gray); font-size: 0.9rem;">8 min ago</td>
                                            <td style="padding: 1rem; text-align: center;">
                                                <button class="btn btn-outline view-sensor-btn" data-sensor-id="SNS-003" style="padding: 0.5rem 1rem; font-size: 0.85rem;"><i class="fas fa-eye"></i> View</button>
                                                <button class="btn btn-primary view-map-btn" data-sensor-id="SNS-003" style="margin-left:8px;padding:0.45rem 0.9rem;font-size:0.85rem;"><i class="fas fa-external-link-alt"></i> Map</button>
                                            </td>
                                        </tr>
                                        <tr style="border-bottom: 1px solid var(--medium-gray);">
                                            <td style="padding: 1rem; font-weight:600;color:var(--primary);">SNS-004</td>
                                            <td style="padding: 1rem;">Tank Storage - Bhamatsar</td>
                                            <td style="padding: 1rem;">Well - Community</td>
                                            <td style="padding: 1rem; text-align: center; font-family:monospace;font-size:0.85rem;">24.63 N, 94.00 E</td>
                                            <td style="padding: 1rem; text-align: center;"><span style="background: #fff3cd; color: #ff6f00; padding: 0.25rem 0.75rem; border-radius: 20px; font-weight: 600;"> Caution</span></td>
                                            <td style="padding: 1rem; text-align: center; color: var(--dark-gray); font-size: 0.9rem;">12 min ago</td>
                                            <td style="padding: 1rem; text-align: center;">
                                                <button class="btn btn-outline view-sensor-btn" data-sensor-id="SNS-004" style="padding: 0.5rem 1rem; font-size: 0.85rem;"><i class="fas fa-eye"></i> View</button>
                                                <button class="btn btn-primary view-map-btn" data-sensor-id="SNS-004" style="margin-left:8px;padding:0.45rem 0.9rem;font-size:0.85rem;"><i class="fas fa-external-link-alt"></i> Map</button>
                                            </td>
                                        </tr>
                                        <tr style="border-bottom: 1px solid var(--medium-gray);">
                                            <td style="padding: 1rem; font-weight:600;color:var(--primary);">SNS-005</td>
                                            <td style="padding: 1rem;">Hand Pump - Amarpura</td>
                                            <td style="padding: 1rem;">River Water Point</td>
                                            <td style="padding: 1rem; text-align: center; font-family:monospace;font-size:0.85rem;">24.49 N, 93.98 E</td>
                                            <td style="padding: 1rem; text-align: center;"><span style="background: #c8e6c9; color: #1b5e20; padding: 0.25rem 0.75rem; border-radius: 20px; font-weight: 600;"> Safe</span></td>
                                            <td style="padding: 1rem; text-align: center; color: var(--dark-gray); font-size: 0.9rem;">6 min ago</td>
                                            <td style="padding: 1rem; text-align: center;">
                                                <button class="btn btn-outline view-sensor-btn" data-sensor-id="SNS-005" style="padding: 0.5rem 1rem; font-size: 0.85rem;"><i class="fas fa-eye"></i> View</button>
                                                <button class="btn btn-primary view-map-btn" data-sensor-id="SNS-005" style="margin-left:8px;padding:0.45rem 0.9rem;font-size:0.85rem;"><i class="fas fa-external-link-alt"></i> Map</button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="padding: 1rem; font-weight:600;color:var(--primary);">SNS-006</td>
                                            <td style="padding: 1rem;">Tube Well - Bishanpur</td>
                                            <td style="padding: 1rem;">Spring Water</td>
                                            <td style="padding: 1rem; text-align: center; font-family:monospace;font-size:0.85rem;">25.06 N, 94.36 E</td>
                                            <td style="padding: 1rem; text-align: center;"><span style="background: #fff3cd; color: #ff6f00; padding: 0.25rem 0.75rem; border-radius: 20px; font-weight: 600;"> Caution</span></td>
                                            <td style="padding: 1rem; text-align: center; color: var(--dark-gray); font-size: 0.9rem;">4 min ago</td>
                                            <td style="padding: 1rem; text-align: center;">
                                                <button class="btn btn-outline view-sensor-btn" data-sensor-id="SNS-006" style="padding: 0.5rem 1rem; font-size: 0.85rem;"><i class="fas fa-eye"></i> View</button>
                                                <button class="btn btn-primary view-map-btn" data-sensor-id="SNS-006" style="margin-left:8px;padding:0.45rem 0.9rem;font-size:0.85rem;"><i class="fas fa-external-link-alt"></i> Map</button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Recent Sensor Readings & Maintenance Schedule -->
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 2rem;">
                            <!-- Recent Readings -->
                            <div style="background: white; border-radius: 12px; box-shadow: var(--shadow); padding: 1.5rem;">
                                <h3 style="margin-bottom: 1rem; font-weight: 700; font-size: 1.1rem; color: var(--dark);"><i class="fas fa-chart-line" style="color: var(--primary);"></i> Recent Sensor Readings</h3>
                                <div id="reports-readings-list" style="max-height: 500px; overflow-y: auto;"></div>
                            </div>

                            <!-- Maintenance Schedule -->
                            <div style="background: white; border-radius: 12px; box-shadow: var(--shadow); padding: 1.5rem;">
                                <h3 style="margin-bottom: 1rem; font-weight: 700; font-size: 1.1rem; color: var(--dark);"><i class="fas fa-wrench" style="color: var(--warning);"></i> Maintenance Schedule</h3>
                                <div id="reports-maintenance-list" style="max-height: 500px; overflow-y: auto;"></div>
                            </div>
                        </div>

                        <!-- Water Quality Chart -->
                        <div style="background: white; border-radius: 12px; box-shadow: var(--shadow); padding: 1.5rem; margin-bottom: 2rem;">
                            <h3 style="margin-bottom: 1rem; font-weight: 600; color: var(--dark);">Parameter Trends (24 Hours)</h3>
                            <canvas id="water-quality-reports-chart" style="max-height: 300px;"></canvas>
                        </div>
                    </div>

                    <!-- Sensor Details Modal -->
                    <div id="sensor-details-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.7); z-index: 1000; align-items: center; justify-content: center;">
                        <div style="background: white; border-radius: 12px; padding: 2rem; max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                                <h3 style="font-size: 1.5rem; font-weight: 700; color: var(--dark);">Sensor Details</h3>
                                <button id="modal-close-btn" style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: var(--dark-gray);"><i class="fas fa-times"></i></button>
                            </div>
                            <div id="sensor-modal-content" style="color: var(--dark);"></div>
                        </div>
                    </div>
                </div>

                <!-- Monitoring Section -->
                <div class="content-section" id="monitoring-section">
                    <div class="section-header">
                        <h2 class="section-title">Health & Environment Monitoring</h2>
                        <button class="btn btn-primary" style="margin-left:auto;"><i class="fas fa-download"></i> Export Report</button>
                    </div>
                    <div class="section-content">
                        <!-- Summary Cards -->
                        <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-bottom:30px;">
                            <div style="background:white;border-radius:12px;padding:20px;box-shadow:var(--shadow);border-left:4px solid var(--primary);">
                                <div style="display:flex;align-items:center;justify-content:space-between;">
                                    <div>
                                        <div style="font-size:0.85rem;color:var(--text-secondary);margin-bottom:8px;">Total Sensors</div>
                                        <div style="font-size:2.2rem;font-weight:700;color:var(--dark);">6</div>
                                        <div style="font-size:0.8rem;color:var(--safe);margin-top:5px;"><i class="fas fa-circle" style="font-size:0.5rem;"></i> All Active</div>
                                    </div>
                                    <div style="width:55px;height:55px;background:linear-gradient(135deg,var(--primary),#0d47a1);border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-size:1.5rem;">
                                        <i class="fas fa-microchip"></i>
                                    </div>
                                </div>
                            </div>

                            <div style="background:white;border-radius:12px;padding:20px;box-shadow:var(--shadow);border-left:4px solid var(--safe);">
                                <div style="display:flex;align-items:center;justify-content:space-between;">
                                    <div>
                                        <div style="font-size:0.85rem;color:var(--text-secondary);margin-bottom:8px;">Safe Locations</div>
                                        <div style="font-size:2.2rem;font-weight:700;color:var(--safe);">3</div>
                                        <div style="font-size:0.8rem;color:var(--safe);margin-top:5px;"><i class="fas fa-arrow-up"></i> +1 today</div>
                                    </div>
                                    <div style="width:55px;height:55px;background:linear-gradient(135deg,var(--safe),#27ae60);border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-size:1.5rem;">
                                        <i class="fas fa-check-circle"></i>
                                    </div>
                                </div>
                            </div>

                            <div style="background:white;border-radius:12px;padding:20px;box-shadow:var(--shadow);border-left:4px solid var(--warning);">
                                <div style="display:flex;align-items:center;justify-content:space-between;">
                                    <div>
                                        <div style="font-size:0.85rem;color:var(--text-secondary);margin-bottom:8px;">Warning Zones</div>
                                        <div style="font-size:2.2rem;font-weight:700;color:var(--warning);">2</div>
                                        <div style="font-size:0.8rem;color:var(--text-secondary);margin-top:5px;"><i class="fas fa-minus"></i> Stable</div>
                                    </div>
                                    <div style="width:55px;height:55px;background:linear-gradient(135deg,var(--warning),#f57c00);border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-size:1.5rem;">
                                        <i class="fas fa-exclamation-triangle"></i>
                                    </div>
                                </div>
                            </div>

                            <div style="background:white;border-radius:12px;padding:20px;box-shadow:var(--shadow);border-left:4px solid var(--danger);">
                                <div style="display:flex;align-items:center;justify-content:space-between;">
                                    <div>
                                        <div style="font-size:0.85rem;color:var(--text-secondary);margin-bottom:8px;">Critical Alerts</div>
                                        <div style="font-size:2.2rem;font-weight:700;color:var(--danger);">1</div>
                                        <div style="font-size:0.8rem;color:var(--danger);margin-top:5px;"><i class="fas fa-exclamation-circle"></i> Bijaipur</div>
                                    </div>
                                    <div style="width:55px;height:55px;background:linear-gradient(135deg,var(--danger),#c62828);border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-size:1.5rem;">
                                        <i class="fas fa-bell"></i>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Real-time Monitoring Grid -->
                        <div style="display:grid;grid-template-columns:2fr 1fr;gap:20px;margin-bottom:30px;">
                            <div style="background:white;border-radius:12px;padding:25px;box-shadow:var(--shadow);">
                                <h3 style="font-size:1.2rem;font-weight:600;margin-bottom:20px;color:var(--dark);">Live Sensor Readings</h3>
                                <div style="overflow-x:auto;">
                                    <table style="width:100%;border-collapse:collapse;">
                                        <thead>
                                            <tr style="background:var(--primary-light);border-bottom:2px solid var(--primary);">
                                                <th style="padding:12px;text-align:left;font-weight:600;font-size:0.9rem;">Sensor ID</th>
                                                <th style="padding:12px;text-align:left;font-weight:600;font-size:0.9rem;">Location</th>
                                                <th style="padding:12px;text-align:center;font-weight:600;font-size:0.9rem;">Status</th>
                                                <th style="padding:12px;text-align:center;font-weight:600;font-size:0.9rem;">Last Reading</th>
                                                <th style="padding:12px;text-align:center;font-weight:600;font-size:0.9rem;">Action</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr style="border-bottom:1px solid #eee;">
                                                <td style="padding:15px;font-family:monospace;font-weight:600;">SNS-001</td>
                                                <td style="padding:15px;">Mandawa</td>
                                                <td style="padding:15px;text-align:center;"><span style="background:var(--safe);color:white;padding:4px 12px;border-radius:12px;font-size:0.8rem;">Safe</span></td>
                                                <td style="padding:15px;text-align:center;font-size:0.85rem;">2 mins ago</td>
                                                <td style="padding:15px;text-align:center;"><button class="btn btn-outline" style="font-size:0.8rem;padding:5px 12px;">Details</button></td>
                                            </tr>
                                            <tr style="border-bottom:1px solid #eee;background:#fff5f5;">
                                                <td style="padding:15px;font-family:monospace;font-weight:600;">SNS-002</td>
                                                <td style="padding:15px;">Bijaipur</td>
                                                <td style="padding:15px;text-align:center;"><span style="background:var(--danger);color:white;padding:4px 12px;border-radius:12px;font-size:0.8rem;">Danger</span></td>
                                                <td style="padding:15px;text-align:center;font-size:0.85rem;">5 mins ago</td>
                                                <td style="padding:15px;text-align:center;"><button class="btn btn-outline" style="font-size:0.8rem;padding:5px 12px;border-color:var(--danger);color:var(--danger);">Alert</button></td>
                                            </tr>
                                            <tr style="border-bottom:1px solid #eee;">
                                                <td style="padding:15px;font-family:monospace;font-weight:600;">SNS-003</td>
                                                <td style="padding:15px;">Ranakpur</td>
                                                <td style="padding:15px;text-align:center;"><span style="background:var(--safe);color:white;padding:4px 12px;border-radius:12px;font-size:0.8rem;">Safe</span></td>
                                                <td style="padding:15px;text-align:center;font-size:0.85rem;">1 min ago</td>
                                                <td style="padding:15px;text-align:center;"><button class="btn btn-outline" style="font-size:0.8rem;padding:5px 12px;">Details</button></td>
                                            </tr>
                                            <tr style="border-bottom:1px solid #eee;background:#fffbf0;">
                                                <td style="padding:15px;font-family:monospace;font-weight:600;">SNS-004</td>
                                                <td style="padding:15px;">Bhamatsar</td>
                                                <td style="padding:15px;text-align:center;"><span style="background:var(--warning);color:white;padding:4px 12px;border-radius:12px;font-size:0.8rem;">Warning</span></td>
                                                <td style="padding:15px;text-align:center;font-size:0.85rem;">8 mins ago</td>
                                                <td style="padding:15px;text-align:center;"><button class="btn btn-outline" style="font-size:0.8rem;padding:5px 12px;">Details</button></td>
                                            </tr>
                                            <tr style="border-bottom:1px solid #eee;">
                                                <td style="padding:15px;font-family:monospace;font-weight:600;">SNS-005</td>
                                                <td style="padding:15px;">Amarpura</td>
                                                <td style="padding:15px;text-align:center;"><span style="background:var(--safe);color:white;padding:4px 12px;border-radius:12px;font-size:0.8rem;">Safe</span></td>
                                                <td style="padding:15px;text-align:center;font-size:0.85rem;">3 mins ago</td>
                                                <td style="padding:15px;text-align:center;"><button class="btn btn-outline" style="font-size:0.8rem;padding:5px 12px;">Details</button></td>
                                            </tr>
                                            <tr style="background:#fffbf0;">
                                                <td style="padding:15px;font-family:monospace;font-weight:600;">SNS-006</td>
                                                <td style="padding:15px;">Bishanpur</td>
                                                <td style="padding:15px;text-align:center;"><span style="background:var(--warning);color:white;padding:4px 12px;border-radius:12px;font-size:0.8rem;">Warning</span></td>
                                                <td style="padding:15px;text-align:center;font-size:0.85rem;">6 mins ago</td>
                                                <td style="padding:15px;text-align:center;"><button class="btn btn-outline" style="font-size:0.8rem;padding:5px 12px;">Details</button></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <div>
                                <div style="background:white;border-radius:12px;padding:20px;box-shadow:var(--shadow);margin-bottom:15px;">
                                    <h4 style="font-size:1rem;font-weight:600;margin-bottom:15px;color:var(--dark);">System Status</h4>
                                    <div style="margin-bottom:12px;">
                                        <div style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                            <span style="font-size:0.85rem;">Sensor Network</span>
                                            <span style="font-size:0.85rem;font-weight:600;color:var(--safe);">Online</span>
                                        </div>
                                        <div style="background:#e0e0e0;height:6px;border-radius:3px;overflow:hidden;">
                                            <div style="width:100%;height:100%;background:var(--safe);border-radius:3px;"></div>
                                        </div>
                                    </div>
                                    <div style="margin-bottom:12px;">
                                        <div style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                            <span style="font-size:0.85rem;">Data Sync</span>
                                            <span style="font-size:0.85rem;font-weight:600;color:var(--safe);">98%</span>
                                        </div>
                                        <div style="background:#e0e0e0;height:6px;border-radius:3px;overflow:hidden;">
                                            <div style="width:98%;height:100%;background:var(--safe);border-radius:3px;"></div>
                                        </div>
                                    </div>
                                    <div>
                                        <div style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                            <span style="font-size:0.85rem;">Alert System</span>
                                            <span style="font-size:0.85rem;font-weight:600;color:var(--safe);">Active</span>
                                        </div>
                                        <div style="background:#e0e0e0;height:6px;border-radius:3px;overflow:hidden;">
                                            <div style="width:100%;height:100%;background:var(--safe);border-radius:3px;"></div>
                                        </div>
                                    </div>
                                </div>

                                <div style="background:linear-gradient(135deg,#e3f2fd,#bbdefb);border-radius:12px;padding:20px;border-left:4px solid var(--primary);">
                                    <h4 style="font-size:0.95rem;font-weight:600;margin-bottom:10px;color:var(--dark);"><i class="fas fa-info-circle"></i> Quick Stats</h4>
                                    <div style="font-size:0.85rem;margin-bottom:8px;"><strong>24h Readings:</strong> 432</div>
                                    <div style="font-size:0.85rem;margin-bottom:8px;"><strong>Data Points:</strong> 2,592</div>
                                    <div style="font-size:0.85rem;"><strong>Uptime:</strong> 99.8%</div>
                                </div>
                            </div>
                        </div>

                        <!-- Critical Alert Banner -->
                        <div style="background:linear-gradient(135deg,#ffebee,#ffcdd2);border-radius:12px;padding:20px;border-left:4px solid var(--danger);">
                            <div style="display:flex;align-items:center;gap:15px;">
                                <div style="width:50px;height:50px;background:var(--danger);border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-size:1.5rem;">
                                    <i class="fas fa-exclamation-triangle"></i>
                                </div>
                                <div style="flex:1;">
                                    <h4 style="font-size:1.1rem;font-weight:600;margin-bottom:5px;color:var(--dark);">Critical Water Contamination Alert - Bijaipur</h4>
                                    <p style="font-size:0.9rem;color:var(--text-secondary);margin:0;">Sensor SNS-002 reports E.coli level of 280 CFU/100ml (Danger threshold: >100). Immediate action required. Residents advised to boil water before consumption.</p>
                                </div>
                                <button class="btn" style="background:var(--danger);color:white;">View Details</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Alerts Section -->
                <div class="content-section" id="alerts-section">
                    <div class="section-header">
                        <h2 class="section-title">Alert Management System</h2>
                        <div style="display:flex;gap:10px;margin-left:auto;">
                            <select style="padding:8px 15px;border:1px solid #ddd;border-radius:6px;font-size:0.9rem;">
                                <option>All Alerts</option>
                                <option>Critical</option>
                                <option>High</option>
                                <option>Medium</option>
                                <option>Low</option>
                            </select>
                            <button class="btn btn-primary"><i class="fas fa-sync-alt"></i> Refresh</button>
                        </div>
                    </div>
                    <div class="section-content">
                        <!-- Alert Statistics -->
                        <div style="display:grid;grid-template-columns:repeat(5,1fr);gap:16px;margin-bottom:30px;">
                            <div style="background:linear-gradient(135deg,var(--danger),#c62828);color:white;border-radius:12px;padding:20px;text-align:center;">
                                <div style="font-size:0.9rem;opacity:0.9;margin-bottom:8px;">Critical</div>
                                <div style="font-size:2.5rem;font-weight:700;margin-bottom:5px;">3</div>
                                <div style="font-size:0.8rem;opacity:0.85;">Active now</div>
                            </div>
                            <div style="background:linear-gradient(135deg,#ff5722,#f4511e);color:white;border-radius:12px;padding:20px;text-align:center;">
                                <div style="font-size:0.9rem;opacity:0.9;margin-bottom:8px;">High</div>
                                <div style="font-size:2.5rem;font-weight:700;margin-bottom:5px;">8</div>
                                <div style="font-size:0.8rem;opacity:0.85;">Needs attention</div>
                            </div>
                            <div style="background:linear-gradient(135deg,var(--warning),#f57c00);color:white;border-radius:12px;padding:20px;text-align:center;">
                                <div style="font-size:0.9rem;opacity:0.9;margin-bottom:8px;">Medium</div>
                                <div style="font-size:2.5rem;font-weight:700;margin-bottom:5px;">15</div>
                                <div style="font-size:0.8rem;opacity:0.85;">Monitoring</div>
                            </div>
                            <div style="background:linear-gradient(135deg,#4caf50,#388e3c);color:white;border-radius:12px;padding:20px;text-align:center;">
                                <div style="font-size:0.9rem;opacity:0.9;margin-bottom:8px;">Resolved Today</div>
                                <div style="font-size:2.5rem;font-weight:700;margin-bottom:5px;">12</div>
                                <div style="font-size:0.8rem;opacity:0.85;"><i class="fas fa-check"></i> Completed</div>
                            </div>
                            <div style="background:linear-gradient(135deg,var(--primary),#0d47a1);color:white;border-radius:12px;padding:20px;text-align:center;">
                                <div style="font-size:0.9rem;opacity:0.9;margin-bottom:8px;">Total Active</div>
                                <div style="font-size:2.5rem;font-weight:700;margin-bottom:5px;">26</div>
                                <div style="font-size:0.8rem;opacity:0.85;">All priorities</div>
                            </div>
                        </div>

                        <!-- Active Alerts List -->
                        <div style="background:white;border-radius:12px;padding:25px;box-shadow:var(--shadow);margin-bottom:25px;">
                            <h3 style="font-size:1.2rem;font-weight:600;margin-bottom:20px;color:var(--dark);">Active Alerts</h3>
                            
                            <!-- Critical Alert 1 -->
                            <div style="background:#ffebee;border-left:4px solid var(--danger);padding:20px;border-radius:8px;margin-bottom:15px;">
                                <div style="display:flex;align-items:start;justify-content:space-between;margin-bottom:10px;">
                                    <div style="flex:1;">
                                        <div style="display:flex;align-items:center;gap:10px;margin-bottom:8px;">
                                            <span style="background:var(--danger);color:white;padding:4px 12px;border-radius:12px;font-size:0.8rem;font-weight:600;">CRITICAL</span>
                                            <span style="font-family:monospace;font-size:0.85rem;color:var(--text-secondary);">ALERT-2025-001</span>
                                            <span style="font-size:0.8rem;color:var(--text-secondary);">5 mins ago</span>
                                        </div>
                                        <h4 style="font-size:1.1rem;font-weight:600;color:var(--dark);margin-bottom:8px;">Severe Water Contamination - Bijaipur Borewell</h4>
                                        <p style="font-size:0.9rem;color:var(--text-secondary);margin-bottom:10px;line-height:1.6;">E.coli level detected at 280 CFU/100ml, significantly exceeding safe threshold of 100 CFU. Sensor SNS-002 reporting consistent high readings. Affecting approximately 1,890 residents.</p>
                                        <div style="display:flex;gap:15px;font-size:0.85rem;">
                                            <div><strong>Location:</strong> Bijaipur Village</div>
                                            <div><strong>Source:</strong> Sensor SNS-002</div>
                                            <div><strong>Population:</strong> 1,890</div>
                                        </div>
                                    </div>
                                    <div style="display:flex;flex-direction:column;gap:8px;">
                                        <button class="btn send-sms-alert-btn" data-location="Bijaipur" data-alert="Water Contamination" data-population="1890" style="background:#ff5722;color:white;font-size:0.85rem;white-space:nowrap;"><i class="fas fa-sms"></i> Send SMS Alert</button>
                                        <button class="btn" style="background:var(--danger);color:white;font-size:0.85rem;">Take Action</button>
                                        <button class="btn btn-outline" style="font-size:0.85rem;">Details</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Critical Alert 2 -->
                            <div style="background:#ffebee;border-left:4px solid var(--danger);padding:20px;border-radius:8px;margin-bottom:15px;">
                                <div style="display:flex;align-items:start;justify-content:space-between;margin-bottom:10px;">
                                    <div style="flex:1;">
                                        <div style="display:flex;align-items:center;gap:10px;margin-bottom:8px;">
                                            <span style="background:var(--danger);color:white;padding:4px 12px;border-radius:12px;font-size:0.8rem;font-weight:600;">CRITICAL</span>
                                            <span style="font-family:monospace;font-size:0.85rem;color:var(--text-secondary);">ALERT-2025-002</span>
                                            <span style="font-size:0.8rem;color:var(--text-secondary);">22 mins ago</span>
                                        </div>
                                        <h4 style="font-size:1.1rem;font-weight:600;color:var(--dark);margin-bottom:8px;">Disease Outbreak Cluster - Diarrhea Cases</h4>
                                        <p style="font-size:0.9rem;color:var(--text-secondary);margin-bottom:10px;line-height:1.6;">28 cases of acute diarrhea reported in Bijaipur over last 7 days. 215% increase from previous week. Correlation detected with water contamination alert.</p>
                                        <div style="display:flex;gap:15px;font-size:0.85rem;">
                                            <div><strong>Cases:</strong> 28 active</div>
                                            <div><strong>Trend:</strong> +215%</div>
                                            <div><strong>Status:</strong> Investigating</div>
                                        </div>
                                    </div>
                                    <div style="display:flex;flex-direction:column;gap:8px;">
                                        <button class="btn send-sms-alert-btn" data-location="Bijaipur" data-alert="Disease Outbreak - Diarrhea" data-population="1890" style="background:#ff5722;color:white;font-size:0.85rem;white-space:nowrap;"><i class="fas fa-sms"></i> Send SMS Alert</button>
                                        <button class="btn" style="background:var(--danger);color:white;font-size:0.85rem;">Respond</button>
                                        <button class="btn btn-outline" style="font-size:0.85rem;">Details</button>
                                    </div>
                                </div>
                            </div>

                            <!-- High Priority Alert -->
                            <div style="background:#fff3e0;border-left:4px solid #ff5722;padding:20px;border-radius:8px;margin-bottom:15px;">
                                <div style="display:flex;align-items:start;justify-content:space-between;margin-bottom:10px;">
                                    <div style="flex:1;">
                                        <div style="display:flex;align-items:center;gap:10px;margin-bottom:8px;">
                                            <span style="background:#ff5722;color:white;padding:4px 12px;border-radius:12px;font-size:0.8rem;font-weight:600;">HIGH</span>
                                            <span style="font-family:monospace;font-size:0.85rem;color:var(--text-secondary);">ALERT-2025-003</span>
                                            <span style="font-size:0.8rem;color:var(--text-secondary);">1 hour ago</span>
                                        </div>
                                        <h4 style="font-size:1.1rem;font-weight:600;color:var(--dark);margin-bottom:8px;">Elevated Bacteria Count - Bhamatsar Pond</h4>
                                        <p style="font-size:0.9rem;color:var(--text-secondary);margin-bottom:10px;line-height:1.6;">Bacterial count at 280, approaching warning threshold. E.coli at 95 CFU/100ml. Sensor SNS-004 recommends increased monitoring.</p>
                                        <div style="display:flex;gap:15px;font-size:0.85rem;">
                                            <div><strong>Location:</strong> Bhamatsar</div>
                                            <div><strong>Population:</strong> 1,560</div>
                                            <div><strong>Status:</strong> Monitoring</div>
                                        </div>
                                    </div>
                                    <div style="display:flex;gap:8px;">
                                        <button class="btn btn-warning" style="font-size:0.85rem;">Monitor</button>
                                        <button class="btn btn-outline" style="font-size:0.85rem;">Details</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Medium Priority Alerts -->
                            <div style="background:#fffbf0;border-left:4px solid var(--warning);padding:20px;border-radius:8px;">
                                <div style="display:flex;align-items:start;justify-content:space-between;margin-bottom:10px;">
                                    <div style="flex:1;">
                                        <div style="display:flex;align-items:center;gap:10px;margin-bottom:8px;">
                                            <span style="background:var(--warning);color:white;padding:4px 12px;border-radius:12px;font-size:0.8rem;font-weight:600;">MEDIUM</span>
                                            <span style="font-family:monospace;font-size:0.85rem;color:var(--text-secondary);">ALERT-2025-004</span>
                                            <span style="font-size:0.8rem;color:var(--text-secondary);">2 hours ago</span>
                                        </div>
                                        <h4 style="font-size:1.1rem;font-weight:600;color:var(--dark);margin-bottom:8px;">pH Level Fluctuation - Bishanpur River</h4>
                                        <p style="font-size:0.9rem;color:var(--text-secondary);margin-bottom:10px;line-height:1.6;">pH reading at 6.9, slightly below optimal range. Turbidity increasing. Sensor SNS-006 suggesting routine check.</p>
                                        <div style="display:flex;gap:15px;font-size:0.85rem;">
                                            <div><strong>pH:</strong> 6.9</div>
                                            <div><strong>Turbidity:</strong> 3.2 NTU</div>
                                            <div><strong>Action:</strong> Routine check</div>
                                        </div>
                                    </div>
                                    <div style="display:flex;gap:8px;">
                                        <button class="btn btn-outline" style="font-size:0.85rem;">Review</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Response Actions -->
                        <div style="background:linear-gradient(135deg,#e3f2fd,#bbdefb);border-radius:12px;padding:20px;border-left:4px solid var(--primary);">
                            <h4 style="font-size:1.1rem;font-weight:600;margin-bottom:15px;color:var(--dark);"><i class="fas fa-clipboard-check"></i> Response Protocol</h4>
                            <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:15px;font-size:0.9rem;">
                                <div><strong>Critical:</strong> Immediate intervention within 1 hour</div>
                                <div><strong>High:</strong> Response within 4 hours</div>
                                <div><strong>Medium:</strong> Review within 24 hours</div>
                                <div><strong>Low:</strong> Routine monitoring</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Analytics Section -->
                <div class="content-section" id="analytics-section">
                    <div class="section-header">
                        <h2 class="section-title">Advanced Analytics</h2>
                        <div style="display:flex;gap:10px;margin-left:auto;">
                            <select style="padding:8px 15px;border:1px solid #ddd;border-radius:6px;font-size:0.9rem;">
                                <option>Last 7 Days</option>
                                <option>Last 30 Days</option>
                                <option>Last 3 Months</option>
                                <option>Last Year</option>
                            </select>
                            <button class="btn btn-primary"><i class="fas fa-download"></i> Export Analytics</button>
                        </div>
                    </div>
                    <div class="section-content">
                        <!-- Key Insights -->
                        <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-bottom:30px;">
                            <div style="background:white;border-radius:12px;padding:20px;box-shadow:var(--shadow);border-left:4px solid var(--primary);">
                                <div style="font-size:0.85rem;color:var(--text-secondary);margin-bottom:8px;">Weekly Trend</div>
                                <div style="font-size:2.2rem;font-weight:700;color:var(--safe);margin-bottom:5px;">-12%</div>
                                <div style="font-size:0.8rem;color:var(--safe);"><i class="fas fa-arrow-down"></i> Disease cases decreasing</div>
                            </div>
                            <div style="background:white;border-radius:12px;padding:20px;box-shadow:var(--shadow);border-left:4px solid var(--warning);">
                                <div style="font-size:0.85rem;color:var(--text-secondary);margin-bottom:8px;">Correlation Index</div>
                                <div style="font-size:2.2rem;font-weight:700;color:var(--warning);margin-bottom:5px;">0.87</div>
                                <div style="font-size:0.8rem;color:var(--warning);">Water quality vs diseases</div>
                            </div>
                            <div style="background:white;border-radius:12px;padding:20px;box-shadow:var(--shadow);border-left:4px solid var(--danger);">
                                <div style="font-size:0.85rem;color:var(--text-secondary);margin-bottom:8px;">Hotspot Alert</div>
                                <div style="font-size:1.5rem;font-weight:700;color:var(--danger);margin-bottom:5px;">Bijaipur</div>
                                <div style="font-size:0.8rem;color:var(--danger);">Highest risk area</div>
                            </div>
                            <div style="background:white;border-radius:12px;padding:20px;box-shadow:var(--shadow);border-left:4px solid var(--safe);">
                                <div style="font-size:0.85rem;color:var(--text-secondary);margin-bottom:8px;">Prediction Accuracy</div>
                                <div style="font-size:2.2rem;font-weight:700;color:var(--safe);margin-bottom:5px;">94%</div>
                                <div style="font-size:0.8rem;color:var(--safe);">AI model performance</div>
                            </div>
                        </div>

                        <!-- Trend Analysis -->
                        <div style="display:grid;grid-template-columns:2fr 1fr;gap:20px;margin-bottom:30px;">
                            <div style="background:white;border-radius:12px;padding:25px;box-shadow:var(--shadow);">
                                <h3 style="font-size:1.2rem;font-weight:600;margin-bottom:20px;color:var(--dark);">Disease Trend Analysis (30 Days)</h3>
                                <div style="overflow-x:auto;">
                                    <table style="width:100%;border-collapse:collapse;">
                                        <thead>
                                            <tr style="background:var(--primary-light);border-bottom:2px solid var(--primary);">
                                                <th style="padding:12px;text-align:left;font-weight:600;font-size:0.9rem;">Disease</th>
                                                <th style="padding:12px;text-align:center;font-weight:600;font-size:0.9rem;">Week 1</th>
                                                <th style="padding:12px;text-align:center;font-weight:600;font-size:0.9rem;">Week 2</th>
                                                <th style="padding:12px;text-align:center;font-weight:600;font-size:0.9rem;">Week 3</th>
                                                <th style="padding:12px;text-align:center;font-weight:600;font-size:0.9rem;">Week 4</th>
                                                <th style="padding:12px;text-align:center;font-weight:600;font-size:0.9rem;">Trend</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr style="border-bottom:1px solid #eee;">
                                                <td style="padding:15px;font-weight:500;">Diarrhea</td>
                                                <td style="padding:15px;text-align:center;">8</td>
                                                <td style="padding:15px;text-align:center;">12</td>
                                                <td style="padding:15px;text-align:center;">18</td>
                                                <td style="padding:15px;text-align:center;font-weight:600;color:var(--danger);">42</td>
                                                <td style="padding:15px;text-align:center;"><span style="color:var(--danger);font-weight:600;"><i class="fas fa-arrow-up"></i> +425%</span></td>
                                            </tr>
                                            <tr style="border-bottom:1px solid #eee;background:#f9f9f9;">
                                                <td style="padding:15px;font-weight:500;">Typhoid</td>
                                                <td style="padding:15px;text-align:center;">15</td>
                                                <td style="padding:15px;text-align:center;">18</td>
                                                <td style="padding:15px;text-align:center;">22</td>
                                                <td style="padding:15px;text-align:center;font-weight:600;">28</td>
                                                <td style="padding:15px;text-align:center;"><span style="color:var(--warning);font-weight:600;"><i class="fas fa-arrow-up"></i> +87%</span></td>
                                            </tr>
                                            <tr style="border-bottom:1px solid #eee;">
                                                <td style="padding:15px;font-weight:500;">Fever</td>
                                                <td style="padding:15px;text-align:center;">45</td>
                                                <td style="padding:15px;text-align:center;">38</td>
                                                <td style="padding:15px;text-align:center;">36</td>
                                                <td style="padding:15px;text-align:center;font-weight:600;">34</td>
                                                <td style="padding:15px;text-align:center;"><span style="color:var(--safe);font-weight:600;"><i class="fas fa-arrow-down"></i> -24%</span></td>
                                            </tr>
                                            <tr style="border-bottom:1px solid #eee;background:#f9f9f9;">
                                                <td style="padding:15px;font-weight:500;">Skin Infection</td>
                                                <td style="padding:15px;text-align:center;">12</td>
                                                <td style="padding:15px;text-align:center;">15</td>
                                                <td style="padding:15px;text-align:center;">18</td>
                                                <td style="padding:15px;text-align:center;font-weight:600;">20</td>
                                                <td style="padding:15px;text-align:center;"><span style="color:var(--warning);font-weight:600;"><i class="fas fa-arrow-up"></i> +67%</span></td>
                                            </tr>
                                            <tr style="border-bottom:1px solid #eee;">
                                                <td style="padding:15px;font-weight:500;">Respiratory</td>
                                                <td style="padding:15px;text-align:center;">28</td>
                                                <td style="padding:15px;text-align:center;">24</td>
                                                <td style="padding:15px;text-align:center;">22</td>
                                                <td style="padding:15px;text-align:center;font-weight:600;">20</td>
                                                <td style="padding:15px;text-align:center;"><span style="color:var(--safe);font-weight:600;"><i class="fas fa-arrow-down"></i> -29%</span></td>
                                            </tr>
                                            <tr style="background:#f9f9f9;">
                                                <td style="padding:15px;font-weight:500;">Malaria</td>
                                                <td style="padding:15px;text-align:center;">6</td>
                                                <td style="padding:15px;text-align:center;">4</td>
                                                <td style="padding:15px;text-align:center;">3</td>
                                                <td style="padding:15px;text-align:center;font-weight:600;">2</td>
                                                <td style="padding:15px;text-align:center;"><span style="color:var(--safe);font-weight:600;"><i class="fas fa-arrow-down"></i> -67%</span></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <div>
                                <div style="background:white;border-radius:12px;padding:20px;box-shadow:var(--shadow);margin-bottom:15px;">
                                    <h4 style="font-size:1rem;font-weight:600;margin-bottom:15px;color:var(--dark);">Geographic Distribution</h4>
                                    <div style="margin-bottom:15px;">
                                        <div style="display:flex;justify-content:space-between;margin-bottom:5px;font-size:0.9rem;">
                                            <span>Bijaipur</span>
                                            <span style="font-weight:600;color:var(--danger);">40</span>
                                        </div>
                                        <div style="background:#e0e0e0;height:8px;border-radius:4px;overflow:hidden;">
                                            <div style="width:85%;height:100%;background:var(--danger);border-radius:4px;"></div>
                                        </div>
                                    </div>
                                    <div style="margin-bottom:15px;">
                                        <div style="display:flex;justify-content:space-between;margin-bottom:5px;font-size:0.9rem;">
                                            <span>Mandawa</span>
                                            <span style="font-weight:600;">25</span>
                                        </div>
                                        <div style="background:#e0e0e0;height:8px;border-radius:4px;overflow:hidden;">
                                            <div style="width:53%;height:100%;background:var(--warning);border-radius:4px;"></div>
                                        </div>
                                    </div>
                                    <div style="margin-bottom:15px;">
                                        <div style="display:flex;justify-content:space-between;margin-bottom:5px;font-size:0.9rem;">
                                            <span>Bhamatsar</span>
                                            <span style="font-weight:600;">25</span>
                                        </div>
                                        <div style="background:#e0e0e0;height:8px;border-radius:4px;overflow:hidden;">
                                            <div style="width:53%;height:100%;background:var(--warning);border-radius:4px;"></div>
                                        </div>
                                    </div>
                                    <div style="margin-bottom:15px;">
                                        <div style="display:flex;justify-content:space-between;margin-bottom:5px;font-size:0.9rem;">
                                            <span>Amarpura</span>
                                            <span style="font-weight:600;">15</span>
                                        </div>
                                        <div style="background:#e0e0e0;height:8px;border-radius:4px;overflow:hidden;">
                                            <div style="width:32%;height:100%;background:var(--primary);border-radius:4px;"></div>
                                        </div>
                                    </div>
                                    <div style="margin-bottom:15px;">
                                        <div style="display:flex;justify-content:space-between;margin-bottom:5px;font-size:0.9rem;">
                                            <span>Ranakpur</span>
                                            <span style="font-weight:600;">12</span>
                                        </div>
                                        <div style="background:#e0e0e0;height:8px;border-radius:4px;overflow:hidden;">
                                            <div style="width:25%;height:100%;background:var(--safe);border-radius:4px;"></div>
                                        </div>
                                    </div>
                                    <div>
                                        <div style="display:flex;justify-content:space-between;margin-bottom:5px;font-size:0.9rem;">
                                            <span>Bishanpur</span>
                                            <span style="font-weight:600;">7</span>
                                        </div>
                                        <div style="background:#e0e0e0;height:8px;border-radius:4px;overflow:hidden;">
                                            <div style="width:15%;height:100%;background:var(--safe);border-radius:4px;"></div>
                                        </div>
                                    </div>
                                </div>

                                <div style="background:linear-gradient(135deg,#ffebee,#ffcdd2);border-radius:12px;padding:20px;border-left:4px solid var(--danger);">
                                    <h4 style="font-size:0.95rem;font-weight:600;margin-bottom:10px;color:var(--dark);"><i class="fas fa-brain"></i> AI Prediction</h4>
                                    <div style="font-size:0.85rem;line-height:1.6;">
                                        <strong>Risk Level:</strong> High<br>
                                        <strong>Next 7 Days:</strong> +45% case increase expected in Bijaipur<br>
                                        <strong>Recommendation:</strong> Immediate intervention
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Correlation Analysis -->
                        <div style="background:white;border-radius:12px;padding:25px;box-shadow:var(--shadow);margin-bottom:25px;">
                            <h3 style="font-size:1.2rem;font-weight:600;margin-bottom:20px;color:var(--dark);">Water Quality vs Disease Correlation</h3>
                            <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:20px;">
                                <div style="background:var(--primary-light);border-radius:8px;padding:20px;text-align:center;">
                                    <div style="font-size:0.9rem;color:var(--text-secondary);margin-bottom:10px;">E.coli & Diarrhea</div>
                                    <div style="font-size:3rem;font-weight:700;color:var(--danger);margin-bottom:5px;">0.92</div>
                                    <div style="font-size:0.85rem;color:var(--danger);font-weight:600;">Strong Correlation</div>
                                    <div style="font-size:0.8rem;color:var(--text-secondary);margin-top:8px;">p-value: 0.001</div>
                                </div>
                                <div style="background:var(--primary-light);border-radius:8px;padding:20px;text-align:center;">
                                    <div style="font-size:0.9rem;color:var(--text-secondary);margin-bottom:10px;">pH & Skin Infections</div>
                                    <div style="font-size:3rem;font-weight:700;color:var(--warning);margin-bottom:5px;">0.68</div>
                                    <div style="font-size:0.85rem;color:var(--warning);font-weight:600;">Moderate Correlation</div>
                                    <div style="font-size:0.8rem;color:var(--text-secondary);margin-top:8px;">p-value: 0.025</div>
                                </div>
                                <div style="background:var(--primary-light);border-radius:8px;padding:20px;text-align:center;">
                                    <div style="font-size:0.9rem;color:var(--text-secondary);margin-bottom:10px;">Turbidity & Typhoid</div>
                                    <div style="font-size:3rem;font-weight:700;color:var(--warning);margin-bottom:5px;">0.74</div>
                                    <div style="font-size:0.85rem;color:var(--warning);font-weight:600;">Moderate Correlation</div>
                                    <div style="font-size:0.8rem;color:var(--text-secondary);margin-top:8px;">p-value: 0.012</div>
                                </div>
                            </div>
                        </div>

                        <!-- Predictive Insights -->
                        <div style="background:linear-gradient(135deg,#e3f2fd,#bbdefb);border-radius:12px;padding:20px;border-left:4px solid var(--primary);">
                            <h4 style="font-size:1.1rem;font-weight:600;margin-bottom:15px;color:var(--dark);"><i class="fas fa-lightbulb"></i> Key Insights & Recommendations</h4>
                            <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:15px;font-size:0.9rem;line-height:1.6;">
                                <div> Strong correlation (0.92) between E.coli levels and diarrhea cases suggests water contamination is primary cause</div>
                                <div> Bijaipur requires immediate water treatment intervention to prevent outbreak escalation</div>
                                <div> Seasonal patterns indicate monsoon period increases waterborne disease risk by 240%</div>
                                <div> Early warning system accuracy at 94%, enabling proactive intervention before outbreaks peak</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Subsection Content Areas -->
                <div class="content-section" id="location-overview-section">
                    <div class="section-header">
                        <h2 class="section-title">Location Overview</h2>
                        <button class="btn btn-primary" style="margin-left:auto;"><i class="fas fa-sync-alt"></i> Refresh Data</button>
                    </div>
                    <div class="section-content">
                        <!-- Location Map Grid -->
                        <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:20px;margin-bottom:30px;">
                            <div style="background:white;border-radius:12px;padding:20px;box-shadow:var(--shadow);border-left:4px solid var(--safe);">
                                <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:15px;">
                                    <div>
                                        <h3 style="font-size:1.1rem;font-weight:600;color:var(--dark);margin-bottom:5px;">Mandawa</h3>
                                        <p style="font-size:0.85rem;color:var(--text-secondary);margin:0;">Community Well</p>
                                    </div>
                                    <div style="width:50px;height:50px;background:linear-gradient(135deg,var(--safe),#27ae60);border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-size:1.3rem;">
                                        <i class="fas fa-check"></i>
                                    </div>
                                </div>
                                <div style="margin-bottom:12px;">
                                    <div style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                        <span style="font-size:0.85rem;color:var(--text-secondary);">Water Quality</span>
                                        <span style="font-size:0.85rem;font-weight:600;color:var(--safe);">Safe</span>
                                    </div>
                                    <div style="background:#e0e0e0;height:6px;border-radius:3px;overflow:hidden;">
                                        <div style="width:92%;height:100%;background:var(--safe);border-radius:3px;"></div>
                                    </div>
                                </div>
                                <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;font-size:0.8rem;">
                                    <div><strong>E.coli:</strong> 65 CFU</div>
                                    <div><strong>pH:</strong> 7.2</div>
                                    <div><strong>Population:</strong> 2,340</div>
                                    <div><strong>Status:</strong> <span style="color:var(--safe);">Active</span></div>
                                </div>
                            </div>

                            <div style="background:white;border-radius:12px;padding:20px;box-shadow:var(--shadow);border-left:4px solid var(--danger);">
                                <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:15px;">
                                    <div>
                                        <h3 style="font-size:1.1rem;font-weight:600;color:var(--dark);margin-bottom:5px;">Bijaipur</h3>
                                        <p style="font-size:0.85rem;color:var(--text-secondary);margin:0;">Borewell</p>
                                    </div>
                                    <div style="width:50px;height:50px;background:linear-gradient(135deg,var(--danger),#c62828);border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-size:1.3rem;">
                                        <i class="fas fa-exclamation-triangle"></i>
                                    </div>
                                </div>
                                <div style="margin-bottom:12px;">
                                    <div style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                        <span style="font-size:0.85rem;color:var(--text-secondary);">Water Quality</span>
                                        <span style="font-size:0.85rem;font-weight:600;color:var(--danger);">Danger</span>
                                    </div>
                                    <div style="background:#e0e0e0;height:6px;border-radius:3px;overflow:hidden;">
                                        <div style="width:35%;height:100%;background:var(--danger);border-radius:3px;"></div>
                                    </div>
                                </div>
                                <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;font-size:0.8rem;">
                                    <div><strong>E.coli:</strong> <span style="color:var(--danger);">280 CFU</span></div>
                                    <div><strong>pH:</strong> 6.8</div>
                                    <div><strong>Population:</strong> 1,890</div>
                                    <div><strong>Status:</strong> <span style="color:var(--danger);">Alert</span></div>
                                </div>
                            </div>

                            <div style="background:white;border-radius:12px;padding:20px;box-shadow:var(--shadow);border-left:4px solid var(--safe);">
                                <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:15px;">
                                    <div>
                                        <h3 style="font-size:1.1rem;font-weight:600;color:var(--dark);margin-bottom:5px;">Ranakpur</h3>
                                        <p style="font-size:0.85rem;color:var(--text-secondary);margin:0;">Handpump</p>
                                    </div>
                                    <div style="width:50px;height:50px;background:linear-gradient(135deg,var(--safe),#27ae60);border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-size:1.3rem;">
                                        <i class="fas fa-check"></i>
                                    </div>
                                </div>
                                <div style="margin-bottom:12px;">
                                    <div style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                        <span style="font-size:0.85rem;color:var(--text-secondary);">Water Quality</span>
                                        <span style="font-size:0.85rem;font-weight:600;color:var(--safe);">Safe</span>
                                    </div>
                                    <div style="background:#e0e0e0;height:6px;border-radius:3px;overflow:hidden;">
                                        <div style="width:98%;height:100%;background:var(--safe);border-radius:3px;"></div>
                                    </div>
                                </div>
                                <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;font-size:0.8rem;">
                                    <div><strong>E.coli:</strong> 15 CFU</div>
                                    <div><strong>pH:</strong> 7.4</div>
                                    <div><strong>Population:</strong> 3,120</div>
                                    <div><strong>Status:</strong> <span style="color:var(--safe);">Active</span></div>
                                </div>
                            </div>

                            <div style="background:white;border-radius:12px;padding:20px;box-shadow:var(--shadow);border-left:4px solid var(--warning);">
                                <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:15px;">
                                    <div>
                                        <h3 style="font-size:1.1rem;font-weight:600;color:var(--dark);margin-bottom:5px;">Bhamatsar</h3>
                                        <p style="font-size:0.85rem;color:var(--text-secondary);margin:0;">Pond</p>
                                    </div>
                                    <div style="width:50px;height:50px;background:linear-gradient(135deg,var(--warning),#f57c00);border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-size:1.3rem;">
                                        <i class="fas fa-exclamation"></i>
                                    </div>
                                </div>
                                <div style="margin-bottom:12px;">
                                    <div style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                        <span style="font-size:0.85rem;color:var(--text-secondary);">Water Quality</span>
                                        <span style="font-size:0.85rem;font-weight:600;color:var(--warning);">Warning</span>
                                    </div>
                                    <div style="background:#e0e0e0;height:6px;border-radius:3px;overflow:hidden;">
                                        <div style="width:68%;height:100%;background:var(--warning);border-radius:3px;"></div>
                                    </div>
                                </div>
                                <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;font-size:0.8rem;">
                                    <div><strong>E.coli:</strong> <span style="color:var(--warning);">95 CFU</span></div>
                                    <div><strong>pH:</strong> 6.5</div>
                                    <div><strong>Population:</strong> 1,560</div>
                                    <div><strong>Status:</strong> <span style="color:var(--warning);">Monitor</span></div>
                                </div>
                            </div>

                            <div style="background:white;border-radius:12px;padding:20px;box-shadow:var(--shadow);border-left:4px solid var(--safe);">
                                <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:15px;">
                                    <div>
                                        <h3 style="font-size:1.1rem;font-weight:600;color:var(--dark);margin-bottom:5px;">Amarpura</h3>
                                        <p style="font-size:0.85rem;color:var(--text-secondary);margin:0;">Lake</p>
                                    </div>
                                    <div style="width:50px;height:50px;background:linear-gradient(135deg,var(--safe),#27ae60);border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-size:1.3rem;">
                                        <i class="fas fa-check"></i>
                                    </div>
                                </div>
                                <div style="margin-bottom:12px;">
                                    <div style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                        <span style="font-size:0.85rem;color:var(--text-secondary);">Water Quality</span>
                                        <span style="font-size:0.85rem;font-weight:600;color:var(--safe);">Safe</span>
                                    </div>
                                    <div style="background:#e0e0e0;height:6px;border-radius:3px;overflow:hidden;">
                                        <div style="width:95%;height:100%;background:var(--safe);border-radius:3px;"></div>
                                    </div>
                                </div>
                                <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;font-size:0.8rem;">
                                    <div><strong>E.coli:</strong> 22 CFU</div>
                                    <div><strong>pH:</strong> 7.6</div>
                                    <div><strong>Population:</strong> 2,780</div>
                                    <div><strong>Status:</strong> <span style="color:var(--safe);">Active</span></div>
                                </div>
                            </div>

                            <div style="background:white;border-radius:12px;padding:20px;box-shadow:var(--shadow);border-left:4px solid var(--warning);">
                                <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:15px;">
                                    <div>
                                        <h3 style="font-size:1.1rem;font-weight:600;color:var(--dark);margin-bottom:5px;">Bishanpur</h3>
                                        <p style="font-size:0.85rem;color:var(--text-secondary);margin:0;">River</p>
                                    </div>
                                    <div style="width:50px;height:50px;background:linear-gradient(135deg,var(--warning),#f57c00);border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-size:1.3rem;">
                                        <i class="fas fa-exclamation"></i>
                                    </div>
                                </div>
                                <div style="margin-bottom:12px;">
                                    <div style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                        <span style="font-size:0.85rem;color:var(--text-secondary);">Water Quality</span>
                                        <span style="font-size:0.85rem;font-weight:600;color:var(--warning);">Warning</span>
                                    </div>
                                    <div style="background:#e0e0e0;height:6px;border-radius:3px;overflow:hidden;">
                                        <div style="width:72%;height:100%;background:var(--warning);border-radius:3px;"></div>
                                    </div>
                                </div>
                                <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;font-size:0.8rem;">
                                    <div><strong>E.coli:</strong> <span style="color:var(--warning);">78 CFU</span></div>
                                    <div><strong>pH:</strong> 6.9</div>
                                    <div><strong>Population:</strong> 2,1 90</div>
                                    <div><strong>Status:</strong> <span style="color:var(--warning);">Monitor</span></div>
                                </div>
                            </div>
                        </div>

                        <!-- Summary Statistics -->
                        <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:16px;">
                            <div style="background:linear-gradient(135deg,var(--safe),#27ae60);color:white;border-radius:12px;padding:20px;text-align:center;">
                                <div style="font-size:2.5rem;font-weight:700;margin-bottom:8px;">3</div>
                                <div style="font-size:0.9rem;opacity:0.9;">Safe Locations</div>
                            </div>
                            <div style="background:linear-gradient(135deg,var(--warning),#f57c00);color:white;border-radius:12px;padding:20px;text-align:center;">
                                <div style="font-size:2.5rem;font-weight:700;margin-bottom:8px;">2</div>
                                <div style="font-size:0.9rem;opacity:0.9;">Warning Locations</div>
                            </div>
                            <div style="background:linear-gradient(135deg,var(--danger),#c62828);color:white;border-radius:12px;padding:20px;text-align:center;">
                                <div style="font-size:2.5rem;font-weight:700;margin-bottom:8px;">1</div>
                                <div style="font-size:0.9rem;opacity:0.9;">Danger Locations</div>
                            </div>
                            <div style="background:linear-gradient(135deg,var(--primary),#0d47a1);color:white;border-radius:12px;padding:20px;text-align:center;">
                                <div style="font-size:2.5rem;font-weight:700;margin-bottom:8px;">13,880</div>
                                <div style="font-size:0.9rem;opacity:0.9;">Total Population</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-section" id="water-quality-section">
                    <div class="section-header">
                        <h2 class="section-title">Water Quality Analysis</h2>
                        <div style="display:flex;gap:10px;margin-left:auto;">
                            <select style="padding:8px 15px;border:1px solid #ddd;border-radius:6px;font-size:0.9rem;">
                                <option>All Locations</option>
                                <option>Mandawa</option>
                                <option>Bijaipur</option>
                                <option>Ranakpur</option>
                                <option>Bhamatsar</option>
                                <option>Amarpura</option>
                                <option>Bishanpur</option>
                            </select>
                            <button class="btn btn-primary"><i class="fas fa-sync-alt"></i> Refresh</button>
                        </div>
                    </div>
                    <div class="section-content">
                        <!-- Water Quality Cards -->
                        <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-bottom:30px;">
                            <div style="background:white;border-radius:12px;padding:20px;box-shadow:var(--shadow);text-align:center;">
                                <div style="width:60px;height:60px;background:linear-gradient(135deg,#1a73e8,#0d47a1);border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-size:1.5rem;margin:0 auto 15px;">
                                    <i class="fas fa-flask"></i>
                                </div>
                                <div style="font-size:0.85rem;color:var(--text-secondary);margin-bottom:8px;">Average pH Level</div>
                                <div style="font-size:2rem;font-weight:700;color:var(--dark);">7.1</div>
                                <div style="font-size:0.8rem;color:var(--safe);margin-top:5px;"><i class="fas fa-check-circle"></i> Optimal Range</div>
                            </div>
                            <div style="background:white;border-radius:12px;padding:20px;box-shadow:var(--shadow);text-align:center;">
                                <div style="width:60px;height:60px;background:linear-gradient(135deg,var(--warning),#f57c00);border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-size:1.5rem;margin:0 auto 15px;">
                                    <i class="fas fa-bacteria"></i>
                                </div>
                                <div style="font-size:0.85rem;color:var(--text-secondary);margin-bottom:8px;">Avg E.coli Count</div>
                                <div style="font-size:2rem;font-weight:700;color:var(--dark);">89</div>
                                <div style="font-size:0.8rem;color:var(--warning);margin-top:5px;"><i class="fas fa-exclamation-triangle"></i> CFU/100ml</div>
                            </div>
                            <div style="background:white;border-radius:12px;padding:20px;box-shadow:var(--shadow);text-align:center;">
                                <div style="width:60px;height:60px;background:linear-gradient(135deg,var(--safe),#27ae60);border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-size:1.5rem;margin:0 auto 15px;">
                                    <i class="fas fa-tint"></i>
                                </div>
                                <div style="font-size:0.85rem;color:var(--text-secondary);margin-bottom:8px;">Turbidity (NTU)</div>
                                <div style="font-size:2rem;font-weight:700;color:var(--dark);">2.8</div>
                                <div style="font-size:0.8rem;color:var(--safe);margin-top:5px;"><i class="fas fa-check-circle"></i> Clear Water</div>
                            </div>
                            <div style="background:white;border-radius:12px;padding:20px;box-shadow:var(--shadow);text-align:center;">
                                <div style="width:60px;height:60px;background:linear-gradient(135deg,var(--danger),#c62828);border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-size:1.5rem;margin:0 auto 15px;">
                                    <i class="fas fa-viruses"></i>
                                </div>
                                <div style="font-size:0.85rem;color:var(--text-secondary);margin-bottom:8px;">Bacteria Count</div>
                                <div style="font-size:2rem;font-weight:700;color:var(--dark);">240</div>
                                <div style="font-size:0.8rem;color:var(--warning);margin-top:5px;"><i class="fas fa-exclamation-circle"></i> Moderate</div>
                            </div>
                        </div>

                        <!-- Detailed Table -->
                        <div style="background:white;border-radius:12px;padding:25px;box-shadow:var(--shadow);">
                            <h3 style="font-size:1.2rem;font-weight:600;margin-bottom:20px;color:var(--dark);">Detailed Water Quality Parameters</h3>
                            <table style="width:100%;border-collapse:collapse;">
                                <thead>
                                    <tr style="background:var(--primary-light);border-bottom:2px solid var(--primary);">
                                        <th style="padding:12px;text-align:left;font-weight:600;font-size:0.9rem;">Location</th>
                                        <th style="padding:12px;text-align:center;font-weight:600;font-size:0.9rem;">pH Level</th>
                                        <th style="padding:12px;text-align:center;font-weight:600;font-size:0.9rem;">E.coli (CFU)</th>
                                        <th style="padding:12px;text-align:center;font-weight:600;font-size:0.9rem;">Turbidity</th>
                                        <th style="padding:12px;text-align:center;font-weight:600;font-size:0.9rem;">Bacteria</th>
                                        <th style="padding:12px;text-align:center;font-weight:600;font-size:0.9rem;">Status</th>
                                        <th style="padding:12px;text-align:center;font-weight:600;font-size:0.9rem;">Last Update</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr style="border-bottom:1px solid #eee;">
                                        <td style="padding:15px;font-weight:500;">Mandawa</td>
                                        <td style="padding:15px;text-align:center;">7.2</td>
                                        <td style="padding:15px;text-align:center;">65</td>
                                        <td style="padding:15px;text-align:center;">2.1 NTU</td>
                                        <td style="padding:15px;text-align:center;">180</td>
                                        <td style="padding:15px;text-align:center;"><span style="background:var(--safe);color:white;padding:4px 12px;border-radius:12px;font-size:0.8rem;font-weight:600;">Safe</span></td>
                                        <td style="padding:15px;text-align:center;font-size:0.85rem;color:var(--text-secondary);">2 mins ago</td>
                                    </tr>
                                    <tr style="border-bottom:1px solid #eee;background:#fff5f5;">
                                        <td style="padding:15px;font-weight:500;">Bijaipur</td>
                                        <td style="padding:15px;text-align:center;">6.8</td>
                                        <td style="padding:15px;text-align:center;color:var(--danger);font-weight:600;">280</td>
                                        <td style="padding:15px;text-align:center;">4.8 NTU</td>
                                        <td style="padding:15px;text-align:center;color:var(--danger);font-weight:600;">520</td>
                                        <td style="padding:15px;text-align:center;"><span style="background:var(--danger);color:white;padding:4px 12px;border-radius:12px;font-size:0.8rem;font-weight:600;">Danger</span></td>
                                        <td style="padding:15px;text-align:center;font-size:0.85rem;color:var(--text-secondary);">5 mins ago</td>
                                    </tr>
                                    <tr style="border-bottom:1px solid #eee;">
                                        <td style="padding:15px;font-weight:500;">Ranakpur</td>
                                        <td style="padding:15px;text-align:center;">7.4</td>
                                        <td style="padding:15px;text-align:center;">15</td>
                                        <td style="padding:15px;text-align:center;">1.3 NTU</td>
                                        <td style="padding:15px;text-align:center;">95</td>
                                        <td style="padding:15px;text-align:center;"><span style="background:var(--safe);color:white;padding:4px 12px;border-radius:12px;font-size:0.8rem;font-weight:600;">Safe</span></td>
                                        <td style="padding:15px;text-align:center;font-size:0.85rem;color:var(--text-secondary);">1 min ago</td>
                                    </tr>
                                    <tr style="border-bottom:1px solid #eee;background:#fffbf0;">
                                        <td style="padding:15px;font-weight:500;">Bhamatsar</td>
                                        <td style="padding:15px;text-align:center;">6.5</td>
                                        <td style="padding:15px;text-align:center;color:var(--warning);font-weight:600;">95</td>
                                        <td style="padding:15px;text-align:center;">3.5 NTU</td>
                                        <td style="padding:15px;text-align:center;">280</td>
                                        <td style="padding:15px;text-align:center;"><span style="background:var(--warning);color:white;padding:4px 12px;border-radius:12px;font-size:0.8rem;font-weight:600;">Warning</span></td>
                                        <td style="padding:15px;text-align:center;font-size:0.85rem;color:var(--text-secondary);">8 mins ago</td>
                                    </tr>
                                    <tr style="border-bottom:1px solid #eee;">
                                        <td style="padding:15px;font-weight:500;">Amarpura</td>
                                        <td style="padding:15px;text-align:center;">7.6</td>
                                        <td style="padding:15px;text-align:center;">22</td>
                                        <td style="padding:15px;text-align:center;">1.9 NTU</td>
                                        <td style="padding:15px;text-align:center;">140</td>
                                        <td style="padding:15px;text-align:center;"><span style="background:var(--safe);color:white;padding:4px 12px;border-radius:12px;font-size:0.8rem;font-weight:600;">Safe</span></td>
                                        <td style="padding:15px;text-align:center;font-size:0.85rem;color:var(--text-secondary);">3 mins ago</td>
                                    </tr>
                                    <tr style="background:#fffbf0;">
                                        <td style="padding:15px;font-weight:500;">Bishanpur</td>
                                        <td style="padding:15px;text-align:center;">6.9</td>
                                        <td style="padding:15px;text-align:center;color:var(--warning);font-weight:600;">78</td>
                                        <td style="padding:15px;text-align:center;">3.2 NTU</td>
                                        <td style="padding:15px;text-align:center;">225</td>
                                        <td style="padding:15px;text-align:center;"><span style="background:var(--warning);color:white;padding:4px 12px;border-radius:12px;font-size:0.8rem;font-weight:600;">Warning</span></td>
                                        <td style="padding:15px;text-align:center;font-size:0.85rem;color:var(--text-secondary);">6 mins ago</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <!-- Safety Guidelines -->
                        <div style="margin-top:25px;background:linear-gradient(135deg,#e3f2fd,#bbdefb);border-radius:12px;padding:20px;border-left:4px solid var(--primary);">
                            <h4 style="font-size:1.1rem;font-weight:600;margin-bottom:12px;color:var(--dark);"><i class="fas fa-info-circle"></i> Water Safety Guidelines</h4>
                            <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:15px;font-size:0.9rem;">
                                <div><strong>pH Optimal Range:</strong> 6.5 - 8.5</div>
                                <div><strong>E.coli Safe Limit:</strong> &lt; 100 CFU/100ml</div>
                                <div><strong>Turbidity Safe:</strong> &lt; 5 NTU</div>
                                <div><strong>Bacteria Acceptable:</strong> &lt; 300 count</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-section" id="health-status-section">
                    <div class="section-header">
                        <h2 class="section-title">Community Health Status</h2>
                        <button class="btn btn-primary" style="margin-left:auto;"><i class="fas fa-sync-alt"></i> Refresh Data</button>
                    </div>
                    <div class="section-content">
                        <!-- Health Metrics -->
                        <div style="display:grid;grid-template-columns:repeat(5,1fr);gap:16px;margin-bottom:30px;">
                            <div style="background:linear-gradient(135deg,var(--safe),#27ae60);color:white;border-radius:12px;padding:20px;text-align:center;">
                                <div style="font-size:0.9rem;opacity:0.9;margin-bottom:8px;">Health Index</div>
                                <div style="font-size:2.5rem;font-weight:700;margin-bottom:5px;">86.4</div>
                                <div style="font-size:0.8rem;opacity:0.85;"><i class="fas fa-arrow-up"></i> +2.3% this week</div>
                            </div>
                            <div style="background:linear-gradient(135deg,#ff9800,#f57c00);color:white;border-radius:12px;padding:20px;text-align:center;">
                                <div style="font-size:0.9rem;opacity:0.9;margin-bottom:8px;">Active Cases</div>
                                <div style="font-size:2.5rem;font-weight:700;margin-bottom:5px;">124</div>
                                <div style="font-size:0.8rem;opacity:0.85;"><i class="fas fa-arrow-down"></i> -8 from yesterday</div>
                            </div>
                            <div style="background:linear-gradient(135deg,var(--danger),#c62828);color:white;border-radius:12px;padding:20px;text-align:center;">
                                <div style="font-size:0.9rem;opacity:0.9;margin-bottom:8px;">Critical Alerts</div>
                                <div style="font-size:2.5rem;font-weight:700;margin-bottom:5px;">3</div>
                                <div style="font-size:0.8rem;opacity:0.85;"><i class="fas fa-exclamation-triangle"></i> Needs attention</div>
                            </div>
                            <div style="background:linear-gradient(135deg,var(--primary),#0d47a1);color:white;border-radius:12px;padding:20px;text-align:center;">
                                <div style="font-size:0.9rem;opacity:0.9;margin-bottom:8px;">Recovered</div>
                                <div style="font-size:2.5rem;font-weight:700;margin-bottom:5px;">1,847</div>
                                <div style="font-size:0.8rem;opacity:0.85;"><i class="fas fa-check-circle"></i> This month</div>
                            </div>
                            <div style="background:linear-gradient(135deg,#9c27b0,#7b1fa2);color:white;border-radius:12px;padding:20px;text-align:center;">
                                <div style="font-size:0.9rem;opacity:0.9;margin-bottom:8px;">Vaccinations</div>
                                <div style="font-size:2.5rem;font-weight:700;margin-bottom:5px;">456</div>
                                <div style="font-size:0.8rem;opacity:0.85;"><i class="fas fa-syringe"></i> This week</div>
                            </div>
                        </div>

                        <!-- Disease Distribution -->
                        <div style="display:grid;grid-template-columns:2fr 1fr;gap:20px;margin-bottom:30px;">
                            <div style="background:white;border-radius:12px;padding:25px;box-shadow:var(--shadow);">
                                <h3 style="font-size:1.2rem;font-weight:600;margin-bottom:20px;color:var(--dark);">Disease Distribution by Location</h3>
                                <table style="width:100%;border-collapse:collapse;">
                                    <thead>
                                        <tr style="background:var(--primary-light);border-bottom:2px solid var(--primary);">
                                            <th style="padding:12px;text-align:left;font-weight:600;font-size:0.9rem;">Village</th>
                                            <th style="padding:12px;text-align:center;font-weight:600;font-size:0.9rem;">Waterborne</th>
                                            <th style="padding:12px;text-align:center;font-weight:600;font-size:0.9rem;">Respiratory</th>
                                            <th style="padding:12px;text-align:center;font-weight:600;font-size:0.9rem;">Vector</th>
                                            <th style="padding:12px;text-align:center;font-weight:600;font-size:0.9rem;">Total</th>
                                            <th style="padding:12px;text-align:center;font-weight:600;font-size:0.9rem;">Trend</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr style="border-bottom:1px solid #eee;">
                                            <td style="padding:15px;font-weight:500;">Mandawa</td>
                                            <td style="padding:15px;text-align:center;">8</td>
                                            <td style="padding:15px;text-align:center;">12</td>
                                            <td style="padding:15px;text-align:center;">5</td>
                                            <td style="padding:15px;text-align:center;font-weight:600;">25</td>
                                            <td style="padding:15px;text-align:center;color:var(--safe);"><i class="fas fa-arrow-down"></i> 12%</td>
                                        </tr>
                                        <tr style="border-bottom:1px solid #eee;background:#fff5f5;">
                                            <td style="padding:15px;font-weight:500;">Bijaipur</td>
                                            <td style="padding:15px;text-align:center;color:var(--danger);font-weight:600;">28</td>
                                            <td style="padding:15px;text-align:center;">9</td>
                                            <td style="padding:15px;text-align:center;">3</td>
                                            <td style="padding:15px;text-align:center;font-weight:600;color:var(--danger);">40</td>
                                            <td style="padding:15px;text-align:center;color:var(--danger);"><i class="fas fa-arrow-up"></i> 35%</td>
                                        </tr>
                                        <tr style="border-bottom:1px solid #eee;">
                                            <td style="padding:15px;font-weight:500;">Ranakpur</td>
                                            <td style="padding:15px;text-align:center;">3</td>
                                            <td style="padding:15px;text-align:center;">7</td>
                                            <td style="padding:15px;text-align:center;">2</td>
                                            <td style="padding:15px;text-align:center;font-weight:600;">12</td>
                                            <td style="padding:15px;text-align:center;color:var(--safe);"><i class="fas fa-arrow-down"></i> 8%</td>
                                        </tr>
                                        <tr style="border-bottom:1px solid #eee;background:#fffbf0;">
                                            <td style="padding:15px;font-weight:500;">Bhamatsar</td>
                                            <td style="padding:15px;text-align:center;color:var(--warning);font-weight:600;">15</td>
                                            <td style="padding:15px;text-align:center;">6</td>
                                            <td style="padding:15px;text-align:center;">4</td>
                                            <td style="padding:15px;text-align:center;font-weight:600;">25</td>
                                            <td style="padding:15px;text-align:center;color:var(--warning);"><i class="fas fa-arrow-up"></i> 18%</td>
                                        </tr>
                                        <tr style="border-bottom:1px solid #eee;">
                                            <td style="padding:15px;font-weight:500;">Amarpura</td>
                                            <td style="padding:15px;text-align:center;">4</td>
                                            <td style="padding:15px;text-align:center;">8</td>
                                            <td style="padding:15px;text-align:center;">3</td>
                                            <td style="padding:15px;text-align:center;font-weight:600;">15</td>
                                            <td style="padding:15px;text-align:center;color:var(--safe);"><i class="fas fa-minus"></i> Stable</td>
                                        </tr>
                                        <tr>
                                            <td style="padding:15px;font-weight:500;">Bishanpur</td>
                                            <td style="padding:15px;text-align:center;">6</td>
                                            <td style="padding:15px;text-align:center;">1</td>
                                            <td style="padding:15px;text-align:center;">0</td>
                                            <td style="padding:15px;text-align:center;font-weight:600;">7</td>
                                            <td style="padding:15px;text-align:center;color:var(--safe);"><i class="fas fa-arrow-down"></i> 15%</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <div>
                                <div style="background:white;border-radius:12px;padding:20px;box-shadow:var(--shadow);margin-bottom:15px;">
                                    <h4 style="font-size:1rem;font-weight:600;margin-bottom:15px;color:var(--dark);">Top Diseases</h4>
                                    <div style="margin-bottom:15px;">
                                        <div style="display:flex;justify-content:space-between;margin-bottom:5px;font-size:0.9rem;">
                                            <span>Diarrhea</span>
                                            <span style="font-weight:600;">42 cases</span>
                                        </div>
                                        <div style="background:#e0e0e0;height:8px;border-radius:4px;overflow:hidden;">
                                            <div style="width:68%;height:100%;background:var(--danger);border-radius:4px;"></div>
                                        </div>
                                    </div>
                                    <div style="margin-bottom:15px;">
                                        <div style="display:flex;justify-content:space-between;margin-bottom:5px;font-size:0.9rem;">
                                            <span>Typhoid</span>
                                            <span style="font-weight:600;">28 cases</span>
                                        </div>
                                        <div style="background:#e0e0e0;height:8px;border-radius:4px;overflow:hidden;">
                                            <div style="width:45%;height:100%;background:var(--warning);border-radius:4px;"></div>
                                        </div>
                                    </div>
                                    <div style="margin-bottom:15px;">
                                        <div style="display:flex;justify-content:space-between;margin-bottom:5px;font-size:0.9rem;">
                                            <span>Fever</span>
                                            <span style="font-weight:600;">34 cases</span>
                                        </div>
                                        <div style="background:#e0e0e0;height:8px;border-radius:4px;overflow:hidden;">
                                            <div style="width:55%;height:100%;background:var(--warning);border-radius:4px;"></div>
                                        </div>
                                    </div>
                                    <div>
                                        <div style="display:flex;justify-content:space-between;margin-bottom:5px;font-size:0.9rem;">
                                            <span>Skin Infection</span>
                                            <span style="font-weight:600;">20 cases</span>
                                        </div>
                                        <div style="background:#e0e0e0;height:8px;border-radius:4px;overflow:hidden;">
                                            <div style="width:32%;height:100%;background:var(--primary);border-radius:4px;"></div>
                                        </div>
                                    </div>
                                </div>

                                <div style="background:linear-gradient(135deg,#ff9800,#f57c00);color:white;border-radius:12px;padding:20px;text-align:center;">
                                    <div style="font-size:0.9rem;opacity:0.9;margin-bottom:10px;">Weekly Trend</div>
                                    <div style="font-size:2.5rem;font-weight:700;margin-bottom:8px;">-12%</div>
                                    <div style="font-size:0.85rem;opacity:0.9;">Cases decreasing</div>
                                </div>
                            </div>
                        </div>

                        <!-- Alert Banner -->
                        <div style="background:linear-gradient(135deg,#fff3cd,#ffeaa7);border-radius:12px;padding:20px;border-left:4px solid var(--warning);">
                            <div style="display:flex;align-items:center;gap:15px;">
                                <div style="width:50px;height:50px;background:var(--warning);border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-size:1.5rem;">
                                    <i class="fas fa-exclamation-triangle"></i>
                                </div>
                                <div style="flex:1;">
                                    <h4 style="font-size:1.1rem;font-weight:600;margin-bottom:5px;color:var(--dark);">Increased Waterborne Disease in Bijaipur</h4>
                                    <p style="font-size:0.9rem;color:var(--text-secondary);margin:0;">28 cases reported in the last 7 days. Water quality shows elevated E.coli levels. Immediate intervention recommended.</p>
                                </div>
                                <button class="btn btn-warning" style="background:var(--warning);color:white;">View Details</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Health Worker Subsections -->
                <div class="content-section" id="outbreak-management-section">
                    <div class="section-header">
                        <h2 class="section-title">Outbreak Management</h2>
                        <div style="display:flex;gap:10px;margin-left:auto;">
                            <select style="padding:8px 15px;border:1px solid #ddd;border-radius:6px;font-size:0.9rem;">
                                <option>Active Outbreaks</option>
                                <option>Under Control</option>
                                <option>Resolved</option>
                                <option>All Status</option>
                            </select>
                            <button class="btn btn-primary"><i class="fas fa-plus"></i> New Outbreak</button>
                        </div>
                    </div>
                    <div class="section-content">
                        <!-- Outbreak Status Cards -->
                        <div style="display:grid;grid-template-columns:repeat(5,1fr);gap:16px;margin-bottom:30px;">
                            <div style="background:linear-gradient(135deg,var(--danger),#c62828);color:white;border-radius:12px;padding:20px;text-align:center;">
                                <div style="font-size:0.9rem;opacity:0.9;margin-bottom:8px;">Active Outbreaks</div>
                                <div style="font-size:2.5rem;font-weight:700;margin-bottom:5px;">2</div>
                                <div style="font-size:0.8rem;opacity:0.85;"><i class="fas fa-virus"></i> Urgent attention</div>
                            </div>
                            <div style="background:linear-gradient(135deg,var(--warning),#f57c00);color:white;border-radius:12px;padding:20px;text-align:center;">
                                <div style="font-size:0.9rem;opacity:0.9;margin-bottom:8px;">Total Cases</div>
                                <div style="font-size:2.5rem;font-weight:700;margin-bottom:5px;">68</div>
                                <div style="font-size:0.8rem;opacity:0.85;"><i class="fas fa-arrow-up"></i> +35% this week</div>
                            </div>
                            <div style="background:linear-gradient(135deg,#ff5722,#f4511e);color:white;border-radius:12px;padding:20px;text-align:center;">
                                <div style="font-size:0.9rem;opacity:0.9;margin-bottom:8px;">Quarantined</div>
                                <div style="font-size:2.5rem;font-weight:700;margin-bottom:5px;">15</div>
                                <div style="font-size:0.8rem;opacity:0.85;"><i class="fas fa-home"></i> Isolated</div>
                            </div>
                            <div style="background:linear-gradient(135deg,var(--safe),#27ae60);color:white;border-radius:12px;padding:20px;text-align:center;">
                                <div style="font-size:0.9rem;opacity:0.9;margin-bottom:8px;">Recovered</div>
                                <div style="font-size:2.5rem;font-weight:700;margin-bottom:5px;">124</div>
                                <div style="font-size:0.8rem;opacity:0.85;"><i class="fas fa-check-circle"></i> This month</div>
                            </div>
                            <div style="background:linear-gradient(135deg,var(--primary),#0d47a1);color:white;border-radius:12px;padding:20px;text-align:center;">
                                <div style="font-size:0.9rem;opacity:0.9;margin-bottom:8px;">Traced Contacts</div>
                                <div style="font-size:2.5rem;font-weight:700;margin-bottom:5px;">342</div>
                                <div style="font-size:0.8rem;opacity:0.85;"><i class="fas fa-network-wired"></i> Monitored</div>
                            </div>
                        </div>

                        <!-- Active Outbreaks -->
                        <div style="background:white;border-radius:12px;padding:25px;box-shadow:var(--shadow);margin-bottom:30px;">
                            <h3 style="font-size:1.2rem;font-weight:600;margin-bottom:20px;color:var(--dark);">Active Outbreaks Tracking</h3>
                            
                            <!-- Outbreak 1: Diarrhea in Bijaipur -->
                            <div style="background:#fff5f5;border-left:5px solid var(--danger);padding:20px;border-radius:8px;margin-bottom:20px;">
                                <div style="display:flex;justify-content:space-between;align-items:start;margin-bottom:15px;">
                                    <div style="flex:1;">
                                        <div style="display:flex;align-items:center;gap:12px;margin-bottom:10px;">
                                            <span style="background:var(--danger);color:white;padding:5px 15px;border-radius:12px;font-size:0.85rem;font-weight:600;">CRITICAL OUTBREAK</span>
                                            <span style="font-family:monospace;font-size:0.9rem;color:var(--text-secondary);">OUT-2025-001</span>
                                            <span style="font-size:0.85rem;color:var(--text-secondary);">Started: Dec 1, 2025</span>
                                        </div>
                                        <h4 style="font-size:1.3rem;font-weight:700;color:var(--dark);margin-bottom:10px;">Acute Diarrhea Outbreak - Bijaipur</h4>
                                        <p style="font-size:0.95rem;color:var(--text-secondary);margin-bottom:15px;line-height:1.6;">Waterborne disease outbreak affecting 42 residents. Correlation confirmed with E.coli contamination (280 CFU/100ml) in primary water source. Attack rate: 2.2%</p>
                                        
                                        <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:15px;margin-bottom:15px;">
                                            <div style="background:white;padding:12px;border-radius:6px;">
                                                <div style="font-size:0.8rem;color:var(--text-secondary);margin-bottom:5px;">Total Cases</div>
                                                <div style="font-size:1.8rem;font-weight:700;color:var(--danger);">42</div>
                                            </div>
                                            <div style="background:white;padding:12px;border-radius:6px;">
                                                <div style="font-size:0.8rem;color:var(--text-secondary);margin-bottom:5px;">New Today</div>
                                                <div style="font-size:1.8rem;font-weight:700;color:var(--warning);">8</div>
                                            </div>
                                            <div style="background:white;padding:12px;border-radius:6px;">
                                                <div style="font-size:0.8rem;color:var(--text-secondary);margin-bottom:5px;">Hospitalized</div>
                                                <div style="font-size:1.8rem;font-weight:700;color:var(--danger);">12</div>
                                            </div>
                                            <div style="background:white;padding:12px;border-radius:6px;">
                                                <div style="font-size:0.8rem;color:var(--text-secondary);margin-bottom:5px;">Deaths</div>
                                                <div style="font-size:1.8rem;font-weight:700;color:var(--dark);">0</div>
                                            </div>
                                        </div>

                                        <div style="background:white;padding:15px;border-radius:8px;margin-bottom:15px;">
                                            <div style="font-size:0.9rem;font-weight:600;margin-bottom:10px;color:var(--dark);">Response Actions Taken:</div>
                                            <div style="display:grid;gap:8px;font-size:0.85rem;">
                                                <div style="display:flex;align-items:center;gap:8px;">
                                                    <i class="fas fa-check-circle" style="color:var(--safe);"></i>
                                                    <span>Water source shut down and alternative supply arranged</span>
                                                </div>
                                                <div style="display:flex;align-items:center;gap:8px;">
                                                    <i class="fas fa-check-circle" style="color:var(--safe);"></i>
                                                    <span>342 contacts traced and under surveillance</span>
                                                </div>
                                                <div style="display:flex;align-items:center;gap:8px;">
                                                    <i class="fas fa-check-circle" style="color:var(--safe);"></i>
                                                    <span>ORS (Oral Rehydration Solution) distributed to 156 households</span>
                                                </div>
                                                <div style="display:flex;align-items:center;gap:8px;">
                                                    <i class="fas fa-spinner" style="color:var(--warning);"></i>
                                                    <span>Water treatment and sanitation campaign ongoing</span>
                                                </div>
                                            </div>
                                        </div>

                                        <div style="display:flex;gap:15px;font-size:0.9rem;">
                                            <div><strong>Location:</strong> Bijaipur Village</div>
                                            <div><strong>Population at Risk:</strong> 1,890</div>
                                            <div><strong>Response Team:</strong> Team Alpha (8 members)</div>
                                            <div><strong>Status:</strong> <span style="color:var(--danger);font-weight:600;">Escalating</span></div>
                                        </div>
                                    </div>
                                    <div style="display:flex;flex-direction:column;gap:8px;margin-left:15px;">
                                        <button class="btn" style="background:var(--danger);color:white;font-size:0.85rem;white-space:nowrap;">Emergency Response</button>
                                        <button class="btn btn-outline" style="font-size:0.85rem;">View Details</button>
                                        <button class="btn btn-outline" style="font-size:0.85rem;">Contact Map</button>
                                    </div>
                                </div>

                                <!-- Progress Bar -->
                                <div style="margin-top:15px;">
                                    <div style="display:flex;justify-content:space-between;margin-bottom:5px;font-size:0.85rem;">
                                        <span>Outbreak Control Progress</span>
                                        <span style="font-weight:600;">35%</span>
                                    </div>
                                    <div style="background:#e0e0e0;height:10px;border-radius:5px;overflow:hidden;">
                                        <div style="width:35%;height:100%;background:var(--warning);border-radius:5px;"></div>
                                    </div>
                                </div>
                            </div>

                            <!-- Outbreak 2: Typhoid in Bhamatsar -->
                            <div style="background:#fffbf0;border-left:5px solid var(--warning);padding:20px;border-radius:8px;">
                                <div style="display:flex;justify-content:space-between;align-items:start;margin-bottom:15px;">
                                    <div style="flex:1;">
                                        <div style="display:flex;align-items:center;gap:12px;margin-bottom:10px;">
                                            <span style="background:var(--warning);color:white;padding:5px 15px;border-radius:12px;font-size:0.85rem;font-weight:600;">ACTIVE OUTBREAK</span>
                                            <span style="font-family:monospace;font-size:0.9rem;color:var(--text-secondary);">OUT-2025-002</span>
                                            <span style="font-size:0.85rem;color:var(--text-secondary);">Started: Nov 28, 2025</span>
                                        </div>
                                        <h4 style="font-size:1.3rem;font-weight:700;color:var(--dark);margin-bottom:10px;">Typhoid Fever - Bhamatsar</h4>
                                        <p style="font-size:0.95rem;color:var(--text-secondary);margin-bottom:15px;line-height:1.6;">Confirmed typhoid cases linked to contaminated pond water. Blood culture positive for 18 cases. Antibiotic resistance detected in 3 strains.</p>
                                        
                                        <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:15px;margin-bottom:15px;">
                                            <div style="background:white;padding:12px;border-radius:6px;">
                                                <div style="font-size:0.8rem;color:var(--text-secondary);margin-bottom:5px;">Total Cases</div>
                                                <div style="font-size:1.8rem;font-weight:700;color:var(--warning);">26</div>
                                            </div>
                                            <div style="background:white;padding:12px;border-radius:6px;">
                                                <div style="font-size:0.8rem;color:var(--text-secondary);margin-bottom:5px;">New Today</div>
                                                <div style="font-size:1.8rem;font-weight:700;color:var(--primary);">2</div>
                                            </div>
                                            <div style="background:white;padding:12px;border-radius:6px;">
                                                <div style="font-size:0.8rem;color:var(--text-secondary);margin-bottom:5px;">Hospitalized</div>
                                                <div style="font-size:1.8rem;font-weight:700;color:var(--warning);">6</div>
                                            </div>
                                            <div style="background:white;padding:12px;border-radius:6px;">
                                                <div style="font-size:0.8rem;color:var(--text-secondary);margin-bottom:5px;">Recovered</div>
                                                <div style="font-size:1.8rem;font-weight:700;color:var(--safe);">8</div>
                                            </div>
                                        </div>

                                        <div style="background:white;padding:15px;border-radius:8px;margin-bottom:15px;">
                                            <div style="font-size:0.9rem;font-weight:600;margin-bottom:10px;color:var(--dark);">Response Actions Taken:</div>
                                            <div style="display:grid;gap:8px;font-size:0.85rem;">
                                                <div style="display:flex;align-items:center;gap:8px;">
                                                    <i class="fas fa-check-circle" style="color:var(--safe);"></i>
                                                    <span>All suspected cases provided antibiotic treatment</span>
                                                </div>
                                                <div style="display:flex;align-items:center;gap:8px;">
                                                    <i class="fas fa-check-circle" style="color:var(--safe);"></i>
                                                    <span>Pond water chlorinated and marked unsafe</span>
                                                </div>
                                                <div style="display:flex;align-items:center;gap:8px;">
                                                    <i class="fas fa-check-circle" style="color:var(--safe);"></i>
                                                    <span>Vaccination campaign initiated for 450 residents</span>
                                                </div>
                                                <div style="display:flex;align-items:center;gap:8px;">
                                                    <i class="fas fa-check-circle" style="color:var(--safe);"></i>
                                                    <span>Health education sessions conducted in 45 households</span>
                                                </div>
                                            </div>
                                        </div>

                                        <div style="display:flex;gap:15px;font-size:0.9rem;">
                                            <div><strong>Location:</strong> Bhamatsar Village</div>
                                            <div><strong>Population at Risk:</strong> 1,560</div>
                                            <div><strong>Response Team:</strong> Team Beta (6 members)</div>
                                            <div><strong>Status:</strong> <span style="color:var(--warning);font-weight:600;">Stabilizing</span></div>
                                        </div>
                                    </div>
                                    <div style="display:flex;flex-direction:column;gap:8px;margin-left:15px;">
                                        <button class="btn btn-warning" style="font-size:0.85rem;white-space:nowrap;">Monitor Outbreak</button>
                                        <button class="btn btn-outline" style="font-size:0.85rem;">View Details</button>
                                        <button class="btn btn-outline" style="font-size:0.85rem;">Case List</button>
                                    </div>
                                </div>

                                <!-- Progress Bar -->
                                <div style="margin-top:15px;">
                                    <div style="display:flex;justify-content:space-between;margin-bottom:5px;font-size:0.85rem;">
                                        <span>Outbreak Control Progress</span>
                                        <span style="font-weight:600;">68%</span>
                                    </div>
                                    <div style="background:#e0e0e0;height:10px;border-radius:5px;overflow:hidden;">
                                        <div style="width:68%;height:100%;background:var(--safe);border-radius:5px;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Resource Allocation -->
                        <div style="display:grid;grid-template-columns:2fr 1fr;gap:20px;margin-bottom:30px;">
                            <div style="background:white;border-radius:12px;padding:25px;box-shadow:var(--shadow);">
                                <h3 style="font-size:1.2rem;font-weight:600;margin-bottom:20px;color:var(--dark);">Resource Allocation & Utilization</h3>
                                <table style="width:100%;border-collapse:collapse;">
                                    <thead>
                                        <tr style="background:var(--primary-light);border-bottom:2px solid var(--primary);">
                                            <th style="padding:12px;text-align:left;font-weight:600;font-size:0.9rem;">Resource Type</th>
                                            <th style="padding:12px;text-align:center;font-weight:600;font-size:0.9rem;">Allocated</th>
                                            <th style="padding:12px;text-align:center;font-weight:600;font-size:0.9rem;">Used</th>
                                            <th style="padding:12px;text-align:center;font-weight:600;font-size:0.9rem;">Available</th>
                                            <th style="padding:12px;text-align:center;font-weight:600;font-size:0.9rem;">Status</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr style="border-bottom:1px solid #eee;">
                                            <td style="padding:15px;font-weight:500;">Medical Personnel</td>
                                            <td style="padding:15px;text-align:center;">14</td>
                                            <td style="padding:15px;text-align:center;">14</td>
                                            <td style="padding:15px;text-align:center;color:var(--danger);font-weight:600;">0</td>
                                            <td style="padding:15px;text-align:center;"><span style="background:var(--danger);color:white;padding:4px 10px;border-radius:12px;font-size:0.8rem;">Full</span></td>
                                        </tr>
                                        <tr style="border-bottom:1px solid #eee;background:#f9f9f9;">
                                            <td style="padding:15px;font-weight:500;">ORS Packets</td>
                                            <td style="padding:15px;text-align:center;">2,000</td>
                                            <td style="padding:15px;text-align:center;">1,245</td>
                                            <td style="padding:15px;text-align:center;color:var(--safe);font-weight:600;">755</td>
                                            <td style="padding:15px;text-align:center;"><span style="background:var(--safe);color:white;padding:4px 10px;border-radius:12px;font-size:0.8rem;">Good</span></td>
                                        </tr>
                                        <tr style="border-bottom:1px solid #eee;">
                                            <td style="padding:15px;font-weight:500;">Antibiotics</td>
                                            <td style="padding:15px;text-align:center;">500</td>
                                            <td style="padding:15px;text-align:center;">342</td>
                                            <td style="padding:15px;text-align:center;color:var(--warning);font-weight:600;">158</td>
                                            <td style="padding:15px;text-align:center;"><span style="background:var(--warning);color:white;padding:4px 10px;border-radius:12px;font-size:0.8rem;">Low</span></td>
                                        </tr>
                                        <tr style="border-bottom:1px solid #eee;background:#f9f9f9;">
                                            <td style="padding:15px;font-weight:500;">Test Kits</td>
                                            <td style="padding:15px;text-align:center;">200</td>
                                            <td style="padding:15px;text-align:center;">87</td>
                                            <td style="padding:15px;text-align:center;color:var(--safe);font-weight:600;">113</td>
                                            <td style="padding:15px;text-align:center;"><span style="background:var(--safe);color:white;padding:4px 10px;border-radius:12px;font-size:0.8rem;">Good</span></td>
                                        </tr>
                                        <tr style="background:#f9f9f9;">
                                            <td style="padding:15px;font-weight:500;">Isolation Beds</td>
                                            <td style="padding:15px;text-align:center;">25</td>
                                            <td style="padding:15px;text-align:center;">18</td>
                                            <td style="padding:15px;text-align:center;color:var(--warning);font-weight:600;">7</td>
                                            <td style="padding:15px;text-align:center;"><span style="background:var(--warning);color:white;padding:4px 10px;border-radius:12px;font-size:0.8rem;">Limited</span></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <div>
                                <div style="background:white;border-radius:12px;padding:20px;box-shadow:var(--shadow);margin-bottom:15px;">
                                    <h4 style="font-size:1rem;font-weight:600;margin-bottom:15px;color:var(--dark);">Response Teams</h4>
                                    <div style="margin-bottom:15px;">
                                        <div style="display:flex;justify-content:space-between;margin-bottom:8px;">
                                            <span style="font-size:0.85rem;font-weight:500;">Team Alpha</span>
                                            <span style="background:var(--danger);color:white;padding:2px 8px;border-radius:10px;font-size:0.75rem;">Active</span>
                                        </div>
                                        <div style="font-size:0.8rem;color:var(--text-secondary);">8 members  Bijaipur</div>
                                    </div>
                                    <div style="margin-bottom:15px;">
                                        <div style="display:flex;justify-content:space-between;margin-bottom:8px;">
                                            <span style="font-size:0.85rem;font-weight:500;">Team Beta</span>
                                            <span style="background:var(--warning);color:white;padding:2px 8px;border-radius:10px;font-size:0.75rem;">Active</span>
                                        </div>
                                        <div style="font-size:0.8rem;color:var(--text-secondary);">6 members  Bhamatsar</div>
                                    </div>
                                    <div style="margin-bottom:15px;">
                                        <div style="display:flex;justify-content:space-between;margin-bottom:8px;">
                                            <span style="font-size:0.85rem;font-weight:500;">Team Gamma</span>
                                            <span style="background:var(--safe);color:white;padding:2px 8px;border-radius:10px;font-size:0.75rem;">Standby</span>
                                        </div>
                                        <div style="font-size:0.8rem;color:var(--text-secondary);">7 members  Reserve</div>
                                    </div>
                                    <div>
                                        <div style="display:flex;justify-content:space-between;margin-bottom:8px;">
                                            <span style="font-size:0.85rem;font-weight:500;">Team Delta</span>
                                            <span style="background:var(--safe);color:white;padding:2px 8px;border-radius:10px;font-size:0.75rem;">Standby</span>
                                        </div>
                                        <div style="font-size:0.8rem;color:var(--text-secondary);">5 members  Reserve</div>
                                    </div>
                                </div>

                                <div style="background:linear-gradient(135deg,#ffebee,#ffcdd2);border-radius:12px;padding:20px;border-left:4px solid var(--danger);">
                                    <h4 style="font-size:0.95rem;font-weight:600;margin-bottom:10px;color:var(--dark);"><i class="fas fa-exclamation-triangle"></i> Critical Alert</h4>
                                    <div style="font-size:0.85rem;line-height:1.6;">
                                        <strong>Resource Alert:</strong> Medical personnel at full capacity. Antibiotics and isolation beds running low. Request immediate replenishment.
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Intervention Effectiveness -->
                        <div style="background:linear-gradient(135deg,#e3f2fd,#bbdefb);border-radius:12px;padding:20px;border-left:4px solid var(--primary);">
                            <h4 style="font-size:1.1rem;font-weight:600;margin-bottom:15px;color:var(--dark);"><i class="fas fa-chart-line"></i> Intervention Effectiveness Metrics</h4>
                            <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:15px;font-size:0.9rem;">
                                <div>
                                    <strong>Case Fatality Rate:</strong> 0%
                                    <div style="background:#e0e0e0;height:6px;border-radius:3px;overflow:hidden;margin-top:5px;">
                                        <div style="width:0%;height:100%;background:var(--safe);border-radius:3px;"></div>
                                    </div>
                                </div>
                                <div>
                                    <strong>Recovery Rate:</strong> 68%
                                    <div style="background:#e0e0e0;height:6px;border-radius:3px;overflow:hidden;margin-top:5px;">
                                        <div style="width:68%;height:100%;background:var(--safe);border-radius:3px;"></div>
                                    </div>
                                </div>
                                <div>
                                    <strong>Contact Trace Rate:</strong> 95%
                                    <div style="background:#e0e0e0;height:6px;border-radius:3px;overflow:hidden;margin-top:5px;">
                                        <div style="width:95%;height:100%;background:var(--safe);border-radius:3px;"></div>
                                    </div>
                                </div>
                                <div>
                                    <strong>Response Time:</strong> <1 hour
                                    <div style="background:#e0e0e0;height:6px;border-radius:3px;overflow:hidden;margin-top:5px;">
                                        <div style="width:100%;height:100%;background:var(--safe);border-radius:3px;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-section" id="response-teams-section">
                    <div class="section-header">
                        <h2 class="section-title">Response Teams</h2>
                        <div style="display:flex;gap:10px;margin-left:auto;">
                            <select style="padding:8px 15px;border:1px solid #ddd;border-radius:6px;font-size:0.9rem;">
                                <option>All Teams</option>
                                <option>Active Deployment</option>
                                <option>Standby</option>
                                <option>Off Duty</option>
                            </select>
                            <button class="btn btn-primary"><i class="fas fa-user-plus"></i> Add Member</button>
                        </div>
                    </div>
                    <div class="section-content">
                        <!-- Team Overview Cards -->
                        <div style="display:grid;grid-template-columns:repeat(5,1fr);gap:16px;margin-bottom:30px;">
                            <div style="background:linear-gradient(135deg,var(--primary),#0d47a1);color:white;border-radius:12px;padding:20px;text-align:center;">
                                <div style="font-size:0.9rem;opacity:0.9;margin-bottom:8px;">Total Teams</div>
                                <div style="font-size:2.5rem;font-weight:700;margin-bottom:5px;">4</div>
                                <div style="font-size:0.8rem;opacity:0.85;"><i class="fas fa-users"></i> 26 members</div>
                            </div>
                            <div style="background:linear-gradient(135deg,var(--danger),#c62828);color:white;border-radius:12px;padding:20px;text-align:center;">
                                <div style="font-size:0.9rem;opacity:0.9;margin-bottom:8px;">Active Deployment</div>
                                <div style="font-size:2.5rem;font-weight:700;margin-bottom:5px;">2</div>
                                <div style="font-size:0.8rem;opacity:0.85;"><i class="fas fa-ambulance"></i> On field</div>
                            </div>
                            <div style="background:linear-gradient(135deg,var(--safe),#27ae60);color:white;border-radius:12px;padding:20px;text-align:center;">
                                <div style="font-size:0.9rem;opacity:0.9;margin-bottom:8px;">Standby</div>
                                <div style="font-size:2.5rem;font-weight:700;margin-bottom:5px;">2</div>
                                <div style="font-size:0.8rem;opacity:0.85;"><i class="fas fa-check-circle"></i> Ready</div>
                            </div>
                            <div style="background:linear-gradient(135deg,#ff9800,#f57c00);color:white;border-radius:12px;padding:20px;text-align:center;">
                                <div style="font-size:0.9rem;opacity:0.9;margin-bottom:8px;">Avg Response</div>
                                <div style="font-size:2.5rem;font-weight:700;margin-bottom:5px;">42</div>
                                <div style="font-size:0.8rem;opacity:0.85;"><i class="fas fa-clock"></i> minutes</div>
                            </div>
                            <div style="background:linear-gradient(135deg,#9c27b0,#7b1fa2);color:white;border-radius:12px;padding:20px;text-align:center;">
                                <div style="font-size:0.9rem;opacity:0.9;margin-bottom:8px;">Operations</div>
                                <div style="font-size:2.5rem;font-weight:700;margin-bottom:5px;">18</div>
                                <div style="font-size:0.8rem;opacity:0.85;"><i class="fas fa-tasks"></i> This month</div>
                            </div>
                        </div>

                        <!-- Team Roster -->
                        <div style="background:white;border-radius:12px;padding:25px;box-shadow:var(--shadow);margin-bottom:30px;">
                            <h3 style="font-size:1.2rem;font-weight:600;margin-bottom:20px;color:var(--dark);">Team Roster & Deployment</h3>
                            <table style="width:100%;border-collapse:collapse;">
                                <thead>
                                    <tr style="background:var(--primary-light);border-bottom:2px solid var(--primary);">
                                        <th style="padding:12px;text-align:left;font-weight:600;font-size:0.9rem;">Team</th>
                                        <th style="padding:12px;text-align:left;font-weight:600;font-size:0.9rem;">Lead Officer</th>
                                        <th style="padding:12px;text-align:center;font-weight:600;font-size:0.9rem;">Members</th>
                                        <th style="padding:12px;text-align:left;font-weight:600;font-size:0.9rem;">Specialization</th>
                                        <th style="padding:12px;text-align:left;font-weight:600;font-size:0.9rem;">Current Location</th>
                                        <th style="padding:12px;text-align:center;font-weight:600;font-size:0.9rem;">Status</th>
                                        <th style="padding:12px;text-align:center;font-weight:600;font-size:0.9rem;">Last Deploy</th>
                                        <th style="padding:12px;text-align:center;font-weight:600;font-size:0.9rem;">Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr style="border-bottom:1px solid #eee;">
                                        <td style="padding:15px;">
                                            <div style="font-weight:600;color:var(--dark);margin-bottom:3px;">Team Alpha</div>
                                            <div style="font-size:0.8rem;color:var(--text-secondary);font-family:monospace;">TEAM-A-001</div>
                                        </td>
                                        <td style="padding:15px;">
                                            <div style="display:flex;align-items:center;gap:10px;">
                                                <div style="width:35px;height:35px;border-radius:50%;background:linear-gradient(135deg,#1976d2,#0d47a1);display:flex;align-items:center;justify-content:center;color:white;font-weight:600;">DR</div>
                                                <div>
                                                    <div style="font-weight:500;">Dr. Rajesh Kumar</div>
                                                    <div style="font-size:0.8rem;color:var(--text-secondary);">Sr. Medical Officer</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td style="padding:15px;text-align:center;font-weight:600;">8</td>
                                        <td style="padding:15px;">
                                            <div style="font-size:0.85rem;">Waterborne Diseases</div>
                                            <div style="font-size:0.75rem;color:var(--text-secondary);">Emergency Response</div>
                                        </td>
                                        <td style="padding:15px;">
                                            <div style="font-weight:500;">Bijaipur Village</div>
                                            <div style="font-size:0.8rem;color:var(--text-secondary);"><i class="fas fa-map-marker-alt"></i> Active Site</div>
                                        </td>
                                        <td style="padding:15px;text-align:center;">
                                            <span style="background:var(--danger);color:white;padding:6px 14px;border-radius:12px;font-size:0.8rem;font-weight:600;">Active</span>
                                        </td>
                                        <td style="padding:15px;text-align:center;font-size:0.85rem;">Dec 1, 2025</td>
                                        <td style="padding:15px;text-align:center;">
                                            <button class="btn btn-outline" style="font-size:0.8rem;padding:5px 10px;">View Details</button>
                                        </td>
                                    </tr>
                                    <tr style="border-bottom:1px solid #eee;background:#f9f9f9;">
                                        <td style="padding:15px;">
                                            <div style="font-weight:600;color:var(--dark);margin-bottom:3px;">Team Beta</div>
                                            <div style="font-size:0.8rem;color:var(--text-secondary);font-family:monospace;">TEAM-B-002</div>
                                        </td>
                                        <td style="padding:15px;">
                                            <div style="display:flex;align-items:center;gap:10px;">
                                                <div style="width:35px;height:35px;border-radius:50%;background:linear-gradient(135deg,#e91e63,#c2185b);display:flex;align-items:center;justify-content:center;color:white;font-weight:600;">PS</div>
                                                <div>
                                                    <div style="font-weight:500;">Dr. Priya Sharma</div>
                                                    <div style="font-size:0.8rem;color:var(--text-secondary);">Medical Officer</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td style="padding:15px;text-align:center;font-weight:600;">6</td>
                                        <td style="padding:15px;">
                                            <div style="font-size:0.85rem;">Infectious Diseases</div>
                                            <div style="font-size:0.75rem;color:var(--text-secondary);">Vaccination</div>
                                        </td>
                                        <td style="padding:15px;">
                                            <div style="font-weight:500;">Bhamatsar Village</div>
                                            <div style="font-size:0.8rem;color:var(--text-secondary);"><i class="fas fa-map-marker-alt"></i> Active Site</div>
                                        </td>
                                        <td style="padding:15px;text-align:center;">
                                            <span style="background:var(--warning);color:white;padding:6px 14px;border-radius:12px;font-size:0.8rem;font-weight:600;">Active</span>
                                        </td>
                                        <td style="padding:15px;text-align:center;font-size:0.85rem;">Nov 28, 2025</td>
                                        <td style="padding:15px;text-align:center;">
                                            <button class="btn btn-outline" style="font-size:0.8rem;padding:5px 10px;">View Details</button>
                                        </td>
                                    </tr>
                                    <tr style="border-bottom:1px solid #eee;">
                                        <td style="padding:15px;">
                                            <div style="font-weight:600;color:var(--dark);margin-bottom:3px;">Team Gamma</div>
                                            <div style="font-size:0.8rem;color:var(--text-secondary);font-family:monospace;">TEAM-G-003</div>
                                        </td>
                                        <td style="padding:15px;">
                                            <div style="display:flex;align-items:center;gap:10px;">
                                                <div style="width:35px;height:35px;border-radius:50%;background:linear-gradient(135deg,#4caf50,#388e3c);display:flex;align-items:center;justify-content:center;color:white;font-weight:600;">AS</div>
                                                <div>
                                                    <div style="font-weight:500;">Mr. Anil Singh</div>
                                                    <div style="font-size:0.8rem;color:var(--text-secondary);">Senior Coordinator</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td style="padding:15px;text-align:center;font-weight:600;">7</td>
                                        <td style="padding:15px;">
                                            <div style="font-size:0.85rem;">General Health</div>
                                            <div style="font-size:0.75rem;color:var(--text-secondary);">Community Outreach</div>
                                        </td>
                                        <td style="padding:15px;">
                                            <div style="font-weight:500;">Health Center</div>
                                            <div style="font-size:0.8rem;color:var(--text-secondary);"><i class="fas fa-hospital"></i> Base Location</div>
                                        </td>
                                        <td style="padding:15px;text-align:center;">
                                            <span style="background:var(--safe);color:white;padding:6px 14px;border-radius:12px;font-size:0.8rem;font-weight:600;">Standby</span>
                                        </td>
                                        <td style="padding:15px;text-align:center;font-size:0.85rem;">Nov 24, 2025</td>
                                        <td style="padding:15px;text-align:center;">
                                            <button class="btn btn-outline" style="font-size:0.8rem;padding:5px 10px;">View Details</button>
                                        </td>
                                    </tr>
                                    <tr style="background:#f9f9f9;">
                                        <td style="padding:15px;">
                                            <div style="font-weight:600;color:var(--dark);margin-bottom:3px;">Team Delta</div>
                                            <div style="font-size:0.8rem;color:var(--text-secondary);font-family:monospace;">TEAM-D-004</div>
                                        </td>
                                        <td style="padding:15px;">
                                            <div style="display:flex;align-items:center;gap:10px;">
                                                <div style="width:35px;height:35px;border-radius:50%;background:linear-gradient(135deg,#ff9800,#f57c00);display:flex;align-items:center;justify-content:center;color:white;font-weight:600;">MP</div>
                                                <div>
                                                    <div style="font-weight:500;">Ms. Meera Patel</div>
                                                    <div style="font-size:0.8rem;color:var(--text-secondary);">Nurse Supervisor</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td style="padding:15px;text-align:center;font-weight:600;">5</td>
                                        <td style="padding:15px;">
                                            <div style="font-size:0.85rem;">Vector Control</div>
                                            <div style="font-size:0.75rem;color:var(--text-secondary);">Environmental Health</div>
                                        </td>
                                        <td style="padding:15px;">
                                            <div style="font-weight:500;">Health Center</div>
                                            <div style="font-size:0.8rem;color:var(--text-secondary);"><i class="fas fa-hospital"></i> Base Location</div>
                                        </td>
                                        <td style="padding:15px;text-align:center;">
                                            <span style="background:var(--safe);color:white;padding:6px 14px;border-radius:12px;font-size:0.8rem;font-weight:600;">Standby</span>
                                        </td>
                                        <td style="padding:15px;text-align:center;font-size:0.85rem;">Nov 22, 2025</td>
                                        <td style="padding:15px;text-align:center;">
                                            <button class="btn btn-outline" style="font-size:0.8rem;padding:5px 10px;">View Details</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <!-- Deployment History & Resource Inventory -->
                        <div style="display:grid;grid-template-columns:2fr 1fr;gap:20px;margin-bottom:30px;">
                            <div style="background:white;border-radius:12px;padding:25px;box-shadow:var(--shadow);">
                                <h3 style="font-size:1.2rem;font-weight:600;margin-bottom:20px;color:var(--dark);">Recent Deployment History</h3>
                                <table style="width:100%;border-collapse:collapse;">
                                    <thead>
                                        <tr style="background:#f5f5f5;border-bottom:2px solid #ddd;">
                                            <th style="padding:12px;text-align:left;font-weight:600;font-size:0.85rem;">Date</th>
                                            <th style="padding:12px;text-align:left;font-weight:600;font-size:0.85rem;">Team</th>
                                            <th style="padding:12px;text-align:left;font-weight:600;font-size:0.85rem;">Mission</th>
                                            <th style="padding:12px;text-align:left;font-weight:600;font-size:0.85rem;">Location</th>
                                            <th style="padding:12px;text-align:center;font-weight:600;font-size:0.85rem;">Duration</th>
                                            <th style="padding:12px;text-align:center;font-weight:600;font-size:0.85rem;">Outcome</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr style="border-bottom:1px solid #eee;">
                                            <td style="padding:12px;font-size:0.85rem;">Dec 1, 2025</td>
                                            <td style="padding:12px;font-size:0.85rem;font-weight:500;">Team Alpha</td>
                                            <td style="padding:12px;font-size:0.85rem;">Diarrhea Outbreak</td>
                                            <td style="padding:12px;font-size:0.85rem;">Bijaipur</td>
                                            <td style="padding:12px;text-align:center;font-size:0.85rem;">4 days</td>
                                            <td style="padding:12px;text-align:center;"><span style="background:var(--warning);color:white;padding:3px 10px;border-radius:10px;font-size:0.75rem;">Ongoing</span></td>
                                        </tr>
                                        <tr style="border-bottom:1px solid #eee;background:#f9f9f9;">
                                            <td style="padding:12px;font-size:0.85rem;">Nov 28, 2025</td>
                                            <td style="padding:12px;font-size:0.85rem;font-weight:500;">Team Beta</td>
                                            <td style="padding:12px;font-size:0.85rem;">Typhoid Response</td>
                                            <td style="padding:12px;font-size:0.85rem;">Bhamatsar</td>
                                            <td style="padding:12px;text-align:center;font-size:0.85rem;">7 days</td>
                                            <td style="padding:12px;text-align:center;"><span style="background:var(--warning);color:white;padding:3px 10px;border-radius:10px;font-size:0.75rem;">Ongoing</span></td>
                                        </tr>
                                        <tr style="border-bottom:1px solid #eee;">
                                            <td style="padding:12px;font-size:0.85rem;">Nov 24, 2025</td>
                                            <td style="padding:12px;font-size:0.85rem;font-weight:500;">Team Gamma</td>
                                            <td style="padding:12px;font-size:0.85rem;">Health Screening</td>
                                            <td style="padding:12px;font-size:0.85rem;">Mandawa</td>
                                            <td style="padding:12px;text-align:center;font-size:0.85rem;">2 days</td>
                                            <td style="padding:12px;text-align:center;"><span style="background:var(--safe);color:white;padding:3px 10px;border-radius:10px;font-size:0.75rem;">Success</span></td>
                                        </tr>
                                        <tr style="border-bottom:1px solid #eee;background:#f9f9f9;">
                                            <td style="padding:12px;font-size:0.85rem;">Nov 22, 2025</td>
                                            <td style="padding:12px;font-size:0.85rem;font-weight:500;">Team Delta</td>
                                            <td style="padding:12px;font-size:0.85rem;">Mosquito Control</td>
                                            <td style="padding:12px;font-size:0.85rem;">Amarpura</td>
                                            <td style="padding:12px;text-align:center;font-size:0.85rem;">3 days</td>
                                            <td style="padding:12px;text-align:center;"><span style="background:var(--safe);color:white;padding:3px 10px;border-radius:10px;font-size:0.75rem;">Success</span></td>
                                        </tr>
                                        <tr style="border-bottom:1px solid #eee;">
                                            <td style="padding:12px;font-size:0.85rem;">Nov 18, 2025</td>
                                            <td style="padding:12px;font-size:0.85rem;font-weight:500;">Team Alpha</td>
                                            <td style="padding:12px;font-size:0.85rem;">Vaccination Drive</td>
                                            <td style="padding:12px;font-size:0.85rem;">Ranakpur</td>
                                            <td style="padding:12px;text-align:center;font-size:0.85rem;">1 day</td>
                                            <td style="padding:12px;text-align:center;"><span style="background:var(--safe);color:white;padding:3px 10px;border-radius:10px;font-size:0.75rem;">Success</span></td>
                                        </tr>
                                        <tr style="background:#f9f9f9;">
                                            <td style="padding:12px;font-size:0.85rem;">Nov 15, 2025</td>
                                            <td style="padding:12px;font-size:0.85rem;font-weight:500;">Team Beta</td>
                                            <td style="padding:12px;font-size:0.85rem;">Water Testing</td>
                                            <td style="padding:12px;font-size:0.85rem;">Bishanpur</td>
                                            <td style="padding:12px;text-align:center;font-size:0.85rem;">1 day</td>
                                            <td style="padding:12px;text-align:center;"><span style="background:var(--safe);color:white;padding:3px 10px;border-radius:10px;font-size:0.75rem;">Success</span></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <div>
                                <div style="background:white;border-radius:12px;padding:20px;box-shadow:var(--shadow);margin-bottom:15px;">
                                    <h4 style="font-size:1rem;font-weight:600;margin-bottom:15px;color:var(--dark);">Equipment Inventory</h4>
                                    <div style="margin-bottom:15px;padding-bottom:15px;border-bottom:1px solid #eee;">
                                        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
                                            <span style="font-size:0.85rem;font-weight:500;">Medical Kits</span>
                                            <span style="background:var(--safe);color:white;padding:3px 10px;border-radius:10px;font-size:0.75rem;font-weight:600;">12</span>
                                        </div>
                                        <div style="background:#e0e0e0;height:6px;border-radius:3px;overflow:hidden;">
                                            <div style="width:80%;height:100%;background:var(--safe);border-radius:3px;"></div>
                                        </div>
                                    </div>
                                    <div style="margin-bottom:15px;padding-bottom:15px;border-bottom:1px solid #eee;">
                                        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
                                            <span style="font-size:0.85rem;font-weight:500;">Ambulances</span>
                                            <span style="background:var(--safe);color:white;padding:3px 10px;border-radius:10px;font-size:0.75rem;font-weight:600;">3</span>
                                        </div>
                                        <div style="background:#e0e0e0;height:6px;border-radius:3px;overflow:hidden;">
                                            <div style="width:100%;height:100%;background:var(--safe);border-radius:3px;"></div>
                                        </div>
                                    </div>
                                    <div style="margin-bottom:15px;padding-bottom:15px;border-bottom:1px solid #eee;">
                                        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
                                            <span style="font-size:0.85rem;font-weight:500;">PPE Suits</span>
                                            <span style="background:var(--warning);color:white;padding:3px 10px;border-radius:10px;font-size:0.75rem;font-weight:600;">24</span>
                                        </div>
                                        <div style="background:#e0e0e0;height:6px;border-radius:3px;overflow:hidden;">
                                            <div style="width:45%;height:100%;background:var(--warning);border-radius:3px;"></div>
                                        </div>
                                    </div>
                                    <div style="margin-bottom:15px;padding-bottom:15px;border-bottom:1px solid #eee;">
                                        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
                                            <span style="font-size:0.85rem;font-weight:500;">Testing Equipment</span>
                                            <span style="background:var(--safe);color:white;padding:3px 10px;border-radius:10px;font-size:0.75rem;font-weight:600;">8</span>
                                        </div>
                                        <div style="background:#e0e0e0;height:6px;border-radius:3px;overflow:hidden;">
                                            <div style="width:75%;height:100%;background:var(--safe);border-radius:3px;"></div>
                                        </div>
                                    </div>
                                    <div>
                                        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
                                            <span style="font-size:0.85rem;font-weight:500;">Communication Radios</span>
                                            <span style="background:var(--safe);color:white;padding:3px 10px;border-radius:10px;font-size:0.75rem;font-weight:600;">16</span>
                                        </div>
                                        <div style="background:#e0e0e0;height:6px;border-radius:3px;overflow:hidden;">
                                            <div style="width:90%;height:100%;background:var(--safe);border-radius:3px;"></div>
                                        </div>
                                    </div>
                                </div>

                                <div style="background:linear-gradient(135deg,#e8f5e9,#c8e6c9);border-radius:12px;padding:20px;border-left:4px solid var(--safe);">
                                    <h4 style="font-size:0.95rem;font-weight:600;margin-bottom:10px;color:var(--dark);"><i class="fas fa-chart-bar"></i> Performance</h4>
                                    <div style="margin-bottom:10px;">
                                        <div style="font-size:0.85rem;margin-bottom:5px;">Success Rate</div>
                                        <div style="font-size:1.5rem;font-weight:700;color:var(--safe);">94%</div>
                                    </div>
                                    <div>
                                        <div style="font-size:0.85rem;margin-bottom:5px;">Avg Response Time</div>
                                        <div style="font-size:1.5rem;font-weight:700;color:var(--primary);">42 min</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Team Communication -->
                        <div style="background:linear-gradient(135deg,#e3f2fd,#bbdefb);border-radius:12px;padding:20px;border-left:4px solid var(--primary);">
                            <h4 style="font-size:1.1rem;font-weight:600;margin-bottom:15px;color:var(--dark);"><i class="fas fa-bullhorn"></i> Team Coordination Tools</h4>
                            <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:15px;font-size:0.85rem;">
                                <div style="background:white;padding:15px;border-radius:8px;text-align:center;">
                                    <i class="fas fa-mobile-alt" style="font-size:2rem;color:var(--primary);margin-bottom:10px;"></i>
                                    <div style="font-weight:600;">Emergency Hotline</div>
                                    <div style="color:var(--text-secondary);margin-top:5px;">24/7 Available</div>
                                </div>
                                <div style="background:white;padding:15px;border-radius:8px;text-align:center;">
                                    <i class="fas fa-comments" style="font-size:2rem;color:var(--primary);margin-bottom:10px;"></i>
                                    <div style="font-weight:600;">Team Chat</div>
                                    <div style="color:var(--text-secondary);margin-top:5px;">Real-time messaging</div>
                                </div>
                                <div style="background:white;padding:15px;border-radius:8px;text-align:center;">
                                    <i class="fas fa-map-marked-alt" style="font-size:2rem;color:var(--primary);margin-bottom:10px;"></i>
                                    <div style="font-weight:600;">GPS Tracking</div>
                                    <div style="color:var(--text-secondary);margin-top:5px;">Live location</div>
                                </div>
                                <div style="background:white;padding:15px;border-radius:8px;text-align:center;">
                                    <i class="fas fa-clipboard-list" style="font-size:2rem;color:var(--primary);margin-bottom:10px;"></i>
                                    <div style="font-weight:600;">Task Management</div>
                                    <div style="color:var(--text-secondary);margin-top:5px;">Assignment tracking</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Trends Section -->
                <div class="content-section" id="trends-section">
                    <div class="section-header">
                        <h2 class="section-title">Health & Water Quality Trends</h2>
                        <div style="display:flex;gap:10px;margin-left:auto;">
                            <select style="padding:8px 15px;border:1px solid #ddd;border-radius:6px;font-size:0.9rem;">
                                <option>Last 7 Days</option>
                                <option>Last 30 Days</option>
                                <option>Last 3 Months</option>
                                <option>Last Year</option>
                            </select>
                            <button class="btn btn-primary"><i class="fas fa-sync-alt"></i> Refresh</button>
                        </div>
                    </div>
                    <div class="section-content">
                        <!-- Trend Summary Cards -->
                        <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-bottom:30px;">
                            <div style="background:white;border-radius:12px;padding:20px;box-shadow:var(--shadow);border-left:4px solid var(--safe);">
                                <div style="font-size:0.85rem;color:var(--text-secondary);margin-bottom:8px;">Overall Health Trend</div>
                                <div style="font-size:2.2rem;font-weight:700;color:var(--safe);margin-bottom:5px;">+8.5%</div>
                                <div style="font-size:0.8rem;color:var(--safe);"><i class="fas fa-arrow-up"></i> Improvement this month</div>
                            </div>
                            <div style="background:white;border-radius:12px;padding:20px;box-shadow:var(--shadow);border-left:4px solid var(--danger);">
                                <div style="font-size:0.85rem;color:var(--text-secondary);margin-bottom:8px;">Waterborne Diseases</div>
                                <div style="font-size:2.2rem;font-weight:700;color:var(--danger);margin-bottom:5px;">+156%</div>
                                <div style="font-size:0.8rem;color:var(--danger);"><i class="fas fa-arrow-up"></i> Spike this week</div>
                            </div>
                            <div style="background:white;border-radius:12px;padding:20px;box-shadow:var(--shadow);border-left:4px solid var(--warning);">
                                <div style="font-size:0.85rem;color:var(--text-secondary);margin-bottom:8px;">Water Quality Index</div>
                                <div style="font-size:2.2rem;font-weight:700;color:var(--warning);margin-bottom:5px;">-12%</div>
                                <div style="font-size:0.8rem;color:var(--warning);"><i class="fas fa-arrow-down"></i> Declining quality</div>
                            </div>
                            <div style="background:white;border-radius:12px;padding:20px;box-shadow:var(--shadow);border-left:4px solid var(--primary);">
                                <div style="font-size:0.85rem;color:var(--text-secondary);margin-bottom:8px;">Recovery Rate</div>
                                <div style="font-size:2.2rem;font-weight:700;color:var(--primary);margin-bottom:5px;">93%</div>
                                <div style="font-size:0.8rem;color:var(--safe);"><i class="fas fa-check-circle"></i> Stable</div>
                            </div>
                        </div>

                        <!-- Weekly Disease Trends -->
                        <div style="display:grid;grid-template-columns:2fr 1fr;gap:20px;margin-bottom:30px;">
                            <div style="background:white;border-radius:12px;padding:25px;box-shadow:var(--shadow);">
                                <h3 style="font-size:1.2rem;font-weight:600;margin-bottom:20px;color:var(--dark);">7-Day Disease Trend Analysis</h3>
                                <table style="width:100%;border-collapse:collapse;">
                                    <thead>
                                        <tr style="background:var(--primary-light);border-bottom:2px solid var(--primary);">
                                            <th style="padding:12px;text-align:left;font-weight:600;font-size:0.9rem;">Disease</th>
                                            <th style="padding:12px;text-align:center;font-weight:600;font-size:0.9rem;">Mon</th>
                                            <th style="padding:12px;text-align:center;font-weight:600;font-size:0.9rem;">Tue</th>
                                            <th style="padding:12px;text-align:center;font-weight:600;font-size:0.9rem;">Wed</th>
                                            <th style="padding:12px;text-align:center;font-weight:600;font-size:0.9rem;">Thu</th>
                                            <th style="padding:12px;text-align:center;font-weight:600;font-size:0.9rem;">Fri</th>
                                            <th style="padding:12px;text-align:center;font-weight:600;font-size:0.9rem;">Sat</th>
                                            <th style="padding:12px;text-align:center;font-weight:600;font-size:0.9rem;">Sun</th>
                                            <th style="padding:12px;text-align:center;font-weight:600;font-size:0.9rem;">Trend</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr style="border-bottom:1px solid #eee;">
                                            <td style="padding:15px;font-weight:500;">Diarrhea</td>
                                            <td style="padding:15px;text-align:center;">2</td>
                                            <td style="padding:15px;text-align:center;">3</td>
                                            <td style="padding:15px;text-align:center;">5</td>
                                            <td style="padding:15px;text-align:center;">8</td>
                                            <td style="padding:15px;text-align:center;">12</td>
                                            <td style="padding:15px;text-align:center;">16</td>
                                            <td style="padding:15px;text-align:center;font-weight:600;color:var(--danger);">42</td>
                                            <td style="padding:15px;text-align:center;"><span style="color:var(--danger);font-size:1.2rem;"><i class="fas fa-arrow-up"></i></span></td>
                                        </tr>
                                        <tr style="border-bottom:1px solid #eee;background:#f9f9f9;">
                                            <td style="padding:15px;font-weight:500;">Typhoid</td>
                                            <td style="padding:15px;text-align:center;">4</td>
                                            <td style="padding:15px;text-align:center;">5</td>
                                            <td style="padding:15px;text-align:center;">4</td>
                                            <td style="padding:15px;text-align:center;">6</td>
                                            <td style="padding:15px;text-align:center;">5</td>
                                            <td style="padding:15px;text-align:center;">6</td>
                                            <td style="padding:15px;text-align:center;font-weight:600;">28</td>
                                            <td style="padding:15px;text-align:center;"><span style="color:var(--warning);font-size:1.2rem;"><i class="fas fa-arrow-up"></i></span></td>
                                        </tr>
                                        <tr style="border-bottom:1px solid #eee;">
                                            <td style="padding:15px;font-weight:500;">Fever</td>
                                            <td style="padding:15px;text-align:center;">8</td>
                                            <td style="padding:15px;text-align:center;">7</td>
                                            <td style="padding:15px;text-align:center;">5</td>
                                            <td style="padding:15px;text-align:center;">4</td>
                                            <td style="padding:15px;text-align:center;">4</td>
                                            <td style="padding:15px;text-align:center;">3</td>
                                            <td style="padding:15px;text-align:center;font-weight:600;">34</td>
                                            <td style="padding:15px;text-align:center;"><span style="color:var(--safe);font-size:1.2rem;"><i class="fas fa-arrow-down"></i></span></td>
                                        </tr>
                                        <tr style="border-bottom:1px solid #eee;background:#f9f9f9;">
                                            <td style="padding:15px;font-weight:500;">Skin Infection</td>
                                            <td style="padding:15px;text-align:center;">2</td>
                                            <td style="padding:15px;text-align:center;">3</td>
                                            <td style="padding:15px;text-align:center;">3</td>
                                            <td style="padding:15px;text-align:center;">4</td>
                                            <td style="padding:15px;text-align:center;">3</td>
                                            <td style="padding:15px;text-align:center;">2</td>
                                            <td style="padding:15px;text-align:center;font-weight:600;">20</td>
                                            <td style="padding:15px;text-align:center;"><span style="color:var(--primary);font-size:1.2rem;"><i class="fas fa-minus"></i></span></td>
                                        </tr>
                                        <tr style="background:#f9f9f9;">
                                            <td style="padding:15px;font-weight:500;">Respiratory</td>
                                            <td style="padding:15px;text-align:center;">5</td>
                                            <td style="padding:15px;text-align:center;">4</td>
                                            <td style="padding:15px;text-align:center;">3</td>
                                            <td style="padding:15px;text-align:center;">3</td>
                                            <td style="padding:15px;text-align:center;">2</td>
                                            <td style="padding:15px;text-align:center;">2</td>
                                            <td style="padding:15px;text-align:center;font-weight:600;">20</td>
                                            <td style="padding:15px;text-align:center;"><span style="color:var(--safe);font-size:1.2rem;"><i class="fas fa-arrow-down"></i></span></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <div>
                                <div style="background:white;border-radius:12px;padding:20px;box-shadow:var(--shadow);margin-bottom:15px;">
                                    <h4 style="font-size:1rem;font-weight:600;margin-bottom:15px;color:var(--dark);">Water Quality Trends</h4>
                                    <div style="margin-bottom:15px;">
                                        <div style="display:flex;justify-content:space-between;margin-bottom:5px;font-size:0.85rem;">
                                            <span>E.coli Levels</span>
                                            <span style="font-weight:600;color:var(--danger);">+85%</span>
                                        </div>
                                        <div style="background:#e0e0e0;height:8px;border-radius:4px;overflow:hidden;">
                                            <div style="width:85%;height:100%;background:var(--danger);border-radius:4px;"></div>
                                        </div>
                                    </div>
                                    <div style="margin-bottom:15px;">
                                        <div style="display:flex;justify-content:space-between;margin-bottom:5px;font-size:0.85rem;">
                                            <span>pH Stability</span>
                                            <span style="font-weight:600;color:var(--safe);">-5%</span>
                                        </div>
                                        <div style="background:#e0e0e0;height:8px;border-radius:4px;overflow:hidden;">
                                            <div style="width:15%;height:100%;background:var(--safe);border-radius:4px;"></div>
                                        </div>
                                    </div>
                                    <div style="margin-bottom:15px;">
                                        <div style="display:flex;justify-content:space-between;margin-bottom:5px;font-size:0.85rem;">
                                            <span>Turbidity</span>
                                            <span style="font-weight:600;color:var(--warning);">+28%</span>
                                        </div>
                                        <div style="background:#e0e0e0;height:8px;border-radius:4px;overflow:hidden;">
                                            <div style="width:28%;height:100%;background:var(--warning);border-radius:4px;"></div>
                                        </div>
                                    </div>
                                    <div>
                                        <div style="display:flex;justify-content:space-between;margin-bottom:5px;font-size:0.85rem;">
                                            <span>Bacteria Count</span>
                                            <span style="font-weight:600;color:var(--warning);">+42%</span>
                                        </div>
                                        <div style="background:#e0e0e0;height:8px;border-radius:4px;overflow:hidden;">
                                            <div style="width:42%;height:100%;background:var(--warning);border-radius:4px;"></div>
                                        </div>
                                    </div>
                                </div>

                                <div style="background:linear-gradient(135deg,#ffebee,#ffcdd2);border-radius:12px;padding:20px;border-left:4px solid var(--danger);">
                                    <h4 style="font-size:0.95rem;font-weight:600;margin-bottom:10px;color:var(--dark);"><i class="fas fa-exclamation-triangle"></i> Alert</h4>
                                    <div style="font-size:0.85rem;line-height:1.6;">
                                        Diarrhea cases increased by <strong>2000%</strong> in last 7 days, directly correlated with E.coli spike in Bijaipur water source.
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Monthly Comparison -->
                        <div style="background:white;border-radius:12px;padding:25px;box-shadow:var(--shadow);margin-bottom:25px;">
                            <h3 style="font-size:1.2rem;font-weight:600;margin-bottom:20px;color:var(--dark);">Month-over-Month Comparison</h3>
                            <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:20px;">
                                <div style="background:var(--primary-light);border-radius:8px;padding:20px;">
                                    <div style="font-size:0.9rem;color:var(--text-secondary);margin-bottom:10px;">This Month</div>
                                    <div style="font-size:2rem;font-weight:700;color:var(--dark);margin-bottom:5px;">124</div>
                                    <div style="font-size:0.85rem;color:var(--text-secondary);">Total Cases</div>
                                </div>
                                <div style="background:var(--primary-light);border-radius:8px;padding:20px;">
                                    <div style="font-size:0.9rem;color:var(--text-secondary);margin-bottom:10px;">Last Month</div>
                                    <div style="font-size:2rem;font-weight:700;color:var(--dark);margin-bottom:5px;">98</div>
                                    <div style="font-size:0.85rem;color:var(--text-secondary);">Total Cases</div>
                                </div>
                                <div style="background:var(--primary-light);border-radius:8px;padding:20px;">
                                    <div style="font-size:0.9rem;color:var(--text-secondary);margin-bottom:10px;">Change</div>
                                    <div style="font-size:2rem;font-weight:700;color:var(--warning);margin-bottom:5px;">+27%</div>
                                    <div style="font-size:0.85rem;color:var(--warning);font-weight:600;"><i class="fas fa-arrow-up"></i> Increasing</div>
                                </div>
                            </div>
                        </div>

                        <!-- Seasonal Patterns -->
                        <div style="background:linear-gradient(135deg,#e3f2fd,#bbdefb);border-radius:12px;padding:20px;border-left:4px solid var(--primary);">
                            <h4 style="font-size:1.1rem;font-weight:600;margin-bottom:15px;color:var(--dark);"><i class="fas fa-calendar-alt"></i> Seasonal Pattern Insights</h4>
                            <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:15px;font-size:0.9rem;line-height:1.6;">
                                <div> <strong>Monsoon Impact:</strong> 240% increase in waterborne diseases during rainy season</div>
                                <div> <strong>Winter Pattern:</strong> Respiratory illnesses peak 65% higher in Dec-Jan</div>
                                <div> <strong>Summer Trend:</strong> Vector-borne diseases increase 180% in Apr-Jun</div>
                                <div> <strong>Current Season:</strong> Winter - Monitor respiratory infections closely</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Distribution Section -->
                <div class="content-section" id="distribution-section">
                    <div class="section-header">
                        <h2 class="section-title">Geographic & Disease Distribution</h2>
                        <button class="btn btn-primary" style="margin-left:auto;"><i class="fas fa-download"></i> Export Map Data</button>
                    </div>
                    <div class="section-content">
                        <!-- Distribution Summary -->
                        <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-bottom:30px;">
                            <div style="background:white;border-radius:12px;padding:20px;box-shadow:var(--shadow);text-align:center;">
                                <div style="width:60px;height:60px;background:linear-gradient(135deg,var(--danger),#c62828);border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-size:1.5rem;margin:0 auto 15px;">
                                    <i class="fas fa-map-marker-alt"></i>
                                </div>
                                <div style="font-size:0.85rem;color:var(--text-secondary);margin-bottom:8px;">Highest Risk Area</div>
                                <div style="font-size:1.8rem;font-weight:700;color:var(--danger);">Bijaipur</div>
                                <div style="font-size:0.8rem;color:var(--danger);margin-top:5px;">40 active cases</div>
                            </div>
                            <div style="background:white;border-radius:12px;padding:20px;box-shadow:var(--shadow);text-align:center;">
                                <div style="width:60px;height:60px;background:linear-gradient(135deg,var(--safe),#27ae60);border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-size:1.5rem;margin:0 auto 15px;">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                                <div style="font-size:0.85rem;color:var(--text-secondary);margin-bottom:8px;">Safest Area</div>
                                <div style="font-size:1.8rem;font-weight:700;color:var(--safe);">Bishanpur</div>
                                <div style="font-size:0.8rem;color:var(--safe);margin-top:5px;">7 active cases</div>
                            </div>
                            <div style="background:white;border-radius:12px;padding:20px;box-shadow:var(--shadow);text-align:center;">
                                <div style="width:60px;height:60px;background:linear-gradient(135deg,var(--primary),#0d47a1);border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-size:1.5rem;margin:0 auto 15px;">
                                    <i class="fas fa-users"></i>
                                </div>
                                <div style="font-size:0.85rem;color:var(--text-secondary);margin-bottom:8px;">Total Population</div>
                                <div style="font-size:1.8rem;font-weight:700;color:var(--primary);">13,880</div>
                                <div style="font-size:0.8rem;color:var(--text-secondary);margin-top:5px;">Across 6 villages</div>
                            </div>
                        </div>

                        <!-- Geographic Distribution Map -->
                        <div style="display:grid;grid-template-columns:2fr 1fr;gap:20px;margin-bottom:30px;">
                            <div style="background:white;border-radius:12px;padding:25px;box-shadow:var(--shadow);">
                                <h3 style="font-size:1.2rem;font-weight:600;margin-bottom:20px;color:var(--dark);">Cases by Village Location</h3>
                                
                                <!-- Village Distribution Cards -->
                                <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:15px;">
                                    <div style="background:#fff5f5;border-left:4px solid var(--danger);padding:15px;border-radius:8px;">
                                        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;">
                                            <h4 style="font-size:1rem;font-weight:600;color:var(--dark);">Bijaipur</h4>
                                            <span style="background:var(--danger);color:white;padding:3px 10px;border-radius:12px;font-size:0.75rem;font-weight:600;">HIGH RISK</span>
                                        </div>
                                        <div style="font-size:0.85rem;color:var(--text-secondary);margin-bottom:8px;">Population: 1,890</div>
                                        <div style="font-size:2rem;font-weight:700;color:var(--danger);margin-bottom:8px;">40</div>
                                        <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;font-size:0.8rem;">
                                            <div>Waterborne: <strong>28</strong></div>
                                            <div>Respiratory: <strong>9</strong></div>
                                            <div>Vector: <strong>3</strong></div>
                                            <div>Rate: <strong>2.1%</strong></div>
                                        </div>
                                    </div>

                                    <div style="background:#fffbf0;border-left:4px solid var(--warning);padding:15px;border-radius:8px;">
                                        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;">
                                            <h4 style="font-size:1rem;font-weight:600;color:var(--dark);">Mandawa</h4>
                                            <span style="background:var(--warning);color:white;padding:3px 10px;border-radius:12px;font-size:0.75rem;font-weight:600;">MEDIUM</span>
                                        </div>
                                        <div style="font-size:0.85rem;color:var(--text-secondary);margin-bottom:8px;">Population: 2,340</div>
                                        <div style="font-size:2rem;font-weight:700;color:var(--warning);margin-bottom:8px;">25</div>
                                        <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;font-size:0.8rem;">
                                            <div>Waterborne: <strong>8</strong></div>
                                            <div>Respiratory: <strong>12</strong></div>
                                            <div>Vector: <strong>5</strong></div>
                                            <div>Rate: <strong>1.1%</strong></div>
                                        </div>
                                    </div>

                                    <div style="background:#fffbf0;border-left:4px solid var(--warning);padding:15px;border-radius:8px;">
                                        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;">
                                            <h4 style="font-size:1rem;font-weight:600;color:var(--dark);">Bhamatsar</h4>
                                            <span style="background:var(--warning);color:white;padding:3px 10px;border-radius:12px;font-size:0.75rem;font-weight:600;">MEDIUM</span>
                                        </div>
                                        <div style="font-size:0.85rem;color:var(--text-secondary);margin-bottom:8px;">Population: 1,560</div>
                                        <div style="font-size:2rem;font-weight:700;color:var(--warning);margin-bottom:8px;">25</div>
                                        <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;font-size:0.8rem;">
                                            <div>Waterborne: <strong>15</strong></div>
                                            <div>Respiratory: <strong>6</strong></div>
                                            <div>Vector: <strong>4</strong></div>
                                            <div>Rate: <strong>1.6%</strong></div>
                                        </div>
                                    </div>

                                    <div style="background:#f0f9ff;border-left:4px solid var(--primary);padding:15px;border-radius:8px;">
                                        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;">
                                            <h4 style="font-size:1rem;font-weight:600;color:var(--dark);">Amarpura</h4>
                                            <span style="background:var(--primary);color:white;padding:3px 10px;border-radius:12px;font-size:0.75rem;font-weight:600;">LOW</span>
                                        </div>
                                        <div style="font-size:0.85rem;color:var(--text-secondary);margin-bottom:8px;">Population: 2,780</div>
                                        <div style="font-size:2rem;font-weight:700;color:var(--primary);margin-bottom:8px;">15</div>
                                        <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;font-size:0.8rem;">
                                            <div>Waterborne: <strong>4</strong></div>
                                            <div>Respiratory: <strong>8</strong></div>
                                            <div>Vector: <strong>3</strong></div>
                                            <div>Rate: <strong>0.5%</strong></div>
                                        </div>
                                    </div>

                                    <div style="background:#f0f9ff;border-left:4px solid var(--safe);padding:15px;border-radius:8px;">
                                        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;">
                                            <h4 style="font-size:1rem;font-weight:600;color:var(--dark);">Ranakpur</h4>
                                            <span style="background:var(--safe);color:white;padding:3px 10px;border-radius:12px;font-size:0.75rem;font-weight:600;">LOW</span>
                                        </div>
                                        <div style="font-size:0.85rem;color:var(--text-secondary);margin-bottom:8px;">Population: 3,120</div>
                                        <div style="font-size:2rem;font-weight:700;color:var(--safe);margin-bottom:8px;">12</div>
                                        <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;font-size:0.8rem;">
                                            <div>Waterborne: <strong>3</strong></div>
                                            <div>Respiratory: <strong>7</strong></div>
                                            <div>Vector: <strong>2</strong></div>
                                            <div>Rate: <strong>0.4%</strong></div>
                                        </div>
                                    </div>

                                    <div style="background:#f0f9ff;border-left:4px solid var(--safe);padding:15px;border-radius:8px;">
                                        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;">
                                            <h4 style="font-size:1rem;font-weight:600;color:var(--dark);">Bishanpur</h4>
                                            <span style="background:var(--safe);color:white;padding:3px 10px;border-radius:12px;font-size:0.75rem;font-weight:600;">VERY LOW</span>
                                        </div>
                                        <div style="font-size:0.85rem;color:var(--text-secondary);margin-bottom:8px;">Population: 2,190</div>
                                        <div style="font-size:2rem;font-weight:700;color:var(--safe);margin-bottom:8px;">7</div>
                                        <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;font-size:0.8rem;">
                                            <div>Waterborne: <strong>6</strong></div>
                                            <div>Respiratory: <strong>1</strong></div>
                                            <div>Vector: <strong>0</strong></div>
                                            <div>Rate: <strong>0.3%</strong></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div>
                                <div style="background:white;border-radius:12px;padding:20px;box-shadow:var(--shadow);margin-bottom:15px;">
                                    <h4 style="font-size:1rem;font-weight:600;margin-bottom:15px;color:var(--dark);">Disease Type Distribution</h4>
                                    <div style="margin-bottom:15px;">
                                        <div style="display:flex;justify-content:space-between;margin-bottom:5px;font-size:0.9rem;">
                                            <span>Waterborne</span>
                                            <span style="font-weight:600;">64 (52%)</span>
                                        </div>
                                        <div style="background:#e0e0e0;height:10px;border-radius:5px;overflow:hidden;">
                                            <div style="width:52%;height:100%;background:var(--danger);border-radius:5px;"></div>
                                        </div>
                                    </div>
                                    <div style="margin-bottom:15px;">
                                        <div style="display:flex;justify-content:space-between;margin-bottom:5px;font-size:0.9rem;">
                                            <span>Respiratory</span>
                                            <span style="font-weight:600;">43 (35%)</span>
                                        </div>
                                        <div style="background:#e0e0e0;height:10px;border-radius:5px;overflow:hidden;">
                                            <div style="width:35%;height:100%;background:var(--warning);border-radius:5px;"></div>
                                        </div>
                                    </div>
                                    <div>
                                        <div style="display:flex;justify-content:space-between;margin-bottom:5px;font-size:0.9rem;">
                                            <span>Vector-borne</span>
                                            <span style="font-weight:600;">17 (13%)</span>
                                        </div>
                                        <div style="background:#e0e0e0;height:10px;border-radius:5px;overflow:hidden;">
                                            <div style="width:13%;height:100%;background:var(--primary);border-radius:5px;"></div>
                                        </div>
                                    </div>
                                </div>

                                <div style="background:white;border-radius:12px;padding:20px;box-shadow:var(--shadow);margin-bottom:15px;">
                                    <h4 style="font-size:1rem;font-weight:600;margin-bottom:15px;color:var(--dark);">Risk Levels</h4>
                                    <div style="display:grid;gap:10px;">
                                        <div style="display:flex;align-items:center;gap:10px;">
                                            <div style="width:20px;height:20px;background:var(--danger);border-radius:50%;"></div>
                                            <div style="flex:1;font-size:0.85rem;">High Risk: <strong>1 village</strong></div>
                                        </div>
                                        <div style="display:flex;align-items:center;gap:10px;">
                                            <div style="width:20px;height:20px;background:var(--warning);border-radius:50%;"></div>
                                            <div style="flex:1;font-size:0.85rem;">Medium Risk: <strong>2 villages</strong></div>
                                        </div>
                                        <div style="display:flex;align-items:center;gap:10px;">
                                            <div style="width:20px;height:20px;background:var(--safe);border-radius:50%;"></div>
                                            <div style="flex:1;font-size:0.85rem;">Low Risk: <strong>3 villages</strong></div>
                                        </div>
                                    </div>
                                </div>

                                <div style="background:linear-gradient(135deg,#fff3e0,#ffe0b2);border-radius:12px;padding:15px;border-left:4px solid var(--warning);">
                                    <h4 style="font-size:0.9rem;font-weight:600;margin-bottom:8px;color:var(--dark);"><i class="fas fa-info-circle"></i> Hotspot Alert</h4>
                                    <div style="font-size:0.8rem;line-height:1.5;">
                                        Bijaipur showing cluster pattern with 2.1% infection rate - highest in region.
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Population vs Cases Chart -->
                        <div style="background:linear-gradient(135deg,#e3f2fd,#bbdefb);border-radius:12px;padding:20px;border-left:4px solid var(--primary);">
                            <h4 style="font-size:1.1rem;font-weight:600;margin-bottom:15px;color:var(--dark);"><i class="fas fa-chart-area"></i> Distribution Insights</h4>
                            <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:15px;font-size:0.9rem;line-height:1.6;">
                                <div> <strong>Highest Density:</strong> Bijaipur (21.2 cases per 1000 population)</div>
                                <div> <strong>Lowest Density:</strong> Bishanpur (3.2 cases per 1000 population)</div>
                                <div> <strong>Most Affected:</strong> Waterborne diseases (52% of all cases)</div>
                                <div> <strong>Regional Average:</strong> 8.9 cases per 1000 population</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Correlations Section -->
                <div class="content-section" id="correlations-section">
                    <div class="section-header">
                        <h2 class="section-title">Environmental & Health Correlations</h2>
                        <button class="btn btn-primary" style="margin-left:auto;"><i class="fas fa-calculator"></i> Run Analysis</button>
                    </div>
                    <div class="section-content">
                        <!-- Correlation Strength Cards -->
                        <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-bottom:30px;">
                            <div style="background:white;border-radius:12px;padding:20px;box-shadow:var(--shadow);text-align:center;border-top:4px solid var(--danger);">
                                <div style="font-size:0.85rem;color:var(--text-secondary);margin-bottom:10px;">E.coli  Diarrhea</div>
                                <div style="font-size:3rem;font-weight:700;color:var(--danger);margin-bottom:8px;">0.92</div>
                                <div style="font-size:0.8rem;color:var(--danger);font-weight:600;">Very Strong</div>
                                <div style="font-size:0.75rem;color:var(--text-secondary);margin-top:5px;">p &lt; 0.001</div>
                            </div>
                            <div style="background:white;border-radius:12px;padding:20px;box-shadow:var(--shadow);text-align:center;border-top:4px solid var(--warning);">
                                <div style="font-size:0.85rem;color:var(--text-secondary);margin-bottom:10px;">Turbidity  Typhoid</div>
                                <div style="font-size:3rem;font-weight:700;color:var(--warning);margin-bottom:8px;">0.74</div>
                                <div style="font-size:0.8rem;color:var(--warning);font-weight:600;">Strong</div>
                                <div style="font-size:0.75rem;color:var(--text-secondary);margin-top:5px;">p = 0.012</div>
                            </div>
                            <div style="background:white;border-radius:12px;padding:20px;box-shadow:var(--shadow);text-align:center;border-top:4px solid var(--warning);">
                                <div style="font-size:0.85rem;color:var(--text-secondary);margin-bottom:10px;">pH  Skin Infections</div>
                                <div style="font-size:3rem;font-weight:700;color:var(--warning);margin-bottom:8px;">0.68</div>
                                <div style="font-size:0.8rem;color:var(--warning);font-weight:600;">Moderate</div>
                                <div style="font-size:0.75rem;color:var(--text-secondary);margin-top:5px;">p = 0.025</div>
                            </div>
                            <div style="background:white;border-radius:12px;padding:20px;box-shadow:var(--shadow);text-align:center;border-top:4px solid var(--primary);">
                                <div style="font-size:0.85rem;color:var(--text-secondary);margin-bottom:10px;">Bacteria  Fever</div>
                                <div style="font-size:3rem;font-weight:700;color:var(--primary);margin-bottom:8px;">0.54</div>
                                <div style="font-size:0.8rem;color:var(--primary);font-weight:600;">Moderate</div>
                                <div style="font-size:0.75rem;color:var(--text-secondary);margin-top:5px;">p = 0.048</div>
                            </div>
                        </div>

                        <!-- Detailed Correlation Analysis -->
                        <div style="display:grid;grid-template-columns:1.5fr 1fr;gap:20px;margin-bottom:30px;">
                            <div style="background:white;border-radius:12px;padding:25px;box-shadow:var(--shadow);">
                                <h3 style="font-size:1.2rem;font-weight:600;margin-bottom:20px;color:var(--dark);">Correlation Matrix</h3>
                                <table style="width:100%;border-collapse:collapse;font-size:0.85rem;">
                                    <thead>
                                        <tr style="background:var(--primary-light);">
                                            <th style="padding:10px;text-align:left;font-weight:600;">Water Parameter</th>
                                            <th style="padding:10px;text-align:center;font-weight:600;">Diarrhea</th>
                                            <th style="padding:10px;text-align:center;font-weight:600;">Typhoid</th>
                                            <th style="padding:10px;text-align:center;font-weight:600;">Fever</th>
                                            <th style="padding:10px;text-align:center;font-weight:600;">Skin</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr style="border-bottom:1px solid #eee;">
                                            <td style="padding:12px;font-weight:500;">E.coli Level</td>
                                            <td style="padding:12px;text-align:center;background:#ffebee;"><strong style="color:var(--danger);">0.92</strong></td>
                                            <td style="padding:12px;text-align:center;">0.65</td>
                                            <td style="padding:12px;text-align:center;">0.48</td>
                                            <td style="padding:12px;text-align:center;">0.38</td>
                                        </tr>
                                        <tr style="border-bottom:1px solid #eee;background:#f9f9f9;">
                                            <td style="padding:12px;font-weight:500;">pH Level</td>
                                            <td style="padding:12px;text-align:center;">0.42</td>
                                            <td style="padding:12px;text-align:center;">0.56</td>
                                            <td style="padding:12px;text-align:center;">0.31</td>
                                            <td style="padding:12px;text-align:center;background:#fff3e0;"><strong style="color:var(--warning);">0.68</strong></td>
                                        </tr>
                                        <tr style="border-bottom:1px solid #eee;">
                                            <td style="padding:12px;font-weight:500;">Turbidity</td>
                                            <td style="padding:12px;text-align:center;">0.71</td>
                                            <td style="padding:12px;text-align:center;background:#fff3e0;"><strong style="color:var(--warning);">0.74</strong></td>
                                            <td style="padding:12px;text-align:center;">0.52</td>
                                            <td style="padding:12px;text-align:center;">0.44</td>
                                        </tr>
                                        <tr style="border-bottom:1px solid #eee;background:#f9f9f9;">
                                            <td style="padding:12px;font-weight:500;">Bacteria Count</td>
                                            <td style="padding:12px;text-align:center;">0.78</td>
                                            <td style="padding:12px;text-align:center;">0.62</td>
                                            <td style="padding:12px;text-align:center;">0.54</td>
                                            <td style="padding:12px;text-align:center;">0.49</td>
                                        </tr>
                                    </tbody>
                                </table>

                                <div style="margin-top:20px;padding:15px;background:var(--primary-light);border-radius:8px;">
                                    <div style="font-size:0.85rem;font-weight:600;margin-bottom:8px;color:var(--dark);">Interpretation Guide:</div>
                                    <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:8px;font-size:0.8rem;">
                                        <div> <strong>0.8-1.0:</strong> Very Strong</div>
                                        <div> <strong>0.6-0.79:</strong> Strong</div>
                                        <div> <strong>0.4-0.59:</strong> Moderate</div>
                                        <div> <strong>0.0-0.39:</strong> Weak</div>
                                    </div>
                                </div>
                            </div>

                            <div>
                                <div style="background:white;border-radius:12px;padding:20px;box-shadow:var(--shadow);margin-bottom:15px;">
                                    <h4 style="font-size:1rem;font-weight:600;margin-bottom:15px;color:var(--dark);">Key Findings</h4>
                                    <div style="padding:12px;background:#ffebee;border-radius:6px;margin-bottom:10px;border-left:3px solid var(--danger);">
                                        <div style="font-size:0.8rem;font-weight:600;color:var(--danger);margin-bottom:5px;">Critical Correlation</div>
                                        <div style="font-size:0.85rem;line-height:1.5;">E.coli contamination shows 0.92 correlation with diarrhea cases - direct causation confirmed</div>
                                    </div>
                                    <div style="padding:12px;background:#fff3e0;border-radius:6px;margin-bottom:10px;border-left:3px solid var(--warning);">
                                        <div style="font-size:0.8rem;font-weight:600;color:var(--warning);margin-bottom:5px;">Strong Pattern</div>
                                        <div style="font-size:0.85rem;line-height:1.5;">Turbidity increases directly linked to typhoid outbreak risk</div>
                                    </div>
                                    <div style="padding:12px;background:#e3f2fd;border-radius:6px;border-left:3px solid var(--primary);">
                                        <div style="font-size:0.8rem;font-weight:600;color:var(--primary);margin-bottom:5px;">Notable Link</div>
                                        <div style="font-size:0.85rem;line-height:1.5;">pH imbalance correlates with 68% of skin infection cases</div>
                                    </div>
                                </div>

                                <div style="background:white;border-radius:12px;padding:20px;box-shadow:var(--shadow);margin-bottom:15px;">
                                    <h4 style="font-size:1rem;font-weight:600;margin-bottom:15px;color:var(--dark);">Statistical Significance</h4>
                                    <div style="margin-bottom:12px;">
                                        <div style="display:flex;justify-content:space-between;margin-bottom:5px;font-size:0.85rem;">
                                            <span>Confidence Level</span>
                                            <span style="font-weight:600;color:var(--safe);">99%</span>
                                        </div>
                                        <div style="background:#e0e0e0;height:6px;border-radius:3px;overflow:hidden;">
                                            <div style="width:99%;height:100%;background:var(--safe);border-radius:3px;"></div>
                                        </div>
                                    </div>
                                    <div style="margin-bottom:12px;">
                                        <div style="display:flex;justify-content:space-between;margin-bottom:5px;font-size:0.85rem;">
                                            <span>Sample Size</span>
                                            <span style="font-weight:600;">124 cases</span>
                                        </div>
                                        <div style="background:#e0e0e0;height:6px;border-radius:3px;overflow:hidden;">
                                            <div style="width:85%;height:100%;background:var(--primary);border-radius:3px;"></div>
                                        </div>
                                    </div>
                                    <div>
                                        <div style="display:flex;justify-content:space-between;margin-bottom:5px;font-size:0.85rem;">
                                            <span>Data Quality</span>
                                            <span style="font-weight:600;color:var(--safe);">Excellent</span>
                                        </div>
                                        <div style="background:#e0e0e0;height:6px;border-radius:3px;overflow:hidden;">
                                            <div style="width:94%;height:100%;background:var(--safe);border-radius:3px;"></div>
                                        </div>
                                    </div>
                                </div>

                                <div style="background:linear-gradient(135deg,#c8e6c9,#a5d6a7);border-radius:12px;padding:15px;border-left:4px solid var(--safe);">
                                    <h4 style="font-size:0.9rem;font-weight:600;margin-bottom:8px;color:var(--dark);"><i class="fas fa-lightbulb"></i> Insight</h4>
                                    <div style="font-size:0.8rem;line-height:1.5;">
                                        Water quality improvement can prevent 92% of diarrhea cases based on correlation strength.
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Predictive Model -->
                        <div style="background:white;border-radius:12px;padding:25px;box-shadow:var(--shadow);margin-bottom:25px;">
                            <h3 style="font-size:1.2rem;font-weight:600;margin-bottom:20px;color:var(--dark);">Predictive Model Based on Correlations</h3>
                            <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:20px;">
                                <div style="background:var(--primary-light);border-radius:8px;padding:20px;">
                                    <div style="font-size:0.9rem;color:var(--text-secondary);margin-bottom:10px;">If E.coli increases by</div>
                                    <div style="font-size:2.5rem;font-weight:700;color:var(--danger);margin-bottom:5px;">+50%</div>
                                    <div style="font-size:0.85rem;color:var(--text-secondary);margin-top:10px;">Expected diarrhea cases:</div>
                                    <div style="font-size:1.5rem;font-weight:600;color:var(--danger);margin-top:5px;">+46 cases</div>
                                </div>
                                <div style="background:var(--primary-light);border-radius:8px;padding:20px;">
                                    <div style="font-size:0.9rem;color:var(--text-secondary);margin-bottom:10px;">If turbidity increases by</div>
                                    <div style="font-size:2.5rem;font-weight:700;color:var(--warning);margin-bottom:5px;">+30%</div>
                                    <div style="font-size:0.85rem;color:var(--text-secondary);margin-top:10px;">Expected typhoid cases:</div>
                                    <div style="font-size:1.5rem;font-weight:600;color:var(--warning);margin-top:5px;">+22 cases</div>
                                </div>
                                <div style="background:var(--primary-light);border-radius:8px;padding:20px;">
                                    <div style="font-size:0.9rem;color:var(--text-secondary);margin-bottom:10px;">If pH improves to optimal</div>
                                    <div style="font-size:2.5rem;font-weight:700;color:var(--safe);margin-bottom:5px;">7.0-7.5</div>
                                    <div style="font-size:0.85rem;color:var(--text-secondary);margin-top:10px;">Expected skin infection reduction:</div>
                                    <div style="font-size:1.5rem;font-weight:600;color:var(--safe);margin-top:5px;">-14 cases</div>
                                </div>
                            </div>
                        </div>

                        <!-- Action Recommendations -->
                        <div style="background:linear-gradient(135deg,#e3f2fd,#bbdefb);border-radius:12px;padding:20px;border-left:4px solid var(--primary);">
                            <h4 style="font-size:1.1rem;font-weight:600;margin-bottom:15px;color:var(--dark);"><i class="fas fa-tasks"></i> Evidence-Based Recommendations</h4>
                            <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:15px;font-size:0.9rem;line-height:1.6;">
                                <div> <strong>Priority 1:</strong> Reduce E.coli contamination in Bijaipur to prevent 92% of diarrhea cases</div>
                                <div> <strong>Priority 2:</strong> Improve turbidity levels to reduce typhoid risk by 74%</div>
                                <div> <strong>Priority 3:</strong> Balance pH levels to prevent 68% of skin infections</div>
                                <div> <strong>Long-term:</strong> Maintain bacteria counts below threshold for overall 54% disease reduction</div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <!-- Footer -->
        <footer>
            <div class="container">
                <div class="footer-content">
                    <div class="footer-section">
                        <h3>Team Curio</h3>
                        <p>Advanced community health monitoring and alert system powered by AI and real-time data analytics.</p>
                    </div>
                    <div class="footer-section">
                        <h3>Quick Links</h3>
                        <ul class="footer-links">
                            <li><a href="#" class="nav-link" data-section="dashboard">Dashboard</a></li>
                            <li><a href="#" class="nav-link" data-section="monitoring">Monitoring</a></li>
                            <li><a href="#" class="nav-link" data-section="alerts">Alert History</a></li>
                            <li><a href="#" class="nav-link" data-section="analytics">Analytics</a></li>
                        </ul>
                    </div>
                    <div class="footer-section">
                        <h3>Resources</h3>
                        <ul class="footer-links">
                            <li><a href="#">Health Guidelines</a></li>
                            <li><a href="#">Emergency Protocols</a></li>
                            <li><a href="#">Community Resources</a></li>
                            <li><a href="#">Training Materials</a></li>
                        </ul>
                    </div>
                    <div class="footer-section">
                        <h3>Contact</h3>
                        <ul class="footer-links">
                            <li><a href="#"><i class="fas fa-envelope"></i> support@teamcurio.com</a></li>
                            <li><a href="#"><i class="fas fa-phone"></i> Emergency Helpline</a></li>
                            <li><a href="#"><i class="fas fa-map-marker-alt"></i> Northeast India</a></li>
                        </ul>
                    </div>
                </div>
                <div class="copyright">
                    &copy; 2025 Team Curio. All rights reserved. | Smart Community Health Monitoring System
                </div>
            </div>
        </footer>
    </div>

    <script>
        // Global variables
        let currentUserType = '';
        let currentLanguage = 'en';
        
        // Language configuration - Northeast Tribal Languages
        const languages = [
            { code: 'en', name: 'English', flag: '' },
            { code: 'as', name: 'Assamese', flag: '' },
            { code: 'bn', name: 'Bengali', flag: '' },
            { code: 'mni', name: 'Manipuri (Meitei)', flag: '' },
            { code: 'brx', name: 'Bodo', flag: '' },
            { code: 'miz', name: 'Mizo', flag: '' },
            { code: 'nag', name: 'Naga (Ao)', flag: '' },
            { code: 'kha', name: 'Khasi', flag: '' },
            { code: 'grt', name: 'Garo', flag: '' },
            { code: 'trp', name: 'Kokborok', flag: '' },
            { code: 'njz', name: 'Nepali', flag: '' },
            { code: 'lus', name: 'Mishing', flag: '' }
        ];

        // Select user type and show login page
        function selectUserType(userType) {
            currentUserType = userType;
            document.getElementById('welcome-page').style.display = 'none';
            document.getElementById('login-page').style.display = 'flex';
            
            // Update login page based on user type
            const badge = document.getElementById('user-type-badge');
            if (userType === 'villager') {
                badge.textContent = 'Community Villager';
                badge.style.background = 'var(--primary-light)';
                badge.style.color = 'var(--primary)';
            } else {
                badge.textContent = 'ASHA Worker / Health Official';
                badge.style.background = 'var(--warning)';
                badge.style.color = 'white';
            }
        }

        // Initialize language modal
        function initializeLanguageModal() {
            const languageList = document.getElementById('language-list');
            
            languages.forEach(language => {
                const languageOption = document.createElement('div');
                languageOption.className = `language-option ${language.code === currentLanguage ? 'active' : ''}`;
                languageOption.setAttribute('data-lang', language.code);
                languageOption.innerHTML = `
                    <div class="language-flag">${language.flag}</div>
                    <span>${language.name}</span>
                `;
                
                languageOption.addEventListener('click', function() {
                    selectLanguage(language.code);
                });
                
                languageList.appendChild(languageOption);
            });
            
            // Language button click
            document.getElementById('language-btn').addEventListener('click', function(e) {
                e.preventDefault();
                document.getElementById('language-modal').classList.add('show');
                document.getElementById('user-menu').classList.remove('show');
            });
            
            // Close language modal
            document.getElementById('language-close').addEventListener('click', function() {
                document.getElementById('language-modal').classList.remove('show');
            });
            
            // Close modal when clicking outside
            document.getElementById('language-modal').addEventListener('click', function(e) {
                if (e.target === this) {
                    document.getElementById('language-modal').classList.remove('show');
                }
            });
        }
        
        // Select language function
        function selectLanguage(langCode) {
            currentLanguage = langCode;
            
            // Update active language in modal
            document.querySelectorAll('.language-option').forEach(option => {
                option.classList.remove('active');
                if (option.getAttribute('data-lang') === langCode) {
                    option.classList.add('active');
                }
            });
            
            // Close modal
            document.getElementById('language-modal').classList.remove('show');
            
            // Show confirmation toast
            const languageName = languages.find(lang => lang.code === langCode).name;
            showToast(`Language changed to ${languageName}`);
            
            // In a real application, you would update all text content here
            console.log(`Language changed to: ${languageName}`);
        }

        // Toast notification function (Global scope)
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toast-message');
            
            toastMessage.textContent = message;
            toast.style.background = type === 'success' ? 'var(--safe)' : 'var(--danger)';
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Login functionality
        document.getElementById('login-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const passwordError = document.getElementById('password-error');
            
            // Check if credentials are correct
            if (email === 'priyeranjan07@gmail.com' && password === 'teamcurio') {
                // Direct login without spinner or success message
                document.getElementById('login-page').style.display = 'none';
                document.getElementById('dashboard').style.display = 'block';
                initializeDashboard(currentUserType);
            } else {
                // Show error message
                passwordError.style.display = 'block';
                document.getElementById('password').style.borderColor = 'var(--danger)';
            }
        });
        
        // Clear error when user starts typing
        document.getElementById('password').addEventListener('input', function() {
            document.getElementById('password-error').style.display = 'none';
            this.style.borderColor = 'var(--medium-gray)';
        });

        // Forgot password and create account links
        document.getElementById('forgot-password').addEventListener('click', function(e) {
            e.preventDefault();
            alert('Password reset link has been sent to your email address.');
        });

        document.getElementById('create-account').addEventListener('click', function(e) {
            e.preventDefault();
            alert('Account creation feature will be available soon. Please contact support for immediate access.');
        });

        // Dashboard initialization
        function checkAndDisplayDangerAlerts(userType) {
            if (userType !== 'villager') return; // Only show for villagers
            
            const dangerSensors = mockSensorsData.filter(s => s.status === 'danger');
            const banner = document.getElementById('danger-alerts-banner');
            const locationsDiv = document.getElementById('danger-locations');
            
            if (dangerSensors.length > 0) {
                // Show banner
                banner.style.display = 'block';
                
                // Build locations list
                let locationsHTML = '<strong style="display: block; margin-bottom: 0.5rem;">Affected Water Sources:</strong>';
                dangerSensors.forEach(sensor => {
                    locationsHTML += `
                        <div style="padding: 0.5rem 0; border-bottom: 1px solid rgba(255, 255, 255, 0.2); display: flex; justify-content: space-between; align-items: center;">
                            <span><i class="fas fa-tint"></i> ${sensor.location}</span>
                            <span style="background: rgba(255, 255, 255, 0.3); padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.85rem; font-weight: 600;">E.coli: ${sensor.ecoli} CFU</span>
                        </div>
                    `;
                });
                locationsHTML += '<div style="padding: 0.5rem 0; margin-top: 0.5rem; font-size: 0.9rem; opacity: 0.9;"><i class="fas fa-info-circle"></i> Do not use water from these sources until further notice</div>';
                
                locationsDiv.innerHTML = locationsHTML;
                
                // Add event listeners
                document.getElementById('view-sensor-details-btn').onclick = function() {
                    // Navigate to sensor report
                    const reportsNav = document.querySelector('[data-section="reports"]');
                    if (reportsNav) {
                        reportsNav.click();
                    }
                };
                
                document.getElementById('close-alert-btn').onclick = function() {
                    banner.style.display = 'none';
                };
            } else {
                banner.style.display = 'none';
            }
        }

        function initializeDashboard(userType) {
            // Update user display name based on user type
            const displayName = userType === 'villager' ? 'Community Member' : 'Health Worker';
            document.getElementById('user-display-name').textContent = displayName;
            
            // Check and display danger alerts for villagers
            checkAndDisplayDangerAlerts(userType);
            
            // Show/hide features based on user type
            if (userType === 'healthworker') {
                document.getElementById('health-worker-section').style.display = 'block';
                document.getElementById('disease-report-nav').style.display = 'flex';
                document.getElementById('reports-nav').style.display = 'flex';
                // Show ASHA-specific dashboard
                document.getElementById('asha-worker-dashboard').style.display = 'block';
                document.getElementById('dashboard-section').style.display = 'none';
                // Hide all other ASHA sections initially
                document.getElementById('asha-location-overview').style.display = 'none';
                document.getElementById('asha-water-quality').style.display = 'none';
                document.getElementById('asha-health-status').style.display = 'none';
                document.getElementById('asha-trends').style.display = 'none';
                document.getElementById('asha-distribution').style.display = 'none';
                // Initialize ASHA dashboard
                initializeASHADashboard();
                return; // Exit early; don't initialize main dashboard
            }

            // Simple Backend Simulation - All data is generated in the browser
            class BackendSimulator {
                constructor() {
                    this.alerts = [
                        {
                            id: 'HTH-ALERT-7281',
                            severity: 'High',
                            location: 'Bishnupur District',
                            detected: '2 hours ago',
                            description: 'Increased cases of waterborne diseases reported in the area. Correlation analysis shows potential outbreak. 8 hospital admissions reported with similar symptoms including fever and dehydration.',
                            status: 'active'
                        },
                        {
                            id: 'HTH-2023-0921',
                            severity: 'Medium',
                            location: 'Imphal West District',
                            detected: '15 minutes ago',
                            description: 'Unusual health patterns detected in community health center. Preliminary analysis indicates possible seasonal illness cluster.',
                            status: 'active'
                        }
                    ];

                    this.notifications = [
                        {
                            id: 1,
                            title: 'New Health Alert',
                            message: 'Increased disease cases in Bishnupur District',
                            time: '10 minutes ago',
                            type: 'danger',
                            read: false
                        },
                        {
                            id: 2,
                            title: 'Weekly Report Generated',
                            message: 'Community health report for Northeast India is ready',
                            time: '2 hours ago',
                            type: 'info',
                            read: false
                        },
                        {
                            id: 3,
                            title: 'System Update',
                            message: 'New features added to the dashboard',
                            time: '1 day ago',
                            type: 'info',
                            read: true
                        },
                        {
                            id: 4,
                            title: 'Alert Resolved',
                            message: 'Health concern in Imphal West has been addressed',
                            time: '2 days ago',
                            type: 'safe',
                            read: true
                        }
                    ];
                }

                // Simulate API delay
                async delay(ms) {
                    return new Promise(resolve => setTimeout(resolve, ms));
                }

                // Get dashboard data
                async getDashboardData() {
                    await this.delay(500); // Simulate network delay
                    
                    // Generate slightly different data each time for realism
                    const healthIndex = 85 + Math.random() * 3;
                    const activeAlerts = this.alerts.filter(a => a.status === 'active').length;
                    const diseaseCases = 120 + Math.floor(Math.random() * 10);
                    
                    return {
                        healthIndex: healthIndex,
                        activeAlerts: activeAlerts,
                        diseaseCases: diseaseCases,
                        trend: {
                            health: (Math.random() > 0.5 ? 1 : -1) * (1 + Math.random() * 2),
                            alerts: (Math.random() > 0.5 ? 1 : -1) * (1 + Math.random() * 3),
                            cases: (Math.random() > 0.5 ? 1 : -1) * (2 + Math.random() * 4)
                        }
                    };
                }

                // Get health data
                async getHealthData(days = 30) {
                    await this.delay(300);
                    
                    // Generate date labels
                    const labels = this.generateDateLabels(days);
                    
                    return {
                        labels: labels,
                        diseaseCases: this.generateRandomData(labels.length, 20, 60),
                        hospitalVisits: this.generateRandomData(labels.length, 15, 45),
                        recoveryRate: this.generateRandomData(labels.length, 70, 95, true)
                    };
                }

                // Get disease data
                async getDiseaseData() {
                    await this.delay(200);
                    return {
                        labels: ['Waterborne', 'Respiratory', 'Vector-Borne', 'Seasonal', 'Other'],
                        cases: [35, 25, 20, 15, 5]
                    };
                }

                // Get alerts
                async getAlerts(filter = 'all') {
                    await this.delay(400);
                    let filteredAlerts = this.alerts;
                    
                    if (filter === 'critical') {
                        filteredAlerts = this.alerts.filter(a => a.severity === 'High');
                    } else if (filter === 'resolved') {
                        filteredAlerts = this.alerts.filter(a => a.status === 'resolved');
                    }
                    
                    return { alerts: filteredAlerts };
                }

                // Get notifications
                async getNotifications() {
                    await this.delay(300);
                    return this.notifications;
                }

                // Mark notification as read
                async markNotificationAsRead(id) {
                    await this.delay(200);
                    const notification = this.notifications.find(n => n.id === id);
                    if (notification) {
                        notification.read = true;
                    }
                    return { success: true };
                }

                // Submit disease report
                async submitDiseaseReport(reportData) {
                    await this.delay(1000);
                    
                    // Generate a report ID
                    const reportId = 'REP-' + Date.now();
                    
                    console.log('Disease report submitted:', reportData);
                    return { 
                        success: true, 
                        message: 'Disease report submitted successfully!',
                        reportId: reportId,
                        timestamp: new Date().toISOString()
                    };
                }

                // Notify authorities
                async notifyAuthorities(alertId, message, method) {
                    await this.delay(800);
                    
                    let methodText = "";
                    switch(method) {
                        case 'email':
                            methodText = "via Email";
                            break;
                        case 'call':
                            methodText = "via Phone Call";
                            break;
                        case 'emergency':
                            methodText = "via Emergency Protocol";
                            break;
                    }
                    
                    console.log(`Notifying authorities about alert ${alertId} ${methodText}: ${message}`);
                    return { 
                        success: true, 
                        message: `Authorities notified successfully ${methodText}! Quick action expected within minutes.`,
                        timestamp: new Date().toISOString()
                    };
                }

                // Dismiss alert
                async dismissAlert(alertId) {
                    await this.delay(600);
                    
                    const alertIndex = this.alerts.findIndex(a => a.id === alertId);
                    if (alertIndex !== -1) {
                        this.alerts[alertIndex].status = 'resolved';
                        return { success: true, message: 'Alert dismissed successfully' };
                    } else {
                        return { success: false, message: 'Alert not found' };
                    }
                }

                // Generate report
                async generateReport() {
                    await this.delay(1000);
                    return { 
                        success: true, 
                        message: 'Report generated successfully',
                        report: {
                            id: 'REP-' + Date.now(),
                            generatedAt: new Date().toISOString(),
                            content: {
                                healthIndex: 86.4,
                                activeAlerts: this.alerts.filter(a => a.status === 'active').length,
                                diseaseCases: 124,
                                qualityMetrics: {
                                    waterQuality: '85% Safe',
                                    airQuality: '92% Good',
                                    diseaseSpread: 'Controlled'
                                }
                            }
                        }
                    };
                }

                // Send analytics
                async sendAnalytics() {
                    await this.delay(1500);
                    return {
                        success: true,
                        message: 'Analytics report has been sent to your registered email and SMS'
                    };
                }

                // Utility functions
                generateDateLabels(days) {
                    const labels = [];
                    const now = new Date();
                    
                    for (let i = days - 1; i >= 0; i--) {
                        const date = new Date(now);
                        date.setDate(date.getDate() - i);
                        labels.push(date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' }));
                    }
                    
                    return labels;
                }

                generateRandomData(count, min, max, inverse = false) {
                    const data = [];
                    for (let i = 0; i < count; i++) {
                        let value = min + Math.random() * (max - min);
                        if (inverse) {
                            value = max - (value - min);
                        }
                        data.push(Math.round(value));
                    }
                    return data;
                }
            }

            // Initialize the backend simulator
            const backend = new BackendSimulator();

            // Initialize Charts
            // Load initial data
            loadDashboardData();
            loadHealthData(30);
            loadDiseaseData();
            loadAlerts();
            loadNotifications();

            // Navigation handling
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Update active nav link
                    document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show corresponding section
                    const sectionId = this.getAttribute('data-section') + '-section';
                    document.querySelectorAll('.content-section').forEach(section => {
                        section.classList.remove('active');
                    });
                    const section = document.getElementById(sectionId);
                    if (section) {
                        section.classList.add('active');
                        // Initialize reports chart when reports section is clicked
                        if (this.getAttribute('data-section') === 'reports') {
                            setTimeout(() => {
                                initializeWaterQualityReports();
                                setupReportsButtonHandlers();
                            }, 100);
                        }
                    }
                });
            });

            // User menu handling
            document.getElementById('user-profile').addEventListener('click', function() {
                document.getElementById('user-menu').classList.toggle('show');
            });

            // Close user menu when clicking outside
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.user-profile')) {
                    document.getElementById('user-menu').classList.remove('show');
                }
            });

            // Health Trends Chart
            const healthCtx = document.getElementById('healthChart').getContext('2d');
            window.healthChart = new Chart(healthCtx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [
                        {
                            label: 'Disease Cases',
                            data: [],
                            borderColor: '#ea4335',
                            backgroundColor: 'rgba(234, 67, 53, 0.1)',
                            tension: 0.3,
                            fill: true,
                            borderWidth: 2
                        },
                        {
                            label: 'Hospital Visits',
                            data: [],
                            borderColor: '#f9ab00',
                            backgroundColor: 'rgba(249, 171, 0, 0.1)',
                            tension: 0.3,
                            fill: true,
                            borderWidth: 2
                        },
                        {
                            label: 'Recovery Rate %',
                            data: [],
                            borderColor: '#34a853',
                            backgroundColor: 'rgba(52, 168, 83, 0.1)',
                            tension: 0.3,
                            fill: true,
                            borderWidth: 2
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                drawBorder: false
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });

            // Disease Distribution Chart
            const diseaseCtx = document.getElementById('diseaseChart').getContext('2d');
            window.diseaseChart = new Chart(diseaseCtx, {
                type: 'bar',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'Cases Reported',
                        data: [],
                        backgroundColor: [
                            '#ea4335',
                            '#f9ab00',
                            '#34a853',
                            '#1a73e8',
                            '#8e44ad'
                        ],
                        borderWidth: 0,
                        borderRadius: 5,
                        borderSkipped: false,
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                display: false
                            }
                        },
                        y: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });

            // Time period selector
            document.getElementById('time-period').addEventListener('change', function(e) {
                loadHealthData(parseInt(e.target.value));
            });

            // Alert filter selector
            document.getElementById('alert-filter').addEventListener('change', function(e) {
                loadAlerts(e.target.value);
            });

            // Region tag click
            document.getElementById('region-tag').addEventListener('click', function() {
                document.getElementById('access-modal').classList.add('show');
            });

            // Close modal
            document.getElementById('close-modal').addEventListener('click', function() {
                document.getElementById('access-modal').classList.remove('show');
            });

            // Notification bell click
            document.getElementById('notification-bell').addEventListener('click', function() {
                document.getElementById('notification-panel').classList.toggle('show');
                updateNotificationBadge();
            });

            // Close notifications
            document.getElementById('close-notifications').addEventListener('click', function() {
                document.getElementById('notification-panel').classList.remove('show');
            });

            // Show map button
            document.getElementById('show-map-btn').addEventListener('click', function() {
                document.getElementById('map-overlay').classList.add('show');
                
                // Simulate map loading
                setTimeout(function() {
                    document.getElementById('map-overlay').classList.remove('show');
                    showToast('Map loaded successfully! Location: Bishnupur District');
                }, 3000);
            });

            // Close map
            document.getElementById('close-map').addEventListener('click', function() {
                document.getElementById('map-overlay').classList.remove('show');
            });

            // View analytics button
            document.getElementById('view-analytics-btn').addEventListener('click', function() {
                showLoading(true);
                backend.sendAnalytics()
                    .then(data => {
                        showLoading(false);
                        showToast('Analytics sent to your email and SMS!');
                    })
                    .catch(error => {
                        showLoading(false);
                        console.error('Error:', error);
                        showToast('Failed to send analytics', 'error');
                    });
            });

            // Notify Authorities button - Show options
            document.getElementById('notify-btn').addEventListener('click', function() {
                document.getElementById('notification-options').classList.toggle('show');
            });

            // Notification method selection
            document.querySelectorAll('.notification-method').forEach(method => {
                method.addEventListener('click', function() {
                    const methodType = this.getAttribute('data-method');
                    showLoading(true);
                    
                    backend.notifyAuthorities(document.getElementById('alert-id-display').textContent, 'Increased cases of waterborne diseases reported', methodType)
                        .then(data => {
                            showLoading(false);
                            document.getElementById('notification-options').classList.remove('show');
                            showToast(data.message);
                        })
                        .catch(error => {
                            showLoading(false);
                            console.error('Error:', error);
                            showToast('Failed to notify authorities', 'error');
                        });
                });
            });

            // Disease report form submission
            document.getElementById('disease-report-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const formData = {
                    reportType: document.getElementById('report-type').value,
                    location: document.getElementById('location').value,
                    diseaseType: document.getElementById('disease-type').value,
                    casesReported: document.getElementById('cases-reported').value,
                    symptoms: document.getElementById('symptoms').value,
                    description: document.getElementById('description').value,
                    urgency: document.getElementById('urgency').value,
                    contact: document.getElementById('contact').value,
                    timestamp: new Date().toISOString()
                };
                
                showLoading(true);
                backend.submitDiseaseReport(formData)
                    .then(data => {
                        showLoading(false);
                        showToast('Disease report submitted successfully! Reference ID: ' + data.reportId);
                        document.getElementById('disease-report-form').reset();
                    })
                    .catch(error => {
                        showLoading(false);
                        console.error('Error:', error);
                        showToast('Failed to submit disease report', 'error');
                    });
            });

            // Alert System Interaction
            const steps = document.querySelectorAll('.step');
            let currentStep = 2; // Starting at step 3 (Notification)
            
            // Simulate step progression
            setInterval(() => {
                steps[currentStep].classList.remove('active');
                steps[currentStep].classList.add('completed');
                
                currentStep++;
                if (currentStep >= steps.length) {
                    currentStep = 0;
                    // Reset all steps
                    steps.forEach(step => {
                        step.classList.remove('completed', 'active');
                    });
                }
                
                steps[currentStep].classList.add('active');
            }, 5000);

            // Loading function
            function showLoading(show) {
                const loading = document.getElementById('loading');
                if (show) {
                    loading.classList.remove('hidden');
                } else {
                    loading.classList.add('hidden');
                }
            }

            // Refresh data button
            document.getElementById('refresh-btn').addEventListener('click', function() {
                const btn = document.getElementById('refresh-btn');
                const originalText = btn.innerHTML;
                
                btn.innerHTML = '<i class="fas fa-sync-alt fa-spin"></i> Refreshing...';
                btn.disabled = true;
                
                showLoading(true);
                
                // Refresh all data
                Promise.all([
                    loadDashboardData(),
                    loadHealthData(30),
                    loadDiseaseData(),
                    loadAlerts()
                ]).then(() => {
                    showLoading(false);
                    btn.innerHTML = originalText;
                    btn.disabled = false;
                    
                    // Check and display danger alerts for villagers
                    checkAndDisplayDangerAlerts(currentUserType);
                    showToast('Data refreshed successfully!');
                }).catch(error => {
                    showLoading(false);
                    btn.innerHTML = originalText;
                    btn.disabled = false;
                    console.error('Error refreshing data:', error);
                    showToast('Error refreshing data', 'error');
                });
            });

            // Dismiss Alert button
            document.getElementById('dismiss-btn').addEventListener('click', function() {
                showLoading(true);
                backend.dismissAlert(document.getElementById('alert-id-display').textContent)
                    .then(data => {
                        showLoading(false);
                        showToast('Alert dismissed successfully!');
                        loadDashboardData();
                        loadAlerts();
                    })
                    .catch(error => {
                        showLoading(false);
                        console.error('Error:', error);
                        showToast('Failed to dismiss alert', 'error');
                    });
            });

            // Export Report button
            document.getElementById('export-btn').addEventListener('click', function() {
                exportHealthReportToExcel();
            });

            // Logout functionality
            document.getElementById('logout-btn').addEventListener('click', function(e) {
                e.preventDefault();
                if (confirm('Are you sure you want to logout?')) {
                    document.getElementById('dashboard').style.display = 'none';
                    document.getElementById('welcome-page').style.display = 'flex';
                    document.getElementById('email').value = '';
                    document.getElementById('password').value = '';
                    document.getElementById('password-error').style.display = 'none';
                }
            });

            // Helper function to get parent section for sidebar links
            function getParentSection(subsection) {
                const mapping = {
                    'dashboard': 'dashboard',
                    'location-overview': 'monitoring',
                    'water-quality': 'monitoring',
                    'health-status': 'monitoring',
                    'trends': 'analytics',
                    'distribution': 'analytics',
                    'correlations': 'analytics',
                    'disease-report': 'disease-report',
                    'outbreak-management': 'disease-report',
                    'response-teams': 'disease-report',
                    'water-reports': 'reports'
                };
                
                return mapping[subsection] || 'dashboard';
            }

            // Update notification badge count
            function updateNotificationBadge() {
                const unreadCount = backend.notifications.filter(n => !n.read).length;
                document.getElementById('notification-badge').textContent = unreadCount;
            }

            // Load notifications
            async function loadNotifications() {
                try {
                    const notifications = await backend.getNotifications();
                    const notificationList = document.getElementById('notification-list');
                    notificationList.innerHTML = '';
                    
                    notifications.forEach(notification => {
                        const li = document.createElement('li');
                        li.className = `notification-item ${notification.read ? '' : 'unread'}`;
                        li.innerHTML = `
                            <div class="notification-icon ${notification.type}">
                                <i class="fas fa-${notification.type === 'danger' ? 'exclamation-triangle' : notification.type === 'warning' ? 'exclamation-circle' : 'info-circle'}"></i>
                            </div>
                            <div class="notification-content">
                                <div class="notification-title">${notification.title}</div>
                                <div class="notification-message">${notification.message}</div>
                                <div class="notification-time">${notification.time}</div>
                            </div>
                        `;
                        
                        li.addEventListener('click', async function() {
                            if (!notification.read) {
                                await backend.markNotificationAsRead(notification.id);
                                li.classList.remove('unread');
                                updateNotificationBadge();
                            }
                        });
                        
                        notificationList.appendChild(li);
                    });
                    
                    updateNotificationBadge();
                } catch (error) {
                    console.error('Error loading notifications:', error);
                }
            }

            // API Functions
            async function loadDashboardData() {
                try {
                    const data = await backend.getDashboardData();
                    
                    document.getElementById('health-index').textContent = data.healthIndex.toFixed(1);
                    document.getElementById('active-alerts-count').textContent = data.activeAlerts;
                    document.getElementById('disease-cases').textContent = data.diseaseCases;
                    
                    // Update trends
                    const trends = document.querySelectorAll('.trend');
                    trends[0].querySelector('span').textContent = `${data.trend.health.toFixed(1)}%`;
                    trends[1].querySelector('span').textContent = `${data.trend.alerts.toFixed(1)}%`;
                    trends[2].querySelector('span').textContent = `${data.trend.cases.toFixed(1)}%`;
                    
                    // Update trend arrows
                    trends[0].className = `trend ${data.trend.health >= 0 ? 'up' : 'down'}`;
                    trends[1].className = `trend ${data.trend.alerts >= 0 ? 'up' : 'down'}`;
                    trends[2].className = `trend ${data.trend.cases >= 0 ? 'up' : 'down'}`;
                } catch (error) {
                    console.error('Error loading dashboard data:', error);
                }
            }

            async function loadHealthData(days) {
                try {
                    const data = await backend.getHealthData(days);
                    
                    window.healthChart.data.labels = data.labels;
                    window.healthChart.data.datasets[0].data = data.diseaseCases;
                    window.healthChart.data.datasets[1].data = data.hospitalVisits;
                    window.healthChart.data.datasets[2].data = data.recoveryRate;
                    window.healthChart.update();
                } catch (error) {
                    console.error('Error loading health data:', error);
                }
            }

            async function loadDiseaseData() {
                try {
                    const data = await backend.getDiseaseData();
                    
                    window.diseaseChart.data.labels = data.labels;
                    window.diseaseChart.data.datasets[0].data = data.cases;
                    window.diseaseChart.update();
                } catch (error) {
                    console.error('Error loading disease data:', error);
                }
            }

            async function loadAlerts(filter = 'all') {
                try {
                    const data = await backend.getAlerts(filter);
                    
                    // Update alert display
                    if (data.alerts && data.alerts.length > 0) {
                        const alert = data.alerts[0];
                        document.getElementById('alert-id-display').textContent = alert.id;
                        document.querySelector('#current-alert .info-item:nth-child(2) p').textContent = alert.severity;
                        document.querySelector('#current-alert .info-item:nth-child(3) p').textContent = alert.location;
                        document.querySelector('#current-alert .info-item:nth-child(4) p').textContent = alert.detected;
                        document.querySelector('#current-alert .alert-description p').textContent = alert.description;
                    }
                } catch (error) {
                    console.error('Error loading alerts:', error);
                }
            }
        }

        // ============ ASHA DASHBOARD INITIALIZATION ============
        function initializeASHADashboard() {
            // Mock ASHA data
            const affectedVillagers = [
                {id:'v1', name:'Ramesh T.', age:34, household:'H-12', status:'Sick', contact:'+919812345001'},
                {id:'v2', name:'Sita K.', age:28, household:'H-05', status:'Under Observation', contact:'+919812345002'},
                {id:'v3', name:'Gopal M.', age:46, household:'H-21', status:'Recovered', contact:'+919812345003'},
                {id:'v4', name:'Radha P.', age:12, household:'H-08', status:'Sick', contact:'+919812345004'},
                {id:'v5', name:'Asha L.', age:62, household:'H-02', status:'Critical', contact:'+919812345005'},
                {id:'v6', name:'Vikram S.', age:38, household:'H-15', status:'Sick', contact:'+919812345006'}
            ];

            const diseaseData = [
                {name:'Diarrhea', count:45},
                {name:'Typhoid', count:18},
                {name:'Cholera', count:6},
                {name:'Hepatitis A', count:12},
                {name:'Dysentery', count:23}
            ];

            const waterQualityData = {
                'well-1': {
                    labels:['Day -6','Day -5','Day -4','Day -3','Day -2','Yesterday','Today'],
                    ecoli:[80,95,110,140,130,150,120],
                    ph:[7.1,7.0,6.9,6.8,6.7,6.7,6.8],
                    turbidity:[4.2,5.0,6.1,7.3,9.0,8.5,8.2],
                    bacteria:[22,25,28,32,35,38,45]
                },
                'pond-1': {
                    labels:['Day -6','Day -5','Day -4','Day -3','Day -2','Yesterday','Today'],
                    ecoli:[220,210,230,250,240,260,280],
                    ph:[6.5,6.6,6.6,6.4,6.3,6.4,6.4],
                    turbidity:[10.2,11.1,12.5,13.0,14.2,15.0,15.6],
                    bacteria:[55,60,65,70,75,80,85]
                },
                'tube-1': {
                    labels:['Day -6','Day -5','Day -4','Day -3','Day -2','Yesterday','Today'],
                    ecoli:[20,18,25,22,19,21,17],
                    ph:[7.4,7.3,7.2,7.3,7.3,7.2,7.4],
                    turbidity:[1.2,1.0,1.1,1.3,1.2,1.0,0.9],
                    bacteria:[8,7,9,8,6,7,5]
                }
            };

            // Populate villagers table
            const villagersTbody = document.getElementById('asha-villagers-table');
            affectedVillagers.forEach(v => {
                const tr = document.createElement('tr');
                tr.style.borderBottom = '1px solid var(--medium-gray)';
                tr.innerHTML = `
                    <td style="padding:10px;">${v.name}</td>
                    <td style="padding:10px;">${v.age}</td>
                    <td style="padding:10px;">${v.household}</td>
                    <td style="padding:10px;"><span style="background:${v.status==='Sick'?'#ffebee':v.status==='Critical'?'#fde7f3':'#e8f5e9'};color:${v.status==='Sick'?'var(--danger)':v.status==='Critical'?'var(--critical)':'var(--safe)'};padding:4px 8px;border-radius:4px;font-size:0.85rem;font-weight:600;">${v.status}</span></td>
                    <td style="padding:10px;">${v.contact}</td>
                    <td style="padding:10px;"><button class="asha-chat-btn btn btn-outline" data-id="${v.id}" style="padding:5px 10px;font-size:0.85rem;">Chat</button></td>
                `;
                villagersTbody.appendChild(tr);
            });

            // Initialize disease distribution chart
            const diseaseCtx = document.getElementById('asha-disease-chart').getContext('2d');
            new Chart(diseaseCtx, {
                type: 'bar',
                data: {
                    labels: diseaseData.map(d => d.name),
                    datasets: [{
                        label: 'Cases',
                        data: diseaseData.map(d => d.count),
                        backgroundColor: ['#1a73e8','#f9ab00','#ea4335','#34a853','#c5221f'],
                        borderRadius: 6,
                        borderSkipped: false
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {legend: {display: false}},
                    scales: {y: {beginAtZero: true}}
                }
            });

            // Initialize water quality chart
            const waterCtx = document.getElementById('asha-water-quality-chart').getContext('2d');
            let waterQualityChart = null;

            function updateWaterChart(sourceId) {
                const data = waterQualityData[sourceId];
                if (!data) return;
                
                const config = {
                    type: 'line',
                    data: {
                        labels: data.labels,
                        datasets: [
                            {label:'E.coli (CFU/100ml)',data:data.ecoli,borderColor:'#c5221f',backgroundColor:'rgba(197,34,31,0.08)',yAxisID:'y1',tension:0.3,borderWidth:2},
                            {label:'pH',data:data.ph,borderColor:'#1a73e8',backgroundColor:'rgba(26,115,232,0.06)',yAxisID:'y2',tension:0.3,borderWidth:2},
                            {label:'Turbidity (NTU)',data:data.turbidity,borderColor:'#f9ab00',backgroundColor:'rgba(249,171,0,0.06)',yAxisID:'y1',tension:0.3,borderWidth:2},
                            {label:'Bacteria (g/L)',data:data.bacteria,borderColor:'#5f6368',backgroundColor:'rgba(95,99,104,0.06)',yAxisID:'y1',tension:0.3,borderWidth:2}
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        interaction: {mode:'index',intersect:false},
                        plugins: {legend: {display: true, position: 'bottom'}},
                        scales: {
                            y1: {type:'linear', position:'left', title: {display:true,text:'E.coli / Turbidity / Bacteria'}, beginAtZero:true},
                            y2: {type:'linear', position:'right', title: {display:true,text:'pH'}, beginAtZero:false, grid: {drawOnChartArea:false}}
                        }
                    }
                };

                if (waterQualityChart) waterQualityChart.destroy();
                waterQualityChart = new Chart(waterCtx, config);

                // Update mini metrics
                const lastIdx = data.ecoli.length - 1;
                document.getElementById('asha-metric-ecoli').textContent = data.ecoli[lastIdx];
                document.getElementById('asha-metric-ph').textContent = data.ph[lastIdx].toFixed(1);
                document.getElementById('asha-metric-turbidity').textContent = data.turbidity[lastIdx].toFixed(1);
                document.getElementById('asha-metric-bacteria').textContent = data.bacteria[lastIdx];
            }

            // Initial chart
            updateWaterChart('well-1');

            // Water source selector
            document.getElementById('asha-water-source').addEventListener('change', (e) => {
                updateWaterChart(e.target.value);
            });

            // Chat functionality
            let currentChatId = null;

            function renderMessages(id) {
                const box = document.getElementById('asha-chat-messages');
                box.innerHTML = '';
                const msgs = JSON.parse(localStorage.getItem('asha_chat_' + id) || '[]');
                msgs.forEach(m => {
                    const el = document.createElement('div');
                    el.style.marginBottom = '8px';
                    if (m.from === 'asha') {
                        el.style.textAlign = 'right';
                        el.innerHTML = `<div style="display:inline-block;background:var(--primary);color:#fff;padding:8px 12px;border-radius:12px;max-width:85%;word-wrap:break-word;">${escapeHtml(m.text)}</div>`;
                    } else {
                        el.style.textAlign = 'left';
                        el.innerHTML = `<div style="display:inline-block;background:#f1f3f4;color:var(--dark);padding:8px 12px;border-radius:12px;max-width:85%;word-wrap:break-word;">${escapeHtml(m.text)}</div>`;
                    }
                    box.appendChild(el);
                });
                box.scrollTop = box.scrollHeight;
            }

            function saveMessage(id, msg) {
                const key = 'asha_chat_' + id;
                const arr = JSON.parse(localStorage.getItem(key) || '[]');
                arr.push(msg);
                localStorage.setItem(key, JSON.stringify(arr));
            }

            function escapeHtml(text) {
                const map = {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#39;'};
                return text.replace(/[&<>"']/g, ch => map[ch]);
            }

            // Chat button handlers
            document.querySelectorAll('.asha-chat-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const id = btn.getAttribute('data-id');
                    currentChatId = id;
                    const v = affectedVillagers.find(x => x.id === id);
                    document.getElementById('asha-chat-name').textContent = v ? v.name : 'Villager';
                    renderMessages(id);
                });
            });

            // Chat send
            document.getElementById('asha-chat-send').addEventListener('click', () => {
                const input = document.getElementById('asha-chat-input');
                const text = input.value && input.value.trim();
                if (!text || !currentChatId) return;
                const msg = {from:'asha',text:text,ts:Date.now()};
                saveMessage(currentChatId, msg);
                renderMessages(currentChatId);
                input.value = '';

                // Simulate reply
                setTimeout(() => {
                    const reply = {from:'villager',text:'Received. Will respond shortly.',ts:Date.now()};
                    saveMessage(currentChatId, reply);
                    renderMessages(currentChatId);
                }, 800);
            });

            // Enter to send
            document.getElementById('asha-chat-input').addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    document.getElementById('asha-chat-send').click();
                }
            });

            // Refresh button
            document.getElementById('asha-refresh-btn').addEventListener('click', () => {
                updateWaterChart(document.getElementById('asha-water-source').value);
                alert('Dashboard data refreshed!');
            });

            // Initialize Water Quality Reports
            initializeWaterQualityReports();
            setupReportsButtonHandlers();

            // Sidebar navigation for both villagers and health workers
            document.querySelectorAll('.sidebar-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Update active sidebar link
                    document.querySelectorAll('.sidebar-link').forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                    
                    const subsection = this.getAttribute('data-subsection');
                    
                    // Hide ASHA dashboard and all ASHA sections
                    const ashaElements = ['asha-worker-dashboard', 'asha-location-overview', 'asha-water-quality', 
                                         'asha-health-status', 'asha-trends', 'asha-distribution'];
                    ashaElements.forEach(id => {
                        const elem = document.getElementById(id);
                        if (elem) elem.style.display = 'none';
                    });
                    
                    // Hide regular content sections
                    document.querySelectorAll('.content-section').forEach(section => {
                        section.classList.remove('active');
                    });
                    
                    // Check if user is ASHA worker or villager
                    const isASHAWorker = currentUserType === 'healthworker';
                    
                    // Show the appropriate section based on user type
                    if (isASHAWorker) {
                        // ASHA worker navigation
                        switch(subsection) {
                            case 'dashboard':
                                document.getElementById('asha-worker-dashboard').style.display = 'block';
                                break;
                            case 'location-overview':
                                document.getElementById('asha-location-overview').style.display = 'block';
                                break;
                            case 'water-quality':
                                document.getElementById('asha-water-quality').style.display = 'block';
                                break;
                            case 'health-status':
                                document.getElementById('asha-health-status').style.display = 'block';
                                break;
                            case 'trends':
                                document.getElementById('asha-trends').style.display = 'block';
                                initializeASHATrendsChart();
                                break;
                            case 'distribution':
                                document.getElementById('asha-distribution').style.display = 'block';
                                initializeASHADistributionChart();
                                break;
                            case 'disease-report':
                                document.getElementById('disease-report-section').classList.add('active');
                                break;
                            case 'outbreak-management':
                                document.getElementById('outbreak-management-section').classList.add('active');
                                break;
                            case 'response-teams':
                                document.getElementById('response-teams-section').classList.add('active');
                                break;
                            case 'water-reports':
                                document.getElementById('reports-section').classList.add('active');
                                setTimeout(() => {
                                    initializeWaterQualityReports();
                                    setupReportsButtonHandlers();
                                }, 100);
                                break;
                            default:
                                document.getElementById('asha-worker-dashboard').style.display = 'block';
                        }
                    } else {
                        // Villager navigation
                        switch(subsection) {
                            case 'dashboard':
                                document.getElementById('dashboard-section').classList.add('active');
                                break;
                            case 'location-overview':
                                document.getElementById('location-overview-section').classList.add('active');
                                break;
                            case 'water-quality':
                                document.getElementById('water-quality-section').classList.add('active');
                                break;
                            case 'health-status':
                                document.getElementById('health-status-section').classList.add('active');
                                break;
                            case 'trends':
                                document.getElementById('trends-section').classList.add('active');
                                break;
                            case 'distribution':
                                document.getElementById('distribution-section').classList.add('active');
                                break;
                            case 'correlations':
                                document.getElementById('correlations-section').classList.add('active');
                                break;
                            default:
                                document.getElementById('dashboard-section').classList.add('active');
                        }
                    }
                });
            });

            // Top navigation bar handling for both villagers and health workers
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Update active nav link
                    document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                    
                    const section = this.getAttribute('data-section');
                    
                    // Hide all ASHA sections
                    const ashaElements = ['asha-worker-dashboard', 'asha-location-overview', 'asha-water-quality', 
                                         'asha-health-status', 'asha-trends', 'asha-distribution'];
                    ashaElements.forEach(id => {
                        const elem = document.getElementById(id);
                        if (elem) elem.style.display = 'none';
                    });
                    
                    // Hide all regular content sections
                    document.querySelectorAll('.content-section').forEach(sec => {
                        sec.classList.remove('active');
                    });
                    
                    // Check if user is ASHA worker or villager
                    const isASHAWorker = currentUserType === 'healthworker';
                    
                    // Show the appropriate section based on user type and clicked nav item
                    if (isASHAWorker) {
                        // ASHA worker top navigation
                        switch(section) {
                            case 'dashboard':
                                document.getElementById('asha-worker-dashboard').style.display = 'block';
                                // Reset sidebar to dashboard
                                document.querySelectorAll('.sidebar-link').forEach(l => l.classList.remove('active'));
                                const dashboardLink = document.querySelector('.sidebar-link[data-subsection="dashboard"]');
                                if (dashboardLink) dashboardLink.classList.add('active');
                                break;
                            case 'monitoring':
                                document.getElementById('monitoring-section').classList.add('active');
                                break;
                            case 'alerts':
                                document.getElementById('alerts-section').classList.add('active');
                                break;
                            case 'analytics':
                                document.getElementById('analytics-section').classList.add('active');
                                break;
                            case 'reports':
                                document.getElementById('reports-section').classList.add('active');
                                setTimeout(() => {
                                    initializeWaterQualityReports();
                                    setupReportsButtonHandlers();
                                }, 100);
                                break;
                            case 'disease-report':
                                document.getElementById('disease-report-section').classList.add('active');
                                break;
                            default:
                                document.getElementById('asha-worker-dashboard').style.display = 'block';
                        }
                    } else {
                        // Villager top navigation
                        switch(section) {
                            case 'dashboard':
                                document.getElementById('dashboard-section').classList.add('active');
                                // Reset sidebar to dashboard
                                document.querySelectorAll('.sidebar-link').forEach(l => l.classList.remove('active'));
                                const dashboardLink = document.querySelector('.sidebar-link[data-subsection="dashboard"]');
                                if (dashboardLink) dashboardLink.classList.add('active');
                                break;
                            case 'monitoring':
                                document.getElementById('monitoring-section').classList.add('active');
                                break;
                            case 'alerts':
                                document.getElementById('alerts-section').classList.add('active');
                                break;
                            case 'analytics':
                                document.getElementById('analytics-section').classList.add('active');
                                break;
                            case 'reports':
                                document.getElementById('reports-section').classList.add('active');
                                setTimeout(() => {
                                    initializeWaterQualityReports();
                                    setupReportsButtonHandlers();
                                }, 100);
                                break;
                            default:
                                document.getElementById('dashboard-section').classList.add('active');
                        }
                    }
                });
            });
        }

        // Initialize Water Quality Reports Section
        // Mock sensor data with numeric lat/lng for accurate Google Maps display
        const mockSensorsData = [
            {id: 'SNS-001', location: 'Community Well - Mandawa', source: 'Well - Primary', lat: 24.6637, lng: 93.7716, gps: '24.6637 N, 93.7716 E', status: 'safe', lastReading: '2 min ago', ecoli: 65, ph: 7.1, turbidity: 1.8, bacteria: 28},
            {id: 'SNS-002', location: 'Borewell - Bijaipur', source: 'Pond - North', lat: 24.8170, lng: 93.9368, gps: '24.8170 N, 93.9368 E', status: 'danger', lastReading: '5 min ago', ecoli: 280, ph: 6.2, turbidity: 12.5, bacteria: 95},
            {id: 'SNS-003', location: 'Spring Source - Ranakpur', source: 'Tube-well - South', lat: 24.3333, lng: 93.6833, gps: '24.3333 N, 93.6833 E', status: 'safe', lastReading: '8 min ago', ecoli: 15, ph: 7.3, turbidity: 0.9, bacteria: 12},
            {id: 'SNS-004', location: 'Tank Storage - Bhamatsar', source: 'Well - Community', lat: 24.6333, lng: 94.0000, gps: '24.6333 N, 94.0000 E', status: 'warning', lastReading: '12 min ago', ecoli: 95, ph: 6.8, turbidity: 3.4, bacteria: 42},
            {id: 'SNS-005', location: 'Hand Pump - Amarpura', source: 'River Water Point', lat: 24.4980, lng: 93.9810, gps: '24.4980 N, 93.9810 E', status: 'safe', lastReading: 'Just now', ecoli: 22, ph: 7.0, turbidity: 1.2, bacteria: 18},
            {id: 'SNS-006', location: 'Tube Well - Bishanpur', source: 'Spring Water', lat: 25.0667, lng: 94.3667, gps: '25.0667 N, 94.3667 E', status: 'warning', lastReading: '4 min ago', ecoli: 78, ph: 7.2, turbidity: 2.6, bacteria: 51}
        ];

        const maintenanceSchedule = [
            {sensor: 'SNS-001', task: 'Calibration Check', due: 'Tomorrow', priority: 'High'},
            {sensor: 'SNS-002', task: 'Filter Replacement', due: 'In 3 days', priority: 'Medium'},
            {sensor: 'SNS-004', task: 'Battery Check', due: 'In 5 days', priority: 'Low'},
            {sensor: 'SNS-003', task: 'Sensor Cleaning', due: 'Next Week', priority: 'Medium'},
            {sensor: 'SNS-005', task: 'Firmware Update', due: 'In 2 days', priority: 'High'}
        ];

        function getStatusColor(status) {
            return status === 'safe' ? '#34a853' : status === 'warning' ? '#f9ab00' : '#ea4335';
        }

        // Open external Google Maps directly for a sensor by ID (no embedded map, always external)
        function openExternalMapForSensor(sensorId) {
            const sensor = (window.mockSensorsData || mockSensorsData || []).find(s => s.id === sensorId);
            if (!sensor) {
                alert('Sensor not found.');
                return;
            }
            // Use numeric lat/lng if available (priority), otherwise parse GPS string
            let lat = sensor.lat;
            let lng = sensor.lng;
            if (lat === undefined || lng === undefined) {
                const latlng = parseGpsToLatLng(sensor.gps || sensor.gpsString || sensor.coords);
                if (latlng) {
                    lat = latlng.lat;
                    lng = latlng.lng;
                }
            }
            let url = '';
            if (lat !== undefined && lng !== undefined) {
                url = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(lat + ',' + lng)}`;
            } else if (sensor.location) {
                url = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(sensor.location)}`;
            }
            if (url) {
                const w = window.open(url, '_blank');
                if (!w) {
                    alert('Popup blocked. Allow popups for this page.');
                }
            }
        }

        function getStatusBadge(status) {
            const labels = {safe: ' Safe', warning: ' Caution', danger: ' Alert', critical: '!!! Critical'};
            const colors = {safe: '#c8e6c9', warning: '#fff3cd', danger: '#ffebee', critical: '#fde7f3'};
            const textColors = {safe: '#1b5e20', warning: '#ff6f00', danger: '#c5221f', critical: '#c5221f'};
            return `<span style="background: ${colors[status]}; color: ${textColors[status]}; padding: 0.25rem 0.75rem; border-radius: 20px; font-weight: 600;">${labels[status]}</span>`;
        }

        function getParameterColor(value, param) {
            if (param === 'ecoli') {
                if (value <= 50) return '#34a853';
                if (value <= 100) return '#f9ab00';
                return '#ea4335';
            } else if (param === 'ph') {
                if (value >= 6.5 && value <= 8.5) return '#34a853';
                return '#f9ab00';
            } else if (param === 'turbidity') {
                if (value <= 5) return '#34a853';
                if (value <= 10) return '#f9ab00';
                return '#ea4335';
            }
            return '#1a73e8';
        }

        function populateRecentReadings() {
            const readingsList = document.getElementById('reports-readings-list');
            if (!readingsList) return;
            readingsList.innerHTML = '';
            
            mockSensorsData.forEach(sensor => {
                const statusColor = getStatusColor(sensor.status);
                readingsList.innerHTML += `
                    <div style="padding: 1rem; margin-bottom: 0.75rem; background: var(--light-gray); border-radius: 8px; border-left: 4px solid ${statusColor};">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                            <strong style="color: var(--primary);">${sensor.id}</strong>
                            <span style="font-size: 0.8rem; color: var(--dark-gray);">${sensor.lastReading}</span>
                        </div>
                        <div style="font-size: 0.85rem; color: var(--dark-gray); margin-bottom: 0.5rem;">${sensor.location}</div>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.5rem;">
                            <div style="background: white; padding: 0.5rem; border-radius: 4px; text-align: center;">
                                <div style="font-size: 0.7rem; color: var(--dark-gray);">E.coli</div>
                                <div style="font-weight: 700; font-size: 0.9rem; color: ${getParameterColor(sensor.ecoli, 'ecoli')};">${sensor.ecoli}</div>
                            </div>
                            <div style="background: white; padding: 0.5rem; border-radius: 4px; text-align: center;">
                                <div style="font-size: 0.7rem; color: var(--dark-gray);">pH</div>
                                <div style="font-weight: 700; font-size: 0.9rem; color: ${getParameterColor(sensor.ph, 'ph')};">${sensor.ph}</div>
                            </div>
                            <div style="background: white; padding: 0.5rem; border-radius: 4px; text-align: center;">
                                <div style="font-size: 0.7rem; color: var(--dark-gray);">Turbidity</div>
                                <div style="font-weight: 700; font-size: 0.9rem; color: ${getParameterColor(sensor.turbidity, 'turbidity')};">${sensor.turbidity}</div>
                            </div>
                        </div>
                    </div>
                `;
            });
        }

        function populateMaintenanceSchedule() {
            const maintenanceList = document.getElementById('reports-maintenance-list');
            if (!maintenanceList) return;
            maintenanceList.innerHTML = '';
            
            maintenanceSchedule.forEach(item => {
                const priorityColor = item.priority === 'High' ? '#ea4335' : item.priority === 'Medium' ? '#f9ab00' : '#34a853';
                maintenanceList.innerHTML += `
                    <div style="padding: 1rem; margin-bottom: 0.75rem; background: var(--light-gray); border-radius: 8px; border-left: 4px solid ${priorityColor};">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                            <strong style="color: var(--primary);">${item.sensor}</strong>
                            <span style="background: ${priorityColor}; color: white; padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.7rem; font-weight: 600;">${item.priority}</span>
                        </div>
                        <div style="font-size: 0.85rem; color: var(--dark-gray); margin-bottom: 0.25rem;">${item.task}</div>
                        <div style="font-size: 0.8rem; color: var(--dark-gray);"><i class="fas fa-clock"></i> Due: ${item.due}</div>
                    </div>
                `;
            });
        }

        function showSensorDetailsModal(sensorId) {
            const sensor = mockSensorsData.find(s => s.id === sensorId);
            if (!sensor) return;
            
            const modal = document.getElementById('sensor-details-modal');
            const modalContent = document.getElementById('sensor-modal-content');
            
            modalContent.innerHTML = `
                <div style="background: var(--light-gray); padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                        <div>
                            <div style="font-size: 0.8rem; color: var(--dark-gray); margin-bottom: 0.3rem;">Sensor ID</div>
                            <div style="font-weight: 700; color: var(--primary); font-size: 1rem;">${sensor.id}</div>
                        </div>
                        <div>
                            <div style="font-size: 0.8rem; color: var(--dark-gray); margin-bottom: 0.3rem;">Status</div>
                            <div>${getStatusBadge(sensor.status)}</div>
                        </div>
                        <div style="grid-column: 1/-1;">
                            <div style="font-size: 0.8rem; color: var(--dark-gray); margin-bottom: 0.3rem;">Location</div>
                            <div style="font-weight: 600; color: var(--dark);">${sensor.location}</div>
                        </div>
                        <div style="grid-column: 1/-1;">
                            <div style="font-size: 0.8rem; color: var(--dark-gray); margin-bottom: 0.3rem;">Water Source</div>
                            <div style="font-weight: 600; color: var(--dark);">${sensor.source}</div>
                        </div>
                        <div style="grid-column: 1/-1;">
                            <div style="font-size: 0.8rem; color: var(--dark-gray); margin-bottom: 0.3rem;">GPS Coordinates</div>
                            <div style="font-weight: 600; font-family: monospace; color: var(--dark);">${sensor.gps}</div>
                        </div>
                    </div>
                </div>
                <h4 style="margin-bottom: 1rem; font-weight: 700; color: var(--dark);">Current Readings</h4>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-bottom: 1.5rem;">
                    <div style="background: var(--light-gray); padding: 1rem; border-radius: 8px; text-align: center;">
                        <div style="font-size: 0.8rem; color: var(--dark-gray); margin-bottom: 0.5rem;">E.coli</div>
                        <div style="font-size: 1.8rem; font-weight: 700; color: ${getParameterColor(sensor.ecoli, 'ecoli')};">${sensor.ecoli}</div>
                        <div style="font-size: 0.7rem; color: var(--dark-gray); margin-top: 0.3rem;">CFU/100ml</div>
                    </div>
                    <div style="background: var(--light-gray); padding: 1rem; border-radius: 8px; text-align: center;">
                        <div style="font-size: 0.8rem; color: var(--dark-gray); margin-bottom: 0.5rem;">pH Level</div>
                        <div style="font-size: 1.8rem; font-weight: 700; color: ${getParameterColor(sensor.ph, 'ph')};">${sensor.ph}</div>
                        <div style="font-size: 0.7rem; color: var(--dark-gray); margin-top: 0.3rem;">pH Scale</div>
                    </div>
                    <div style="background: var(--light-gray); padding: 1rem; border-radius: 8px; text-align: center;">
                        <div style="font-size: 0.8rem; color: var(--dark-gray); margin-bottom: 0.5rem;">Turbidity</div>
                        <div style="font-size: 1.8rem; font-weight: 700; color: ${getParameterColor(sensor.turbidity, 'turbidity')};">${sensor.turbidity}</div>
                        <div style="font-size: 0.7rem; color: var(--dark-gray); margin-top: 0.3rem;">NTU</div>
                    </div>
                </div>
                <div style="background: #e3f2fd; padding: 1rem; border-radius: 8px; border-left: 4px solid var(--primary);">
                    <div style="font-weight: 600; margin-bottom: 0.3rem; color: var(--dark);">Last Updated</div>
                    <div style="font-size: 0.9rem; color: var(--dark-gray);">${sensor.lastReading}  ${new Date().toLocaleString()}</div>
                </div>
            `;
            
            modal.style.display = 'flex';
        }

        function closeModal() {
            const modal = document.getElementById('sensor-details-modal');
            if (modal) {
                modal.style.display = 'none';
            }
        }

        function initializeWaterQualityReports() {
            // Populate readings and maintenance
            populateRecentReadings();
            populateMaintenanceSchedule();

            // Create sample water quality chart for reports
            const reportsChartCanvas = document.getElementById('water-quality-reports-chart');
            if (reportsChartCanvas && reportsChartCanvas.getContext) {
                const ctx = reportsChartCanvas.getContext('2d');
                const hours = Array.from({length: 24}, (_, i) => `${i}:00`);
                
                const phData = Array.from({length: 24}, () => 7 + (Math.random() - 0.5) * 0.6);
                const ecoliData = Array.from({length: 24}, () => 50 + Math.random() * 80);
                const turbidityData = Array.from({length: 24}, () => 2 + (Math.random() - 0.5) * 2);
                const bacteriaData = Array.from({length: 24}, () => 30 + Math.random() * 30);
                
                if (window.waterQualityReportsChart) {
                    window.waterQualityReportsChart.destroy();
                }
                
                window.waterQualityReportsChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: hours,
                        datasets: [
                            {
                                label: 'pH Level',
                                data: phData,
                                borderColor: '#1a73e8',
                                backgroundColor: 'rgba(26, 115, 232, 0.05)',
                                borderWidth: 2,
                                tension: 0.3,
                                yAxisID: 'y'
                            },
                            {
                                label: 'E.coli (CFU)',
                                data: ecoliData,
                                borderColor: '#ea4335',
                                backgroundColor: 'rgba(234, 67, 53, 0.05)',
                                borderWidth: 2,
                                tension: 0.3,
                                yAxisID: 'y1'
                            },
                            {
                                label: 'Turbidity (NTU)',
                                data: turbidityData,
                                borderColor: '#f9ab00',
                                backgroundColor: 'rgba(249, 171, 0, 0.05)',
                                borderWidth: 2,
                                tension: 0.3,
                                yAxisID: 'y'
                            },
                            {
                                label: 'Bacteria Count',
                                data: bacteriaData,
                                borderColor: '#c5221f',
                                backgroundColor: 'rgba(197, 34, 31, 0.05)',
                                borderWidth: 2,
                                tension: 0.3,
                                yAxisID: 'y1'
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: true,
                        interaction: {mode:'index', intersect:false},
                        plugins: {
                            legend: {display: true, position: 'bottom'},
                            title: {display: false}
                        },
                        scales: {
                            y: {
                                type: 'linear',
                                position: 'left',
                                title: {display: true, text: 'pH & Turbidity'},
                                beginAtZero: false,
                                max: 10
                            },
                            y1: {
                                type: 'linear',
                                position: 'right',
                                title: {display: true, text: 'E.coli & Bacteria'},
                                beginAtZero: true,
                                grid: {drawOnChartArea: false}
                            }
                        }
                    }
                });
            }
        }

        // Export functions for Excel
        function exportSensorReportToExcel() {
            try {
                // Check if XLSX library is loaded
                if (typeof XLSX === 'undefined') {
                    console.error('XLSX library not loaded');
                    showToast('Excel export library not available. Please refresh the page.');
                    return;
                }
                
                // Check if mockSensorsData exists
                if (!mockSensorsData || mockSensorsData.length === 0) {
                    console.error('No sensor data available');
                    showToast('No sensor data available for export.');
                    return;
                }
                
                // Create a new workbook
                const workbook = XLSX.utils.book_new();
                
                // Prepare sensor data
                const sensorDataForExcel = mockSensorsData.map(sensor => ({
                    'Sensor ID': sensor.id,
                    'Location': sensor.location,
                    'Water Source': sensor.source,
                    'GPS Coordinates': sensor.gps,
                    'Status': sensor.status.toUpperCase(),
                    'E.coli (CFU/100ml)': sensor.ecoli,
                    'pH Level': sensor.ph,
                    'Turbidity (NTU)': sensor.turbidity,
                    'Bacteria Count': sensor.bacteria,
                    'Last Reading': sensor.lastReading
                }));
                
                // Add sensor data sheet
                const sensorSheet = XLSX.utils.json_to_sheet(sensorDataForExcel);
                XLSX.utils.book_append_sheet(workbook, sensorSheet, 'Sensor Data');
                
                // Prepare maintenance schedule data
                const maintenanceDataForExcel = maintenanceSchedule.map(item => ({
                    'Sensor ID': item.sensor,
                    'Task': item.task,
                    'Due Date': item.due,
                    'Priority': item.priority
                }));
                
                // Add maintenance sheet
                const maintenanceSheet = XLSX.utils.json_to_sheet(maintenanceDataForExcel);
                XLSX.utils.book_append_sheet(workbook, maintenanceSheet, 'Maintenance Schedule');
                
                // Prepare summary sheet
                const dangerCount = mockSensorsData.filter(s => s.status === 'danger').length;
                const warningCount = mockSensorsData.filter(s => s.status === 'warning').length;
                const safeCount = mockSensorsData.filter(s => s.status === 'safe').length;
                
                const summaryData = [
                    { Metric: 'Total Sensors', Value: mockSensorsData.length },
                    { Metric: 'Safe Sensors', Value: safeCount },
                    { Metric: 'Warning Sensors', Value: warningCount },
                    { Metric: 'Danger Sensors', Value: dangerCount },
                    { Metric: 'Report Generated', Value: new Date().toLocaleString() }
                ];
                
                const summarySheet = XLSX.utils.json_to_sheet(summaryData);
                XLSX.utils.book_append_sheet(workbook, summarySheet, 'Summary', 0);
                
                // Generate filename with timestamp
                const timestamp = new Date().toISOString().slice(0, 10);
                const filename = `Sensor_Report_${timestamp}.xlsx`;
                
                // Write the file using blob method for better compatibility
                const wbout = XLSX.write(workbook, { bookType: 'xlsx', type: 'array' });
                const blob = new Blob([wbout], { type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' });
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = filename;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                setTimeout(() => URL.revokeObjectURL(url), 100);
                
                // Show success message
                showToast('Sensor Report exported successfully as Excel file!');
            } catch (error) {
                console.error('Export error:', error);
                showToast('Error exporting Sensor Report: ' + error.message);
            }
        }

        function exportHealthReportToExcel() {
            try {
                // Check if XLSX library is loaded
                if (typeof XLSX === 'undefined') {
                    console.error('XLSX library not loaded');
                    showToast('Excel export library not available. Please refresh the page.');
                    return;
                }
                
                // Create a new workbook
                const workbook = XLSX.utils.book_new();
                
                // Prepare health summary data
                const healthSummary = [
                    { Metric: 'Health Index', Value: document.getElementById('health-index')?.textContent || '86.4' },
                    { Metric: 'Active Alerts', Value: document.getElementById('active-alerts-count')?.textContent || '8' },
                    { Metric: 'Disease Cases', Value: document.getElementById('disease-cases')?.textContent || '124' },
                    { Metric: 'Report Type', Value: 'Community Health Monitoring' },
                    { Metric: 'Generated Date', Value: new Date().toLocaleString() }
                ];
                
                const summarySheet = XLSX.utils.json_to_sheet(healthSummary);
                XLSX.utils.book_append_sheet(workbook, summarySheet, 'Health Summary', 0);
                
                // Prepare alert data
                const alertData = [
                    { 
                        'Alert ID': 'HTH-ALERT-7281', 
                        'Severity': 'High', 
                        'Location': 'Bishnupur District',
                        'Description': 'Increased cases of waterborne diseases',
                        'Status': 'Active'
                    },
                    { 
                        'Alert ID': 'HTH-2023-0921', 
                        'Severity': 'Medium', 
                        'Location': 'Imphal West District',
                        'Description': 'Monitoring disease patterns',
                        'Status': 'Active'
                    }
                ];
                
                const alertSheet = XLSX.utils.json_to_sheet(alertData);
                XLSX.utils.book_append_sheet(workbook, alertSheet, 'Active Alerts');
                
                // Generate filename with timestamp
                const timestamp = new Date().toISOString().slice(0, 10);
                const filename = `Health_Report_${timestamp}.xlsx`;
                
                // Write the file using blob method for better compatibility
                const wbout = XLSX.write(workbook, { bookType: 'xlsx', type: 'array' });
                const blob = new Blob([wbout], { type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' });
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = filename;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                setTimeout(() => URL.revokeObjectURL(url), 100);
                
                // Show success message
                showToast('Health Report exported successfully as Excel file!');
            } catch (error) {
                console.error('Export error:', error);
                showToast('Error exporting Health Report: ' + error.message);
            }
        }

        // Setup reports button handlers using event delegation
        function setupReportsButtonHandlers() {
            // Handle View Sensor and View on Map buttons
            document.addEventListener('click', function(e) {
                const mapBtn = e.target.closest('.view-map-btn');
                if (mapBtn) {
                    e.preventDefault();
                    e.stopPropagation();
                    const sensorId = mapBtn.getAttribute('data-sensor-id');
                    // Open Google Maps externally by default
                    openExternalMapForSensor(sensorId);
                    return false;
                }

                const viewBtn = e.target.closest('.view-sensor-btn');
                if (viewBtn) {
                    e.preventDefault();
                    e.stopPropagation();
                    const sensorId = viewBtn.getAttribute('data-sensor-id');
                    showSensorDetailsModal(sensorId);
                    return false;
                }
            }, true);

            // Handle modal close button
            const closeBtn = document.getElementById('modal-close-btn');
            if (closeBtn) {
                closeBtn.addEventListener('click', closeModal);
            }

            // Use event delegation on document level for other buttons
            document.addEventListener('click', function(e) {
                if (e.target.closest('#reports-refresh-btn')) {
                    e.preventDefault();
                    e.stopPropagation();
                    initializeWaterQualityReports();
                    if (typeof showToast !== 'undefined') {
                        showToast('Water quality reports refreshed!');
                    } else {
                        alert('Reports refreshed!');
                    }
                    return false;
                }
                
                if (e.target.closest('#reports-export-btn')) {
                    e.preventDefault();
                    e.stopPropagation();
                    exportSensorReportToExcel();
                    return false;
                }
            }, true);

            // Handle modal close on background click
            const modal = document.getElementById('sensor-details-modal');
            if (modal) {
                modal.addEventListener('click', function(e) {
                    if (e.target === this) {
                        closeModal();
                    }
                });
            }

            // Handle dropdown changes
            const timeRangeSelect = document.getElementById('reports-time-range');
            if (timeRangeSelect) {
                timeRangeSelect.addEventListener('change', function() {
                    initializeWaterQualityReports();
                }, true);
            }

            const sensorFilterSelect = document.getElementById('reports-sensor-filter');
            if (sensorFilterSelect) {
                sensorFilterSelect.addEventListener('change', function() {
                    initializeWaterQualityReports();
                }, true);
            }
        }

        // Add placeholder chart functions
        function initializeASHATrendsChart() {
            const ctx = document.getElementById('asha-trends-chart');
            if (ctx && ctx.getContext) {
                const chartCtx = ctx.getContext('2d');
                if (window.ashaTrendsChart) {
                    window.ashaTrendsChart.destroy();
                }
                window.ashaTrendsChart = new Chart(chartCtx, {
                    type: 'line',
                    data: {
                        labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
                        datasets: [{
                            label: 'Disease Cases',
                            data: [45, 52, 48, 55],
                            borderColor: '#ea4335',
                            backgroundColor: 'rgba(234, 67, 53, 0.1)',
                            tension: 0.3
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false
                    }
                });
            }
        }

        function initializeASHADistributionChart() {
            const ctx = document.getElementById('asha-distribution-chart');
            if (ctx && ctx.getContext) {
                const chartCtx = ctx.getContext('2d');
                if (window.ashaDistributionChart) {
                    window.ashaDistributionChart.destroy();
                }
                window.ashaDistributionChart = new Chart(chartCtx, {
                    type: 'pie',
                    data: {
                        labels: ['Diarrhea', 'Typhoid', 'Cholera', 'Hepatitis', 'Other'],
                        datasets: [{
                            data: [45, 18, 6, 12, 23],
                            backgroundColor: ['#ea4335', '#f9ab00', '#34a853', '#1a73e8', '#c5221f']
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false
                    }
                });
            }
        }

        <!-- Initialize language modal when page loads -->
        document.addEventListener('DOMContentLoaded', function() {
            initializeLanguageModal();
            initializeSMSAlertSystem();
        });

        // SMS Alert System
        function initializeSMSAlertSystem() {
            // Create SMS Modal
            const smsModal = document.createElement('div');
            smsModal.id = 'sms-alert-modal';
            smsModal.style.cssText = 'display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7);z-index:10000;align-items:center;justify-content:center;';
            smsModal.innerHTML = `
                <div style="background:white;border-radius:16px;width:90%;max-width:700px;max-height:90vh;overflow-y:auto;box-shadow:0 10px 40px rgba(0,0,0,0.3);">
                    <div style="background:linear-gradient(135deg,#ff5722,#f4511e);color:white;padding:25px;border-radius:16px 16px 0 0;position:relative;">
                        <button id="close-sms-modal" style="position:absolute;top:15px;right:15px;background:none;border:none;color:white;font-size:1.5rem;cursor:pointer;width:35px;height:35px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:background 0.3s;" onmouseover="this.style.background='rgba(255,255,255,0.2)'" onmouseout="this.style.background='none'">
                            <i class="fas fa-times"></i>
                        </button>
                        <h2 style="margin:0;font-size:1.8rem;font-weight:700;"><i class="fas fa-sms"></i> Send SMS Alert to Villagers</h2>
                        <p style="margin:10px 0 0 0;opacity:0.95;font-size:0.95rem;">Broadcast emergency alert via SMS to affected residents</p>
                    </div>
                    <div style="padding:30px;">
                        <!-- Alert Details -->
                        <div style="background:#f5f5f5;border-radius:12px;padding:20px;margin-bottom:25px;">
                            <h3 style="font-size:1.1rem;font-weight:600;margin:0 0 15px 0;color:var(--dark);">Alert Information</h3>
                            <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:15px;">
                                <div>
                                    <div style="font-size:0.85rem;color:var(--text-secondary);margin-bottom:5px;">Location</div>
                                    <div style="font-weight:600;font-size:1rem;" id="sms-location">-</div>
                                </div>
                                <div>
                                    <div style="font-size:0.85rem;color:var(--text-secondary);margin-bottom:5px;">Alert Type</div>
                                    <div style="font-weight:600;font-size:1rem;" id="sms-alert-type">-</div>
                                </div>
                                <div>
                                    <div style="font-size:0.85rem;color:var(--text-secondary);margin-bottom:5px;">Affected Population</div>
                                    <div style="font-weight:600;font-size:1rem;color:var(--danger);" id="sms-population">-</div>
                                </div>
                            </div>
                        </div>

                        <!-- SMS Configuration -->
                        <div style="margin-bottom:25px;">
                            <label style="display:block;font-weight:600;margin-bottom:10px;font-size:0.95rem;">Select Alert Language</label>
                            <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:10px;">
                                <label style="display:flex;align-items:center;background:#f9f9f9;padding:12px;border-radius:8px;cursor:pointer;border:2px solid #e0e0e0;transition:all 0.3s;" onmouseover="this.style.background='#e3f2fd';this.style.borderColor='var(--primary)'" onmouseout="if(!this.querySelector('input').checked){this.style.background='#f9f9f9';this.style.borderColor='#e0e0e0'}">
                                    <input type="radio" name="sms-language" value="english" checked style="margin-right:8px;cursor:pointer;" onchange="this.parentElement.style.background='#e3f2fd';this.parentElement.style.borderColor='var(--primary)';document.querySelectorAll('input[name=sms-language]').forEach(r=>{if(r!==this){r.parentElement.style.background='#f9f9f9';r.parentElement.style.borderColor='#e0e0e0'}})">
                                    <span style="font-weight:500;">English</span>
                                </label>
                                <label style="display:flex;align-items:center;background:#f9f9f9;padding:12px;border-radius:8px;cursor:pointer;border:2px solid #e0e0e0;transition:all 0.3s;" onmouseover="this.style.background='#e3f2fd';this.style.borderColor='var(--primary)'" onmouseout="if(!this.querySelector('input').checked){this.style.background='#f9f9f9';this.style.borderColor='#e0e0e0'}">
                                    <input type="radio" name="sms-language" value="hindi" style="margin-right:8px;cursor:pointer;" onchange="this.parentElement.style.background='#e3f2fd';this.parentElement.style.borderColor='var(--primary)';document.querySelectorAll('input[name=sms-language]').forEach(r=>{if(r!==this){r.parentElement.style.background='#f9f9f9';r.parentElement.style.borderColor='#e0e0e0'}})">
                                    <span style="font-weight:500;"></span>
                                </label>
                            </div>
                        </div>

                        <!-- SMS Message Preview -->
                        <div style="margin-bottom:25px;">
                            <label style="display:block;font-weight:600;margin-bottom:10px;font-size:0.95rem;">SMS Message Preview</label>
                            <div style="background:#fff3e0;border:2px solid #ff9800;border-radius:12px;padding:20px;font-family:monospace;font-size:0.9rem;line-height:1.6;position:relative;">
                                <div style="position:absolute;top:10px;right:10px;background:#ff9800;color:white;padding:4px 10px;border-radius:12px;font-size:0.75rem;font-weight:600;">160 characters</div>
                                <div id="sms-preview-text">
                                     ALERT: Water contamination detected in Bijaipur. DO NOT use water from borewell. Contact health worker immediately. - Team Curio Health Monitoring
                                </div>
                            </div>
                        </div>

                        <!-- SMS Gateway Selection -->
                        <div style="margin-bottom:25px;">
                            <label style="display:block;font-weight:600;margin-bottom:10px;font-size:0.95rem;">SMS Gateway Provider</label>
                            <select id="sms-gateway" style="width:100%;padding:12px;border:2px solid #e0e0e0;border-radius:8px;font-size:0.95rem;background:white;">
                                <option value="twilio">Twilio SMS Gateway</option>
                                <option value="msg91">MSG91 (India)</option>
                                <option value="fast2sms">Fast2SMS</option>
                                <option value="textlocal">TextLocal</option>
                                <option value="aws-sns">AWS SNS</option>
                                <option value="govt-sms">Government SMS Portal</option>
                            </select>
                        </div>

                        <!-- Recipient Selection -->
                        <div style="margin-bottom:25px;">
                            <label style="display:block;font-weight:600;margin-bottom:10px;font-size:0.95rem;">Select Recipients</label>
                            <div style="display:grid;gap:10px;">
                                <label style="display:flex;align-items:center;background:#f9f9f9;padding:15px;border-radius:8px;cursor:pointer;border:2px solid #e0e0e0;" onchange="updateRecipientCount()">
                                    <input type="checkbox" class="sms-recipient" data-count="1890" checked style="margin-right:12px;width:18px;height:18px;cursor:pointer;">
                                    <div style="flex:1;">
                                        <div style="font-weight:600;margin-bottom:3px;">All Villagers in Affected Area</div>
                                        <div style="font-size:0.85rem;color:var(--text-secondary);">Estimated recipients: <span class="recipient-count">1,890</span> registered mobile numbers</div>
                                    </div>
                                </label>
                                <label style="display:flex;align-items:center;background:#f9f9f9;padding:15px;border-radius:8px;cursor:pointer;border:2px solid #e0e0e0;" onchange="updateRecipientCount()">
                                    <input type="checkbox" class="sms-recipient" data-count="45" checked style="margin-right:12px;width:18px;height:18px;cursor:pointer;">
                                    <div style="flex:1;">
                                        <div style="font-weight:600;margin-bottom:3px;">Village Health Workers</div>
                                        <div style="font-size:0.85rem;color:var(--text-secondary);">ASHA workers and health officials: <span class="recipient-count">45</span> contacts</div>
                                    </div>
                                </label>
                                <label style="display:flex;align-items:center;background:#f9f9f9;padding:15px;border-radius:8px;cursor:pointer;border:2px solid #e0e0e0;" onchange="updateRecipientCount()">
                                    <input type="checkbox" class="sms-recipient" data-count="12" checked style="margin-right:12px;width:18px;height:18px;cursor:pointer;">
                                    <div style="flex:1;">
                                        <div style="font-weight:600;margin-bottom:3px;">Village Leaders & Panchayat</div>
                                        <div style="font-size:0.85rem;color:var(--text-secondary);">Local administration: <span class="recipient-count">12</span> contacts</div>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <!-- Estimated Cost -->
                        <div style="background:#e8f5e9;border-radius:12px;padding:20px;margin-bottom:25px;">
                            <div style="display:flex;justify-content:space-between;align-items:center;">
                                <div>
                                    <div style="font-size:0.9rem;color:var(--text-secondary);margin-bottom:5px;">Total Recipients</div>
                                    <div style="font-size:1.8rem;font-weight:700;color:var(--dark);" id="total-recipients">1,947</div>
                                </div>
                                <div>
                                    <div style="font-size:0.9rem;color:var(--text-secondary);margin-bottom:5px;">Estimated Cost</div>
                                    <div style="font-size:1.8rem;font-weight:700;color:var(--safe);" id="estimated-cost">389</div>
                                </div>
                                <div>
                                    <div style="font-size:0.9rem;color:var(--text-secondary);margin-bottom:5px;">Delivery Time</div>
                                    <div style="font-size:1.8rem;font-weight:700;color:var(--primary);">~2 min</div>
                                </div>
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div style="display:flex;gap:12px;">
                            <button id="send-sms-btn" class="btn" style="flex:1;background:linear-gradient(135deg,#ff5722,#f4511e);color:white;padding:15px;font-size:1rem;font-weight:600;border-radius:8px;border:none;cursor:pointer;transition:transform 0.2s;" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                                <i class="fas fa-paper-plane"></i> Send SMS Alert Now
                            </button>
                            <button id="schedule-sms-btn" class="btn btn-outline" style="padding:15px 25px;font-size:1rem;border-radius:8px;">
                                <i class="fas fa-clock"></i> Schedule
                            </button>
                            <button id="cancel-sms-btn" class="btn" style="background:#757575;color:white;padding:15px 25px;font-size:1rem;border-radius:8px;border:none;cursor:pointer;">
                                Cancel
                            </button>
                        </div>

                        <!-- SMS Configuration Help -->
                        <div style="margin-top:20px;padding:15px;background:#e3f2fd;border-radius:8px;font-size:0.85rem;">
                            <strong><i class="fas fa-info-circle"></i> Note:</strong> To enable SMS alerts, configure your SMS gateway credentials in System Settings. Messages are sent via your selected provider's API.
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(smsModal);

            // Update recipient count function
            window.updateRecipientCount = function() {
                let total = 0;
                document.querySelectorAll('.sms-recipient:checked').forEach(checkbox => {
                    total += parseInt(checkbox.getAttribute('data-count'));
                });
                document.getElementById('total-recipients').textContent = total.toLocaleString();
                document.getElementById('estimated-cost').textContent = '' + Math.ceil(total * 0.20);
            };

            // Handle SMS alert button clicks
            document.querySelectorAll('.send-sms-alert-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const location = this.getAttribute('data-location');
                    const alertType = this.getAttribute('data-alert');
                    const population = this.getAttribute('data-population');
                    
                    // Update modal with alert details
                    document.getElementById('sms-location').textContent = location;
                    document.getElementById('sms-alert-type').textContent = alertType;
                    document.getElementById('sms-population').textContent = population + ' people';
                    
                    // Update SMS preview
                    const messages = {
                        english: ` ALERT: ${alertType} detected in ${location}. Follow safety guidelines. Contact health worker. - Team Curio`,
                        hindi: ` : ${location}  ${alertType}  -         -  `
                    };
                    
                    // Update message preview based on language selection
                    document.querySelectorAll('input[name="sms-language"]').forEach(radio => {
                        radio.addEventListener('change', function() {
                            document.getElementById('sms-preview-text').textContent = messages[this.value];
                        });
                    });
                    
                    document.getElementById('sms-preview-text').textContent = messages['english'];
                    
                    // Show modal
                    smsModal.style.display = 'flex';
                });
            });

            // Close modal handlers
            document.getElementById('close-sms-modal').addEventListener('click', function() {
                smsModal.style.display = 'none';
            });

            document.getElementById('cancel-sms-btn').addEventListener('click', function() {
                smsModal.style.display = 'none';
            });

            // Send SMS button
            document.getElementById('send-sms-btn').addEventListener('click', async function() {
                const location = document.getElementById('sms-location').textContent;
                const alertType = document.getElementById('sms-alert-type').textContent;
                const recipients = document.getElementById('total-recipients').textContent;
                const gateway = document.getElementById('sms-gateway').value;
                const language = document.querySelector('input[name="sms-language"]:checked').value;
                const message = document.getElementById('sms-preview-text').textContent;
                
                // Show sending animation
                this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Sending SMS...';
                this.disabled = true;
                
                try {
                    // Get phone numbers based on selected gateway
                    const phoneNumbers = getRecipientPhoneNumbers();
                    
                    // **FAST2SMS API CALL**
                    const apiUrl = gateway === 'fast2sms' 
                        ? 'http://localhost:3000/send-sms'  // Fast2SMS backend
                        : 'http://localhost:3000/send-sms'; // Other gateways
                    
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            recipients: phoneNumbers,
                            message: message,
                            language: language,
                            location: location,
                            alertType: alertType,
                            gateway: gateway
                        })
                    });
                    
                    const data = await response.json();
                    
                    if (data.success) {
                        this.innerHTML = '<i class="fas fa-check-circle"></i> SMS Sent Successfully!';
                        this.style.background = 'linear-gradient(135deg,#4caf50,#388e3c)';
                        showToast(` ${data.sent} SMS alerts sent to ${location} residents via ${gateway.toUpperCase()}`);
                        
                        // Log message ID for tracking
                        console.log('Message ID:', data.message_id);
                    } else {
                        throw new Error(data.error || 'Failed to send SMS');
                    }
                    
                } catch (error) {
                    // Handle errors
                    console.error('SMS Error:', error);
                    
                    // Check if it's a connection error (backend not running)
                    if (error.message.includes('fetch') || error.message.includes('Failed to fetch')) {
                        this.innerHTML = '<i class="fas fa-exclamation-circle"></i> Backend Not Running';
                        this.style.background = 'linear-gradient(135deg,#ff9800,#f57c00)';
                        showToast(' SMS server not configured. Run: node sms-server.js', 'warning');
                        
                        // Show demo mode after 1 second
                        setTimeout(() => {
                            this.innerHTML = '<i class="fas fa-check-circle"></i> Demo Mode';
                            showToast(`Demo: Would send to ${recipients} recipients in ${location}`);
                        }, 1000);
                    } else {
                        // API error
                        this.innerHTML = '<i class="fas fa-times-circle"></i> Send Failed';
                        this.style.background = 'linear-gradient(135deg,#f44336,#c62828)';
                        showToast(` Error: ${error.message}`, 'error');
                    }
                }
                
                // Reset button after 3 seconds
                setTimeout(() => {
                    smsModal.style.display = 'none';
                    this.innerHTML = '<i class="fas fa-paper-plane"></i> Send SMS Alert Now';
                    this.style.background = 'linear-gradient(135deg,#ff5722,#f4511e)';
                    this.disabled = false;
                }, 3000);
            });
            
            // Function to get actual phone numbers from database/recipients
            function getRecipientPhoneNumbers() {
                // **REPLACE WITH ACTUAL DATABASE QUERY**
                // This should fetch phone numbers from your user database
                
                const phoneNumbers = [];
                
                // Check which recipient groups are selected
                document.querySelectorAll('.sms-recipient:checked').forEach(checkbox => {
                    const count = parseInt(checkbox.getAttribute('data-count'));
                    const label = checkbox.parentElement.querySelector('div div').textContent;
                    
                    if (label.includes('All Villagers')) {
                        // Example: Fetch from database
                        // phoneNumbers.push(...await fetchVillagerPhones(location));
                        
                        // Demo: Generate sample Indian numbers
                        for (let i = 0; i < Math.min(count, 5); i++) {
                            phoneNumbers.push(`+919${String(Math.floor(Math.random() * 900000000) + 100000000)}`);
                        }
                    }
                    if (label.includes('Health Workers')) {
                        // phoneNumbers.push(...await fetchHealthWorkerPhones());
                        phoneNumbers.push('+919876543210'); // Sample
                    }
                    if (label.includes('Village Leaders')) {
                        // phoneNumbers.push(...await fetchLeaderPhones());
                        phoneNumbers.push('+919876543211'); // Sample
                    }
                });
                
                // In production, return actual numbers from database
                // return phoneNumbers;
                
                // For demo/testing (REMOVE IN PRODUCTION)
                return ['+917987489225', '+918809640031', '+919876543210', '+919876543211'];
            }

            // Click outside modal to close
            smsModal.addEventListener('click', function(e) {
                if (e.target === smsModal) {
                    smsModal.style.display = 'none';
                }
            });
        }
    </script>
    <!-- Google Maps integration for sensor locations -->
    <script>
        // Parse GPS strings like "24.6637 N, 93.7716 E" into {lat, lng}
        function parseGpsToLatLng(gps) {
            if (!gps || typeof gps !== 'string') return null;
            // Normalize degree symbol and whitespace
            const cleaned = gps.replace(/[]/g, '').replace(/\s+/g, ' ').trim();
            const parts = cleaned.split(',');
            if (parts.length < 2) return null;
            function partToNum(p) {
                p = p.trim();
                const dir = /([NSEW])$/i.exec(p);
                const num = parseFloat(p.replace(/[^0-9.\-]/g, ''));
                if (isNaN(num)) return null;
                if (dir && dir[1]) {
                    const d = dir[1].toUpperCase();
                    if (d === 'S' || d === 'W') return -Math.abs(num);
                }
                return num;
            }
            const lat = partToNum(parts[0]);
            const lng = partToNum(parts[1]);
            if (lat === null || lng === null) return null;
            return {lat: lat, lng: lng};
        }

        let __gmaps_map = null;
        let __gmaps_marker = null;

        function initMap() {
            // Default center: Bishnupur District (fallback)
            const defaultCenter = {lat: 24.66, lng: 93.77};
            const el = document.getElementById('google-map');
            if (!el) return;
            __gmaps_map = new google.maps.Map(el, {
                center: defaultCenter,
                zoom: 12,
                mapTypeControl: true,
            });
            __gmaps_marker = new google.maps.Marker({position: defaultCenter, map: __gmaps_map});
            // Hide any previous error message
            const errEl = document.getElementById('map-error');
            if (errEl) errEl.style.display = 'none';
        }

        // Show a sensor on the map by sensorId (uses mockSensorsData defined earlier)
        function openSensorOnMap(sensorId) {
            const overlay = document.getElementById('map-overlay');
            if (overlay) overlay.classList.add('show');

            const sensor = (window.mockSensorsData || []).find(s => s.id === sensorId);
            if (!sensor) return;

            // Update location text
            const locText = document.getElementById('map-location-text');
            if (locText) locText.textContent = `${sensor.location}  ${sensor.gps}`;

            // Try to parse GPS string to numeric lat/lng
            const latlng = parseGpsToLatLng(sensor.gps || sensor.gpsString || sensor.coords);
            // store lat/lng on overlay dataset for external open
            if (overlay) {
                overlay.dataset.lat = '';
                overlay.dataset.lng = '';
            }

            // If google maps is not loaded yet, wait for it
            let _attempts = 0;
            function setMapPosition(pos) {
                _attempts++;
                if (!__gmaps_map) {
                    if (_attempts > 20) {
                        // show friendly error after several retries
                        const errEl = document.getElementById('map-error');
                        if (errEl) {
                            errEl.style.display = 'block';
                            errEl.textContent = 'Google Maps did not load. Possible causes: missing/invalid API key, billing not enabled, or referer restrictions. Check browser console for API errors.';
                        }
                        // Fallback: open Google Maps website in a new tab using coordinates if available
                        try {
                            if (pos && pos.lat && pos.lng) {
                                const url = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(pos.lat + ',' + pos.lng)}`;
                                window.open(url, '_blank');
                            }
                        } catch (e) {
                            console.warn('Fallback to external Google Maps failed', e);
                        }
                        return;
                    }
                    // If API isn't loaded yet, keep trying a few times
                    setTimeout(() => setMapPosition(pos), 300);
                    return;
                }
                __gmaps_map.setCenter(pos);
                __gmaps_map.setZoom(14);
                if (!__gmaps_marker) {
                    __gmaps_marker = new google.maps.Marker({position: pos, map: __gmaps_map});
                } else {
                    __gmaps_marker.setPosition(pos);
                    __gmaps_marker.setMap(__gmaps_map);
                }
                // hide error if previously shown
                const errEl = document.getElementById('map-error');
                if (errEl) errEl.style.display = 'none';
            }

            if (latlng) {
                if (overlay) {
                    overlay.dataset.lat = latlng.lat;
                    overlay.dataset.lng = latlng.lng;
                }
                setMapPosition(latlng);
            } else if (sensor.address) {
                // Optionally geocode address if gps string not available (requires Geocoding service / API key enabling)
                try {
                    const geocoder = new google.maps.Geocoder();
                    geocoder.geocode({address: sensor.address}, function(results, status) {
                        if (status === 'OK' && results[0]) {
                            const p = results[0].geometry.location;
                            const pos = {lat: p.lat(), lng: p.lng()};
                            if (overlay) {
                                overlay.dataset.lat = pos.lat;
                                overlay.dataset.lng = pos.lng;
                            }
                            setMapPosition(pos);
                        }
                    });
                } catch (e) {
                    console.warn('Geocode failed or not available', e);
                }
            }
        }

        // External Google Maps button: open the overlay coords in a new tab
        document.getElementById('open-external-map')?.addEventListener('click', function() {
            const overlay = document.getElementById('map-overlay');
            if (!overlay) return;
            const lat = overlay.dataset.lat;
            const lng = overlay.dataset.lng;
            let url = '';
            if (lat && lng) {
                url = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(lat + ',' + lng)}`;
            } else {
                // fallback: attempt to parse text from #map-location-text
                const locText = document.getElementById('map-location-text')?.textContent || '';
                if (locText) {
                    url = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(locText)}`;
                }
            }
            if (url) {
                // try to open a new window/tab
                const w = window.open(url, '_blank');
                if (!w) {
                    alert('Popup blocked. Allow popups for this page or use the View button to open the map.');
                }
            } else {
                alert('No coordinates available for this sensor.');
            }
        });

        // Close map button behavior already exists; ensure overlay close removes marker if desired
        document.getElementById('close-map')?.addEventListener('click', function() {
            const overlay = document.getElementById('map-overlay');
            if (overlay) overlay.classList.remove('show');
        });

        // Detect if Google Maps API fails to load within a short window and display helpful message
        (function detectMapsFailure(){
            const ERR_MSG = 'Google Maps failed to load. Ensure you replaced the placeholder API key, enabled Maps JavaScript API and billing, and check referer restrictions in Google Cloud Console. See browser console for exact API error.';
            let waited = 0;
            const maxWait = 8000; // ms
            const interval = 500;
            const timer = setInterval(() => {
                waited += interval;
                if (window.google && window.google.maps) {
                    clearInterval(timer);
                    return;
                }
                if (waited >= maxWait) {
                    clearInterval(timer);
                    const errEl = document.getElementById('map-error');
                    if (errEl) {
                        errEl.style.display = 'block';
                        errEl.textContent = ERR_MSG;
                    }
                }
            }, interval);
        })();
    </script>

    <!-- Load Google Maps JS API: replace YOUR_API_KEY with your actual API key -->
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap"></script>
</body>
</html>